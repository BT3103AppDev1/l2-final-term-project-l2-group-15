(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Nu(t,e){const n=new Set(t.split(","));return e?s=>n.has(s.toLowerCase()):s=>n.has(s)}const Oe={},Er=[],Yt=()=>{},jI=()=>!1,Ha=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Mu=t=>t.startsWith("onUpdate:"),gt=Object.assign,Ou=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},HI=Object.prototype.hasOwnProperty,we=(t,e)=>HI.call(t,e),se=Array.isArray,Tr=t=>co(t)==="[object Map]",Wa=t=>co(t)==="[object Set]",qd=t=>co(t)==="[object Date]",de=t=>typeof t=="function",nt=t=>typeof t=="string",us=t=>typeof t=="symbol",Ne=t=>t!==null&&typeof t=="object",Sm=t=>(Ne(t)||de(t))&&de(t.then)&&de(t.catch),Pm=Object.prototype.toString,co=t=>Pm.call(t),WI=t=>co(t).slice(8,-1),Dm=t=>co(t)==="[object Object]",xu=t=>nt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ei=Nu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),za=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},zI=/-(\w)/g,Pn=za(t=>t.replace(zI,(e,n)=>n?n.toUpperCase():"")),KI=/\B([A-Z])/g,zr=za(t=>t.replace(KI,"-$1").toLowerCase()),Ka=za(t=>t.charAt(0).toUpperCase()+t.slice(1)),rl=za(t=>t?`on${Ka(t)}`:""),hs=(t,e)=>!Object.is(t,e),Zo=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},ma=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Vi=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let jd;const Cm=()=>jd||(jd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Lu(t){if(se(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=nt(s)?JI(s):Lu(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(nt(t)||Ne(t))return t}const YI=/;(?![^(]*\))/g,QI=/:([^]+)/,XI=/\/\*[^]*?\*\//g;function JI(t){const e={};return t.replace(XI,"").split(YI).forEach(n=>{if(n){const s=n.split(QI);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Ya(t){let e="";if(nt(t))e=t;else if(se(t))for(let n=0;n<t.length;n++){const s=Ya(t[n]);s&&(e+=s+" ")}else if(Ne(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const ZI="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ew=Nu(ZI);function km(t){return!!t||t===""}function tw(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=Qa(t[s],e[s]);return n}function Qa(t,e){if(t===e)return!0;let n=qd(t),s=qd(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=us(t),s=us(e),n||s)return t===e;if(n=se(t),s=se(e),n||s)return n&&s?tw(t,e):!1;if(n=Ne(t),s=Ne(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!Qa(t[o],e[o]))return!1}}return String(t)===String(e)}function nw(t,e){return t.findIndex(n=>Qa(n,e))}const j=t=>nt(t)?t:t==null?"":se(t)||Ne(t)&&(t.toString===Pm||!de(t.toString))?JSON.stringify(t,Nm,2):String(t),Nm=(t,e)=>e&&e.__v_isRef?Nm(t,e.value):Tr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[il(s,i)+" =>"]=r,n),{})}:Wa(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>il(n))}:us(e)?il(e):Ne(e)&&!se(e)&&!Dm(e)?String(e):e,il=(t,e="")=>{var n;return us(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zt;class sw{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Zt,!e&&Zt&&(this.index=(Zt.scopes||(Zt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Zt;try{return Zt=this,e()}finally{Zt=n}}}on(){Zt=this}off(){Zt=this.parent}stop(e){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function rw(t,e=Zt){e&&e.active&&e.effects.push(t)}function iw(){return Zt}let $s;class Vu{constructor(e,n,s,r){this.fn=e,this.trigger=n,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,rw(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,tr();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(ow(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),nr()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=rs,n=$s;try{return rs=!0,$s=this,this._runnings++,Hd(this),this.fn()}finally{Wd(this),this._runnings--,$s=n,rs=e}}stop(){var e;this.active&&(Hd(this),Wd(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function ow(t){return t.value}function Hd(t){t._trackId++,t._depsLength=0}function Wd(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)Mm(t.deps[e],t);t.deps.length=t._depsLength}}function Mm(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let rs=!0,Vl=0;const Om=[];function tr(){Om.push(rs),rs=!1}function nr(){const t=Om.pop();rs=t===void 0?!0:t}function Uu(){Vl++}function Fu(){for(Vl--;!Vl&&Ul.length;)Ul.shift()()}function xm(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const s=t.deps[t._depsLength];s!==e?(s&&Mm(s,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Ul=[];function Lm(t,e,n){Uu();for(const s of t.keys()){let r;s._dirtyLevel<e&&(r??(r=t.get(s)===s._trackId))&&(s._shouldSchedule||(s._shouldSchedule=s._dirtyLevel===0),s._dirtyLevel=e),s._shouldSchedule&&(r??(r=t.get(s)===s._trackId))&&(s.trigger(),(!s._runnings||s.allowRecurse)&&s._dirtyLevel!==2&&(s._shouldSchedule=!1,s.scheduler&&Ul.push(s.scheduler)))}Fu()}const Vm=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},Fl=new WeakMap,Bs=Symbol(""),$l=Symbol("");function Ut(t,e,n){if(rs&&$s){let s=Fl.get(t);s||Fl.set(t,s=new Map);let r=s.get(n);r||s.set(n,r=Vm(()=>s.delete(n))),xm($s,r)}}function Vn(t,e,n,s,r,i){const o=Fl.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&se(t)){const c=Number(s);o.forEach((l,h)=>{(h==="length"||!us(h)&&h>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":se(t)?xu(n)&&a.push(o.get("length")):(a.push(o.get(Bs)),Tr(t)&&a.push(o.get($l)));break;case"delete":se(t)||(a.push(o.get(Bs)),Tr(t)&&a.push(o.get($l)));break;case"set":Tr(t)&&a.push(o.get(Bs));break}Uu();for(const c of a)c&&Lm(c,4);Fu()}const aw=Nu("__proto__,__v_isRef,__isVue"),Um=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(us)),zd=cw();function cw(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=Te(this);for(let i=0,o=this.length;i<o;i++)Ut(s,"get",i+"");const r=s[e](...n);return r===-1||r===!1?s[e](...n.map(Te)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){tr(),Uu();const s=Te(this)[e].apply(this,n);return Fu(),nr(),s}}),t}function lw(t){const e=Te(this);return Ut(e,"has",t),e.hasOwnProperty(t)}class Fm{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Ew:qm:i?Gm:Bm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=se(e);if(!r){if(o&&we(zd,n))return Reflect.get(zd,n,s);if(n==="hasOwnProperty")return lw}const a=Reflect.get(e,n,s);return(us(n)?Um.has(n):aw(n))||(r||Ut(e,"get",n),i)?a:Ft(a)?o&&xu(n)?a:a.value:Ne(a)?r?Hm(a):Ja(a):a}}class $m extends Fm{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const c=Nr(i);if(!ga(s)&&!Nr(s)&&(i=Te(i),s=Te(s)),!se(e)&&Ft(i)&&!Ft(s))return c?!1:(i.value=s,!0)}const o=se(e)&&xu(n)?Number(n)<e.length:we(e,n),a=Reflect.set(e,n,s,r);return e===Te(r)&&(o?hs(s,i)&&Vn(e,"set",n,s):Vn(e,"add",n,s)),a}deleteProperty(e,n){const s=we(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Vn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!us(n)||!Um.has(n))&&Ut(e,"has",n),s}ownKeys(e){return Ut(e,"iterate",se(e)?"length":Bs),Reflect.ownKeys(e)}}class uw extends Fm{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const hw=new $m,dw=new uw,fw=new $m(!0),$u=t=>t,Xa=t=>Reflect.getPrototypeOf(t);function Lo(t,e,n=!1,s=!1){t=t.__v_raw;const r=Te(t),i=Te(e);n||(hs(e,i)&&Ut(r,"get",e),Ut(r,"get",i));const{has:o}=Xa(r),a=s?$u:n?qu:Ui;if(o.call(r,e))return a(t.get(e));if(o.call(r,i))return a(t.get(i));t!==r&&t.get(e)}function Vo(t,e=!1){const n=this.__v_raw,s=Te(n),r=Te(t);return e||(hs(t,r)&&Ut(s,"has",t),Ut(s,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function Uo(t,e=!1){return t=t.__v_raw,!e&&Ut(Te(t),"iterate",Bs),Reflect.get(t,"size",t)}function Kd(t){t=Te(t);const e=Te(this);return Xa(e).has.call(e,t)||(e.add(t),Vn(e,"add",t,t)),this}function Yd(t,e){e=Te(e);const n=Te(this),{has:s,get:r}=Xa(n);let i=s.call(n,t);i||(t=Te(t),i=s.call(n,t));const o=r.call(n,t);return n.set(t,e),i?hs(e,o)&&Vn(n,"set",t,e):Vn(n,"add",t,e),this}function Qd(t){const e=Te(this),{has:n,get:s}=Xa(e);let r=n.call(e,t);r||(t=Te(t),r=n.call(e,t)),s&&s.call(e,t);const i=e.delete(t);return r&&Vn(e,"delete",t,void 0),i}function Xd(){const t=Te(this),e=t.size!==0,n=t.clear();return e&&Vn(t,"clear",void 0,void 0),n}function Fo(t,e){return function(s,r){const i=this,o=i.__v_raw,a=Te(o),c=e?$u:t?qu:Ui;return!t&&Ut(a,"iterate",Bs),o.forEach((l,h)=>s.call(r,c(l),c(h),i))}}function $o(t,e,n){return function(...s){const r=this.__v_raw,i=Te(r),o=Tr(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=r[t](...s),h=n?$u:e?qu:Ui;return!e&&Ut(i,"iterate",c?$l:Bs),{next(){const{value:d,done:f}=l.next();return f?{value:d,done:f}:{value:a?[h(d[0]),h(d[1])]:h(d),done:f}},[Symbol.iterator](){return this}}}}function Hn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function pw(){const t={get(i){return Lo(this,i)},get size(){return Uo(this)},has:Vo,add:Kd,set:Yd,delete:Qd,clear:Xd,forEach:Fo(!1,!1)},e={get(i){return Lo(this,i,!1,!0)},get size(){return Uo(this)},has:Vo,add:Kd,set:Yd,delete:Qd,clear:Xd,forEach:Fo(!1,!0)},n={get(i){return Lo(this,i,!0)},get size(){return Uo(this,!0)},has(i){return Vo.call(this,i,!0)},add:Hn("add"),set:Hn("set"),delete:Hn("delete"),clear:Hn("clear"),forEach:Fo(!0,!1)},s={get(i){return Lo(this,i,!0,!0)},get size(){return Uo(this,!0)},has(i){return Vo.call(this,i,!0)},add:Hn("add"),set:Hn("set"),delete:Hn("delete"),clear:Hn("clear"),forEach:Fo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=$o(i,!1,!1),n[i]=$o(i,!0,!1),e[i]=$o(i,!1,!0),s[i]=$o(i,!0,!0)}),[t,n,e,s]}const[mw,gw,_w,yw]=pw();function Bu(t,e){const n=e?t?yw:_w:t?gw:mw;return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(we(n,r)&&r in s?n:s,r,i)}const vw={get:Bu(!1,!1)},Iw={get:Bu(!1,!0)},ww={get:Bu(!0,!1)},Bm=new WeakMap,Gm=new WeakMap,qm=new WeakMap,Ew=new WeakMap;function Tw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bw(t){return t.__v_skip||!Object.isExtensible(t)?0:Tw(WI(t))}function Ja(t){return Nr(t)?t:Gu(t,!1,hw,vw,Bm)}function jm(t){return Gu(t,!1,fw,Iw,Gm)}function Hm(t){return Gu(t,!0,dw,ww,qm)}function Gu(t,e,n,s,r){if(!Ne(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=r.get(t);if(i)return i;const o=bw(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return r.set(t,a),a}function br(t){return Nr(t)?br(t.__v_raw):!!(t&&t.__v_isReactive)}function Nr(t){return!!(t&&t.__v_isReadonly)}function ga(t){return!!(t&&t.__v_isShallow)}function Wm(t){return br(t)||Nr(t)}function Te(t){const e=t&&t.__v_raw;return e?Te(e):t}function zm(t){return Object.isExtensible(t)&&ma(t,"__v_skip",!0),t}const Ui=t=>Ne(t)?Ja(t):t,qu=t=>Ne(t)?Hm(t):t;class Km{constructor(e,n,s,r){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Vu(()=>e(this._value),()=>ea(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const e=Te(this);return(!e._cacheable||e.effect.dirty)&&hs(e._value,e._value=e.effect.run())&&ea(e,4),Ym(e),e.effect._dirtyLevel>=2&&ea(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Aw(t,e,n=!1){let s,r;const i=de(t);return i?(s=t,r=Yt):(s=t.get,r=t.set),new Km(s,r,i||!r,n)}function Ym(t){var e;rs&&$s&&(t=Te(t),xm($s,(e=t.dep)!=null?e:t.dep=Vm(()=>t.dep=void 0,t instanceof Km?t:void 0)))}function ea(t,e=4,n){t=Te(t);const s=t.dep;s&&Lm(s,e)}function Ft(t){return!!(t&&t.__v_isRef===!0)}function Kn(t){return Qm(t,!1)}function Rw(t){return Qm(t,!0)}function Qm(t,e){return Ft(t)?t:new Sw(t,e)}class Sw{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Te(e),this._value=n?e:Ui(e)}get value(){return Ym(this),this._value}set value(e){const n=this.__v_isShallow||ga(e)||Nr(e);e=n?e:Te(e),hs(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Ui(e),ea(this,4))}}function qt(t){return Ft(t)?t.value:t}const Pw={get:(t,e,n)=>qt(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Ft(r)&&!Ft(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Xm(t){return br(t)?t:new Proxy(t,Pw)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function is(t,e,n,s){try{return s?t(...s):t()}catch(r){Za(r,e,n)}}function nn(t,e,n,s){if(de(t)){const i=is(t,e,n,s);return i&&Sm(i)&&i.catch(o=>{Za(o,e,n)}),i}const r=[];for(let i=0;i<t.length;i++)r.push(nn(t[i],e,n,s));return r}function Za(t,e,n,s=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const l=i.ec;if(l){for(let h=0;h<l.length;h++)if(l[h](t,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){is(c,null,10,[t,o,a]);return}}Dw(t,n,r,s)}function Dw(t,e,n,s=!0){console.error(t)}let Fi=!1,Bl=!1;const Et=[];let pn=0;const Ar=[];let Yn=null,ks=0;const Jm=Promise.resolve();let ju=null;function Hu(t){const e=ju||Jm;return t?e.then(this?t.bind(this):t):e}function Cw(t){let e=pn+1,n=Et.length;for(;e<n;){const s=e+n>>>1,r=Et[s],i=$i(r);i<t||i===t&&r.pre?e=s+1:n=s}return e}function Wu(t){(!Et.length||!Et.includes(t,Fi&&t.allowRecurse?pn+1:pn))&&(t.id==null?Et.push(t):Et.splice(Cw(t.id),0,t),Zm())}function Zm(){!Fi&&!Bl&&(Bl=!0,ju=Jm.then(tg))}function kw(t){const e=Et.indexOf(t);e>pn&&Et.splice(e,1)}function Nw(t){se(t)?Ar.push(...t):(!Yn||!Yn.includes(t,t.allowRecurse?ks+1:ks))&&Ar.push(t),Zm()}function Jd(t,e,n=Fi?pn+1:0){for(;n<Et.length;n++){const s=Et[n];if(s&&s.pre){if(t&&s.id!==t.uid)continue;Et.splice(n,1),n--,s()}}}function eg(t){if(Ar.length){const e=[...new Set(Ar)].sort((n,s)=>$i(n)-$i(s));if(Ar.length=0,Yn){Yn.push(...e);return}for(Yn=e,ks=0;ks<Yn.length;ks++)Yn[ks]();Yn=null,ks=0}}const $i=t=>t.id==null?1/0:t.id,Mw=(t,e)=>{const n=$i(t)-$i(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function tg(t){Bl=!1,Fi=!0,Et.sort(Mw);try{for(pn=0;pn<Et.length;pn++){const e=Et[pn];e&&e.active!==!1&&is(e,null,14)}}finally{pn=0,Et.length=0,eg(),Fi=!1,ju=null,(Et.length||Ar.length)&&tg()}}function Ow(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Oe;let r=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in s){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:f}=s[h]||Oe;f&&(r=n.map(m=>nt(m)?m.trim():m)),d&&(r=n.map(Vi))}let a,c=s[a=rl(e)]||s[a=rl(Pn(e))];!c&&i&&(c=s[a=rl(zr(e))]),c&&nn(c,t,6,r);const l=s[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,nn(l,t,6,r)}}function ng(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!de(t)){const c=l=>{const h=ng(l,e,!0);h&&(a=!0,gt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(Ne(t)&&s.set(t,null),null):(se(i)?i.forEach(c=>o[c]=null):gt(o,i),Ne(t)&&s.set(t,o),o)}function ec(t,e){return!t||!Ha(e)?!1:(e=e.slice(2).replace(/Once$/,""),we(t,e[0].toLowerCase()+e.slice(1))||we(t,zr(e))||we(t,e))}let at=null,tc=null;function _a(t){const e=at;return at=t,tc=t&&t.type.__scopeId||null,e}function ue(t){tc=t}function he(){tc=null}function _n(t,e=at,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&uf(-1);const i=_a(e);let o;try{o=t(...r)}finally{_a(i),s._d&&uf(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function ol(t){const{type:e,vnode:n,proxy:s,withProxy:r,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:h,renderCache:d,data:f,setupState:m,ctx:I,inheritAttrs:S}=t;let T,k;const U=_a(t);try{if(n.shapeFlag&4){const Y=r||s,Ie=Y;T=fn(h.call(Ie,Y,d,i,m,f,I)),k=c}else{const Y=e;T=fn(Y.length>1?Y(i,{attrs:c,slots:a,emit:l}):Y(i,null)),k=e.props?c:xw(c)}}catch(Y){Ri.length=0,Za(Y,t,1),T=D(ds)}let q=T;if(k&&S!==!1){const Y=Object.keys(k),{shapeFlag:Ie}=q;Y.length&&Ie&7&&(o&&Y.some(Mu)&&(k=Lw(k,o)),q=Mr(q,k))}return n.dirs&&(q=Mr(q),q.dirs=q.dirs?q.dirs.concat(n.dirs):n.dirs),n.transition&&(q.transition=n.transition),T=q,_a(U),T}const xw=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ha(n))&&((e||(e={}))[n]=t[n]);return e},Lw=(t,e)=>{const n={};for(const s in t)(!Mu(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Vw(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?Zd(s,o,l):!!o;if(c&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const f=h[d];if(o[f]!==s[f]&&!ec(l,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Zd(s,o,l):!0:!!o;return!1}function Zd(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!ec(n,i))return!0}return!1}function Uw({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const sg="components";function ee(t,e){return $w(sg,t,!0,e)||t}const Fw=Symbol.for("v-ndc");function $w(t,e,n=!0,s=!1){const r=at||Tt;if(r){const i=r.type;if(t===sg){const a=OE(i,!1);if(a&&(a===e||a===Pn(e)||a===Ka(Pn(e))))return i}const o=ef(r[t]||i[t],e)||ef(r.appContext[t],e);return!o&&s?i:o}}function ef(t,e){return t&&(t[e]||t[Pn(e)]||t[Ka(Pn(e))])}const Bw=t=>t.__isSuspense;function Gw(t,e){e&&e.pendingBranch?se(t)?e.effects.push(...t):e.effects.push(t):Nw(t)}const qw=Symbol.for("v-scx"),jw=()=>wn(qw),Bo={};function ta(t,e,n){return rg(t,e,n)}function rg(t,e,{immediate:n,deep:s,flush:r,once:i,onTrack:o,onTrigger:a}=Oe){if(e&&i){const X=e;e=(...Me)=>{X(...Me),Ie()}}const c=Tt,l=X=>s===!0?X:Os(X,s===!1?1:void 0);let h,d=!1,f=!1;if(Ft(t)?(h=()=>t.value,d=ga(t)):br(t)?(h=()=>l(t),d=!0):se(t)?(f=!0,d=t.some(X=>br(X)||ga(X)),h=()=>t.map(X=>{if(Ft(X))return X.value;if(br(X))return l(X);if(de(X))return is(X,c,2)})):de(t)?e?h=()=>is(t,c,2):h=()=>(m&&m(),nn(t,c,3,[I])):h=Yt,e&&s){const X=h;h=()=>Os(X())}let m,I=X=>{m=q.onStop=()=>{is(X,c,4),m=q.onStop=void 0}},S;if(oc)if(I=Yt,e?n&&nn(e,c,3,[h(),f?[]:void 0,I]):h(),r==="sync"){const X=jw();S=X.__watcherHandles||(X.__watcherHandles=[])}else return Yt;let T=f?new Array(t.length).fill(Bo):Bo;const k=()=>{if(!(!q.active||!q.dirty))if(e){const X=q.run();(s||d||(f?X.some((Me,Ze)=>hs(Me,T[Ze])):hs(X,T)))&&(m&&m(),nn(e,c,3,[X,T===Bo?void 0:f&&T[0]===Bo?[]:T,I]),T=X)}else q.run()};k.allowRecurse=!!e;let U;r==="sync"?U=k:r==="post"?U=()=>Lt(k,c&&c.suspense):(k.pre=!0,c&&(k.id=c.uid),U=()=>Wu(k));const q=new Vu(h,Yt,U),Y=iw(),Ie=()=>{q.stop(),Y&&Ou(Y.effects,q)};return e?n?k():T=q.run():r==="post"?Lt(q.run.bind(q),c&&c.suspense):q.run(),S&&S.push(Ie),Ie}function Hw(t,e,n){const s=this.proxy,r=nt(t)?t.includes(".")?ig(s,t):()=>s[t]:t.bind(s,s);let i;de(e)?i=e:(i=e.handler,n=e);const o=lo(this),a=rg(r,i.bind(s),n);return o(),a}function ig(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}function Os(t,e,n=0,s){if(!Ne(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(s=s||new Set,s.has(t))return t;if(s.add(t),Ft(t))Os(t.value,e,n,s);else if(se(t))for(let r=0;r<t.length;r++)Os(t[r],e,n,s);else if(Wa(t)||Tr(t))t.forEach(r=>{Os(r,e,n,s)});else if(Dm(t))for(const r in t)Os(t[r],e,n,s);return t}function Ce(t,e){if(at===null)return t;const n=ac(at)||at.proxy,s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,c=Oe]=e[r];i&&(de(i)&&(i={mounted:i,updated:i}),i.deep&&Os(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function Ss(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(tr(),nn(c,n,8,[t.el,a,t,e]),nr())}}/*! #__NO_SIDE_EFFECTS__ */function og(t,e){return de(t)?gt({name:t.name},e,{setup:t}):t}const Ti=t=>!!t.type.__asyncLoader,ag=t=>t.type.__isKeepAlive;function Ww(t,e){cg(t,"a",e)}function zw(t,e){cg(t,"da",e)}function cg(t,e,n=Tt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(nc(e,s,n),n){let r=n.parent;for(;r&&r.parent;)ag(r.parent.vnode)&&Kw(s,e,n,r),r=r.parent}}function Kw(t,e,n,s){const r=nc(e,t,s,!0);lg(()=>{Ou(s[e],r)},n)}function nc(t,e,n=Tt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;tr();const a=lo(n),c=nn(e,n,t,o);return a(),nr(),c});return s?r.unshift(i):r.push(i),i}}const Bn=t=>(e,n=Tt)=>(!oc||t==="sp")&&nc(t,(...s)=>e(...s),n),Yw=Bn("bm"),Qw=Bn("m"),Xw=Bn("bu"),Jw=Bn("u"),Zw=Bn("bum"),lg=Bn("um"),eE=Bn("sp"),tE=Bn("rtg"),nE=Bn("rtc");function sE(t,e=Tt){nc("ec",t,e)}function Dt(t,e,n,s){let r;const i=n&&n[s];if(se(t)||nt(t)){r=new Array(t.length);for(let o=0,a=t.length;o<a;o++)r[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){r=new Array(t);for(let o=0;o<t;o++)r[o]=e(o+1,o,void 0,i&&i[o])}else if(Ne(t))if(t[Symbol.iterator])r=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);r=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];r[a]=e(t[l],l,a,i&&i[a])}}else r=[];return n&&(n[s]=r),r}function rE(t,e,n={},s,r){if(at.isCE||at.parent&&Ti(at.parent)&&at.parent.isCE)return e!=="default"&&(n.name=e),D("slot",n,s&&s());let i=t[e];i&&i._c&&(i._d=!1),_();const o=i&&ug(i(n)),a=je(fe,{key:n.key||o&&o.key||`_${e}`},o||(s?s():[]),o&&t._===1?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function ug(t){return t.some(e=>va(e)?!(e.type===ds||e.type===fe&&!ug(e.children)):!0)?t:null}const Gl=t=>t?Eg(t)?ac(t)||t.proxy:Gl(t.parent):null,bi=gt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Gl(t.parent),$root:t=>Gl(t.root),$emit:t=>t.emit,$options:t=>zu(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Wu(t.update)}),$nextTick:t=>t.n||(t.n=Hu.bind(t.proxy)),$watch:t=>Hw.bind(t)}),al=(t,e)=>t!==Oe&&!t.__isScriptSetup&&we(t,e),iE={get({_:t},e){const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(al(s,e))return o[e]=1,s[e];if(r!==Oe&&we(r,e))return o[e]=2,r[e];if((l=t.propsOptions[0])&&we(l,e))return o[e]=3,i[e];if(n!==Oe&&we(n,e))return o[e]=4,n[e];ql&&(o[e]=0)}}const h=bi[e];let d,f;if(h)return e==="$attrs"&&Ut(t,"get",e),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==Oe&&we(n,e))return o[e]=4,n[e];if(f=c.config.globalProperties,we(f,e))return f[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return al(r,e)?(r[e]=n,!0):s!==Oe&&we(s,e)?(s[e]=n,!0):we(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==Oe&&we(t,o)||al(e,o)||(a=i[0])&&we(a,o)||we(s,o)||we(bi,o)||we(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:we(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function tf(t){return se(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let ql=!0;function oE(t){const e=zu(t),n=t.proxy,s=t.ctx;ql=!1,e.beforeCreate&&nf(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:l,created:h,beforeMount:d,mounted:f,beforeUpdate:m,updated:I,activated:S,deactivated:T,beforeDestroy:k,beforeUnmount:U,destroyed:q,unmounted:Y,render:Ie,renderTracked:X,renderTriggered:Me,errorCaptured:Ze,serverPrefetch:Bt,expose:Ct,inheritAttrs:qn,components:Rs,directives:ln,filters:ri}=e;if(l&&aE(l,s,null),o)for(const Pe in o){const be=o[Pe];de(be)&&(s[Pe]=be.bind(n))}if(r){const Pe=r.call(n,n);Ne(Pe)&&(t.data=Ja(Pe))}if(ql=!0,i)for(const Pe in i){const be=i[Pe],Nn=de(be)?be.bind(n,n):de(be.get)?be.get.bind(n,n):Yt,jn=!de(be)&&de(be.set)?be.set.bind(n):Yt,un=en({get:Nn,set:jn});Object.defineProperty(s,Pe,{enumerable:!0,configurable:!0,get:()=>un.value,set:xt=>un.value=xt})}if(a)for(const Pe in a)hg(a[Pe],s,n,Pe);if(c){const Pe=de(c)?c.call(n):c;Reflect.ownKeys(Pe).forEach(be=>{na(be,Pe[be])})}h&&nf(h,t,"c");function rt(Pe,be){se(be)?be.forEach(Nn=>Pe(Nn.bind(n))):be&&Pe(be.bind(n))}if(rt(Yw,d),rt(Qw,f),rt(Xw,m),rt(Jw,I),rt(Ww,S),rt(zw,T),rt(sE,Ze),rt(nE,X),rt(tE,Me),rt(Zw,U),rt(lg,Y),rt(eE,Bt),se(Ct))if(Ct.length){const Pe=t.exposed||(t.exposed={});Ct.forEach(be=>{Object.defineProperty(Pe,be,{get:()=>n[be],set:Nn=>n[be]=Nn})})}else t.exposed||(t.exposed={});Ie&&t.render===Yt&&(t.render=Ie),qn!=null&&(t.inheritAttrs=qn),Rs&&(t.components=Rs),ln&&(t.directives=ln)}function aE(t,e,n=Yt){se(t)&&(t=jl(t));for(const s in t){const r=t[s];let i;Ne(r)?"default"in r?i=wn(r.from||s,r.default,!0):i=wn(r.from||s):i=wn(r),Ft(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function nf(t,e,n){nn(se(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function hg(t,e,n,s){const r=s.includes(".")?ig(n,s):()=>n[s];if(nt(t)){const i=e[t];de(i)&&ta(r,i)}else if(de(t))ta(r,t.bind(n));else if(Ne(t))if(se(t))t.forEach(i=>hg(i,e,n,s));else{const i=de(t.handler)?t.handler.bind(n):e[t.handler];de(i)&&ta(r,i,t)}}function zu(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(l=>ya(c,l,o,!0)),ya(c,e,o)),Ne(e)&&i.set(e,c),c}function ya(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&ya(t,i,n,!0),r&&r.forEach(o=>ya(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=cE[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const cE={data:sf,props:rf,emits:rf,methods:pi,computed:pi,beforeCreate:Nt,created:Nt,beforeMount:Nt,mounted:Nt,beforeUpdate:Nt,updated:Nt,beforeDestroy:Nt,beforeUnmount:Nt,destroyed:Nt,unmounted:Nt,activated:Nt,deactivated:Nt,errorCaptured:Nt,serverPrefetch:Nt,components:pi,directives:pi,watch:uE,provide:sf,inject:lE};function sf(t,e){return e?t?function(){return gt(de(t)?t.call(this,this):t,de(e)?e.call(this,this):e)}:e:t}function lE(t,e){return pi(jl(t),jl(e))}function jl(t){if(se(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Nt(t,e){return t?[...new Set([].concat(t,e))]:e}function pi(t,e){return t?gt(Object.create(null),t,e):e}function rf(t,e){return t?se(t)&&se(e)?[...new Set([...t,...e])]:gt(Object.create(null),tf(t),tf(e??{})):e}function uE(t,e){if(!t)return e;if(!e)return t;const n=gt(Object.create(null),t);for(const s in e)n[s]=Nt(t[s],e[s]);return n}function dg(){return{app:null,config:{isNativeTag:jI,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hE=0;function dE(t,e){return function(s,r=null){de(s)||(s=gt({},s)),r!=null&&!Ne(r)&&(r=null);const i=dg(),o=new WeakSet;let a=!1;const c=i.app={_uid:hE++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:LE,get config(){return i.config},set config(l){},use(l,...h){return o.has(l)||(l&&de(l.install)?(o.add(l),l.install(c,...h)):de(l)&&(o.add(l),l(c,...h))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,h){return h?(i.components[l]=h,c):i.components[l]},directive(l,h){return h?(i.directives[l]=h,c):i.directives[l]},mount(l,h,d){if(!a){const f=D(s,r);return f.appContext=i,d===!0?d="svg":d===!1&&(d=void 0),h&&e?e(f,l):t(f,l,d),a=!0,c._container=l,l.__vue_app__=c,ac(f.component)||f.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,h){return i.provides[l]=h,c},runWithContext(l){const h=Ai;Ai=c;try{return l()}finally{Ai=h}}};return c}}let Ai=null;function na(t,e){if(Tt){let n=Tt.provides;const s=Tt.parent&&Tt.parent.provides;s===n&&(n=Tt.provides=Object.create(s)),n[t]=e}}function wn(t,e,n=!1){const s=Tt||at;if(s||Ai){const r=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:Ai._context.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&de(e)?e.call(s&&s.proxy):e}}function fE(t,e,n,s=!1){const r={},i={};ma(i,rc,1),t.propsDefaults=Object.create(null),fg(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:jm(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function pE(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=Te(r),[c]=t.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let f=h[d];if(ec(t.emitsOptions,f))continue;const m=e[f];if(c)if(we(i,f))m!==i[f]&&(i[f]=m,l=!0);else{const I=Pn(f);r[I]=Hl(c,a,I,m,t,!1)}else m!==i[f]&&(i[f]=m,l=!0)}}}else{fg(t,e,r,i)&&(l=!0);let h;for(const d in a)(!e||!we(e,d)&&((h=zr(d))===d||!we(e,h)))&&(c?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=Hl(c,a,d,void 0,t,!0)):delete r[d]);if(i!==a)for(const d in i)(!e||!we(e,d))&&(delete i[d],l=!0)}l&&Vn(t,"set","$attrs")}function fg(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Ei(c))continue;const l=e[c];let h;r&&we(r,h=Pn(c))?!i||!i.includes(h)?n[h]=l:(a||(a={}))[h]=l:ec(t.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,o=!0)}if(i){const c=Te(n),l=a||Oe;for(let h=0;h<i.length;h++){const d=i[h];n[d]=Hl(r,c,d,l[d],t,!we(l,d))}}return o}function Hl(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=we(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&de(c)){const{propsDefaults:l}=r;if(n in l)s=l[n];else{const h=lo(r);s=l[n]=c.call(null,e),h()}}else s=c}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===zr(n))&&(s=!0))}return s}function pg(t,e,n=!1){const s=e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let c=!1;if(!de(t)){const h=d=>{c=!0;const[f,m]=pg(d,e,!0);gt(o,f),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return Ne(t)&&s.set(t,Er),Er;if(se(i))for(let h=0;h<i.length;h++){const d=Pn(i[h]);of(d)&&(o[d]=Oe)}else if(i)for(const h in i){const d=Pn(h);if(of(d)){const f=i[h],m=o[d]=se(f)||de(f)?{type:f}:gt({},f);if(m){const I=lf(Boolean,m.type),S=lf(String,m.type);m[0]=I>-1,m[1]=S<0||I<S,(I>-1||we(m,"default"))&&a.push(d)}}}const l=[o,a];return Ne(t)&&s.set(t,l),l}function of(t){return t[0]!=="$"&&!Ei(t)}function af(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function cf(t,e){return af(t)===af(e)}function lf(t,e){return se(e)?e.findIndex(n=>cf(n,t)):de(e)&&cf(e,t)?0:-1}const mg=t=>t[0]==="_"||t==="$stable",Ku=t=>se(t)?t.map(fn):[fn(t)],mE=(t,e,n)=>{if(e._n)return e;const s=_n((...r)=>Ku(e(...r)),n);return s._c=!1,s},gg=(t,e,n)=>{const s=t._ctx;for(const r in t){if(mg(r))continue;const i=t[r];if(de(i))e[r]=mE(r,i,s);else if(i!=null){const o=Ku(i);e[r]=()=>o}}},_g=(t,e)=>{const n=Ku(e);t.slots.default=()=>n},gE=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Te(e),ma(e,"_",n)):gg(e,t.slots={})}else t.slots={},e&&_g(t,e);ma(t.slots,rc,1)},_E=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Oe;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(gt(r,e),!n&&a===1&&delete r._):(i=!e.$stable,gg(e,r)),o=e}else e&&(_g(t,e),o={default:1});if(i)for(const a in r)!mg(a)&&o[a]==null&&delete r[a]};function Wl(t,e,n,s,r=!1){if(se(t)){t.forEach((f,m)=>Wl(f,e&&(se(e)?e[m]:e),n,s,r));return}if(Ti(s)&&!r)return;const i=s.shapeFlag&4?ac(s.component)||s.component.proxy:s.el,o=r?null:i,{i:a,r:c}=t,l=e&&e.r,h=a.refs===Oe?a.refs={}:a.refs,d=a.setupState;if(l!=null&&l!==c&&(nt(l)?(h[l]=null,we(d,l)&&(d[l]=null)):Ft(l)&&(l.value=null)),de(c))is(c,a,12,[o,h]);else{const f=nt(c),m=Ft(c);if(f||m){const I=()=>{if(t.f){const S=f?we(d,c)?d[c]:h[c]:c.value;r?se(S)&&Ou(S,i):se(S)?S.includes(i)||S.push(i):f?(h[c]=[i],we(d,c)&&(d[c]=h[c])):(c.value=[i],t.k&&(h[t.k]=c.value))}else f?(h[c]=o,we(d,c)&&(d[c]=o)):m&&(c.value=o,t.k&&(h[t.k]=o))};o?(I.id=-1,Lt(I,n)):I()}}}const Lt=Gw;function yE(t){return vE(t)}function vE(t,e){const n=Cm();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:h,parentNode:d,nextSibling:f,setScopeId:m=Yt,insertStaticContent:I}=t,S=(p,g,v,A=null,w=null,M=null,B=void 0,N=null,O=!!g.dynamicChildren)=>{if(p===g)return;p&&!oi(p,g)&&(A=b(p),xt(p,w,M,!0),p=null),g.patchFlag===-2&&(O=!1,g.dynamicChildren=null);const{type:P,ref:z,shapeFlag:te}=g;switch(P){case sc:T(p,g,v,A);break;case ds:k(p,g,v,A);break;case sa:p==null&&U(g,v,A,B);break;case fe:Rs(p,g,v,A,w,M,B,N,O);break;default:te&1?Ie(p,g,v,A,w,M,B,N,O):te&6?ln(p,g,v,A,w,M,B,N,O):(te&64||te&128)&&P.process(p,g,v,A,w,M,B,N,O,Q)}z!=null&&w&&Wl(z,p&&p.ref,M,g||p,!g)},T=(p,g,v,A)=>{if(p==null)s(g.el=a(g.children),v,A);else{const w=g.el=p.el;g.children!==p.children&&l(w,g.children)}},k=(p,g,v,A)=>{p==null?s(g.el=c(g.children||""),v,A):g.el=p.el},U=(p,g,v,A)=>{[p.el,p.anchor]=I(p.children,g,v,A,p.el,p.anchor)},q=({el:p,anchor:g},v,A)=>{let w;for(;p&&p!==g;)w=f(p),s(p,v,A),p=w;s(g,v,A)},Y=({el:p,anchor:g})=>{let v;for(;p&&p!==g;)v=f(p),r(p),p=v;r(g)},Ie=(p,g,v,A,w,M,B,N,O)=>{g.type==="svg"?B="svg":g.type==="math"&&(B="mathml"),p==null?X(g,v,A,w,M,B,N,O):Bt(p,g,w,M,B,N,O)},X=(p,g,v,A,w,M,B,N)=>{let O,P;const{props:z,shapeFlag:te,transition:J,dirs:ae}=p;if(O=p.el=o(p.type,M,z&&z.is,z),te&8?h(O,p.children):te&16&&Ze(p.children,O,null,A,w,cl(p,M),B,N),ae&&Ss(p,null,A,"created"),Me(O,p,p.scopeId,B,A),z){for(const De in z)De!=="value"&&!Ei(De)&&i(O,De,null,z[De],M,p.children,A,w,yt);"value"in z&&i(O,"value",null,z.value,M),(P=z.onVnodeBeforeMount)&&dn(P,A,p)}ae&&Ss(p,null,A,"beforeMount");const pe=IE(w,J);pe&&J.beforeEnter(O),s(O,g,v),((P=z&&z.onVnodeMounted)||pe||ae)&&Lt(()=>{P&&dn(P,A,p),pe&&J.enter(O),ae&&Ss(p,null,A,"mounted")},w)},Me=(p,g,v,A,w)=>{if(v&&m(p,v),A)for(let M=0;M<A.length;M++)m(p,A[M]);if(w){let M=w.subTree;if(g===M){const B=w.vnode;Me(p,B,B.scopeId,B.slotScopeIds,w.parent)}}},Ze=(p,g,v,A,w,M,B,N,O=0)=>{for(let P=O;P<p.length;P++){const z=p[P]=N?Qn(p[P]):fn(p[P]);S(null,z,g,v,A,w,M,B,N)}},Bt=(p,g,v,A,w,M,B)=>{const N=g.el=p.el;let{patchFlag:O,dynamicChildren:P,dirs:z}=g;O|=p.patchFlag&16;const te=p.props||Oe,J=g.props||Oe;let ae;if(v&&Ps(v,!1),(ae=J.onVnodeBeforeUpdate)&&dn(ae,v,g,p),z&&Ss(g,p,v,"beforeUpdate"),v&&Ps(v,!0),P?Ct(p.dynamicChildren,P,N,v,A,cl(g,w),M):B||be(p,g,N,null,v,A,cl(g,w),M,!1),O>0){if(O&16)qn(N,g,te,J,v,A,w);else if(O&2&&te.class!==J.class&&i(N,"class",null,J.class,w),O&4&&i(N,"style",te.style,J.style,w),O&8){const pe=g.dynamicProps;for(let De=0;De<pe.length;De++){const Ue=pe[De],it=te[Ue],Jt=J[Ue];(Jt!==it||Ue==="value")&&i(N,Ue,it,Jt,w,p.children,v,A,yt)}}O&1&&p.children!==g.children&&h(N,g.children)}else!B&&P==null&&qn(N,g,te,J,v,A,w);((ae=J.onVnodeUpdated)||z)&&Lt(()=>{ae&&dn(ae,v,g,p),z&&Ss(g,p,v,"updated")},A)},Ct=(p,g,v,A,w,M,B)=>{for(let N=0;N<g.length;N++){const O=p[N],P=g[N],z=O.el&&(O.type===fe||!oi(O,P)||O.shapeFlag&70)?d(O.el):v;S(O,P,z,null,A,w,M,B,!0)}},qn=(p,g,v,A,w,M,B)=>{if(v!==A){if(v!==Oe)for(const N in v)!Ei(N)&&!(N in A)&&i(p,N,v[N],null,B,g.children,w,M,yt);for(const N in A){if(Ei(N))continue;const O=A[N],P=v[N];O!==P&&N!=="value"&&i(p,N,P,O,B,g.children,w,M,yt)}"value"in A&&i(p,"value",v.value,A.value,B)}},Rs=(p,g,v,A,w,M,B,N,O)=>{const P=g.el=p?p.el:a(""),z=g.anchor=p?p.anchor:a("");let{patchFlag:te,dynamicChildren:J,slotScopeIds:ae}=g;ae&&(N=N?N.concat(ae):ae),p==null?(s(P,v,A),s(z,v,A),Ze(g.children||[],v,z,w,M,B,N,O)):te>0&&te&64&&J&&p.dynamicChildren?(Ct(p.dynamicChildren,J,v,w,M,B,N),(g.key!=null||w&&g===w.subTree)&&yg(p,g,!0)):be(p,g,v,z,w,M,B,N,O)},ln=(p,g,v,A,w,M,B,N,O)=>{g.slotScopeIds=N,p==null?g.shapeFlag&512?w.ctx.activate(g,v,A,B,O):ri(g,v,A,w,M,B,O):ur(p,g,O)},ri=(p,g,v,A,w,M,B)=>{const N=p.component=DE(p,A,w);if(ag(p)&&(N.ctx.renderer=Q),CE(N),N.asyncDep){if(w&&w.registerDep(N,rt),!p.el){const O=N.subTree=D(ds);k(null,O,g,v)}}else rt(N,p,g,v,w,M,B)},ur=(p,g,v)=>{const A=g.component=p.component;if(Vw(p,g,v))if(A.asyncDep&&!A.asyncResolved){Pe(A,g,v);return}else A.next=g,kw(A.update),A.effect.dirty=!0,A.update();else g.el=p.el,A.vnode=g},rt=(p,g,v,A,w,M,B)=>{const N=()=>{if(p.isMounted){let{next:z,bu:te,u:J,parent:ae,vnode:pe}=p;{const fr=vg(p);if(fr){z&&(z.el=pe.el,Pe(p,z,B)),fr.asyncDep.then(()=>{p.isUnmounted||N()});return}}let De=z,Ue;Ps(p,!1),z?(z.el=pe.el,Pe(p,z,B)):z=pe,te&&Zo(te),(Ue=z.props&&z.props.onVnodeBeforeUpdate)&&dn(Ue,ae,z,pe),Ps(p,!0);const it=ol(p),Jt=p.subTree;p.subTree=it,S(Jt,it,d(Jt.el),b(Jt),p,w,M),z.el=it.el,De===null&&Uw(p,it.el),J&&Lt(J,w),(Ue=z.props&&z.props.onVnodeUpdated)&&Lt(()=>dn(Ue,ae,z,pe),w)}else{let z;const{el:te,props:J}=g,{bm:ae,m:pe,parent:De}=p,Ue=Ti(g);if(Ps(p,!1),ae&&Zo(ae),!Ue&&(z=J&&J.onVnodeBeforeMount)&&dn(z,De,g),Ps(p,!0),te&&Ve){const it=()=>{p.subTree=ol(p),Ve(te,p.subTree,p,w,null)};Ue?g.type.__asyncLoader().then(()=>!p.isUnmounted&&it()):it()}else{const it=p.subTree=ol(p);S(null,it,v,A,p,w,M),g.el=it.el}if(pe&&Lt(pe,w),!Ue&&(z=J&&J.onVnodeMounted)){const it=g;Lt(()=>dn(z,De,it),w)}(g.shapeFlag&256||De&&Ti(De.vnode)&&De.vnode.shapeFlag&256)&&p.a&&Lt(p.a,w),p.isMounted=!0,g=v=A=null}},O=p.effect=new Vu(N,Yt,()=>Wu(P),p.scope),P=p.update=()=>{O.dirty&&O.run()};P.id=p.uid,Ps(p,!0),P()},Pe=(p,g,v)=>{g.component=p;const A=p.vnode.props;p.vnode=g,p.next=null,pE(p,g.props,A,v),_E(p,g.children,v),tr(),Jd(p),nr()},be=(p,g,v,A,w,M,B,N,O=!1)=>{const P=p&&p.children,z=p?p.shapeFlag:0,te=g.children,{patchFlag:J,shapeFlag:ae}=g;if(J>0){if(J&128){jn(P,te,v,A,w,M,B,N,O);return}else if(J&256){Nn(P,te,v,A,w,M,B,N,O);return}}ae&8?(z&16&&yt(P,w,M),te!==P&&h(v,te)):z&16?ae&16?jn(P,te,v,A,w,M,B,N,O):yt(P,w,M,!0):(z&8&&h(v,""),ae&16&&Ze(te,v,A,w,M,B,N,O))},Nn=(p,g,v,A,w,M,B,N,O)=>{p=p||Er,g=g||Er;const P=p.length,z=g.length,te=Math.min(P,z);let J;for(J=0;J<te;J++){const ae=g[J]=O?Qn(g[J]):fn(g[J]);S(p[J],ae,v,null,w,M,B,N,O)}P>z?yt(p,w,M,!0,!1,te):Ze(g,v,A,w,M,B,N,O,te)},jn=(p,g,v,A,w,M,B,N,O)=>{let P=0;const z=g.length;let te=p.length-1,J=z-1;for(;P<=te&&P<=J;){const ae=p[P],pe=g[P]=O?Qn(g[P]):fn(g[P]);if(oi(ae,pe))S(ae,pe,v,null,w,M,B,N,O);else break;P++}for(;P<=te&&P<=J;){const ae=p[te],pe=g[J]=O?Qn(g[J]):fn(g[J]);if(oi(ae,pe))S(ae,pe,v,null,w,M,B,N,O);else break;te--,J--}if(P>te){if(P<=J){const ae=J+1,pe=ae<z?g[ae].el:A;for(;P<=J;)S(null,g[P]=O?Qn(g[P]):fn(g[P]),v,pe,w,M,B,N,O),P++}}else if(P>J)for(;P<=te;)xt(p[P],w,M,!0),P++;else{const ae=P,pe=P,De=new Map;for(P=pe;P<=J;P++){const Gt=g[P]=O?Qn(g[P]):fn(g[P]);Gt.key!=null&&De.set(Gt.key,P)}let Ue,it=0;const Jt=J-pe+1;let fr=!1,$d=0;const ii=new Array(Jt);for(P=0;P<Jt;P++)ii[P]=0;for(P=ae;P<=te;P++){const Gt=p[P];if(it>=Jt){xt(Gt,w,M,!0);continue}let hn;if(Gt.key!=null)hn=De.get(Gt.key);else for(Ue=pe;Ue<=J;Ue++)if(ii[Ue-pe]===0&&oi(Gt,g[Ue])){hn=Ue;break}hn===void 0?xt(Gt,w,M,!0):(ii[hn-pe]=P+1,hn>=$d?$d=hn:fr=!0,S(Gt,g[hn],v,null,w,M,B,N,O),it++)}const Bd=fr?wE(ii):Er;for(Ue=Bd.length-1,P=Jt-1;P>=0;P--){const Gt=pe+P,hn=g[Gt],Gd=Gt+1<z?g[Gt+1].el:A;ii[P]===0?S(null,hn,v,Gd,w,M,B,N,O):fr&&(Ue<0||P!==Bd[Ue]?un(hn,v,Gd,2):Ue--)}}},un=(p,g,v,A,w=null)=>{const{el:M,type:B,transition:N,children:O,shapeFlag:P}=p;if(P&6){un(p.component.subTree,g,v,A);return}if(P&128){p.suspense.move(g,v,A);return}if(P&64){B.move(p,g,v,Q);return}if(B===fe){s(M,g,v);for(let te=0;te<O.length;te++)un(O[te],g,v,A);s(p.anchor,g,v);return}if(B===sa){q(p,g,v);return}if(A!==2&&P&1&&N)if(A===0)N.beforeEnter(M),s(M,g,v),Lt(()=>N.enter(M),w);else{const{leave:te,delayLeave:J,afterLeave:ae}=N,pe=()=>s(M,g,v),De=()=>{te(M,()=>{pe(),ae&&ae()})};J?J(M,pe,De):De()}else s(M,g,v)},xt=(p,g,v,A=!1,w=!1)=>{const{type:M,props:B,ref:N,children:O,dynamicChildren:P,shapeFlag:z,patchFlag:te,dirs:J}=p;if(N!=null&&Wl(N,null,v,p,!0),z&256){g.ctx.deactivate(p);return}const ae=z&1&&J,pe=!Ti(p);let De;if(pe&&(De=B&&B.onVnodeBeforeUnmount)&&dn(De,g,p),z&6)xo(p.component,v,A);else{if(z&128){p.suspense.unmount(v,A);return}ae&&Ss(p,null,g,"beforeUnmount"),z&64?p.type.remove(p,g,v,w,Q,A):P&&(M!==fe||te>0&&te&64)?yt(P,g,v,!1,!0):(M===fe&&te&384||!w&&z&16)&&yt(O,g,v),A&&hr(p)}(pe&&(De=B&&B.onVnodeUnmounted)||ae)&&Lt(()=>{De&&dn(De,g,p),ae&&Ss(p,null,g,"unmounted")},v)},hr=p=>{const{type:g,el:v,anchor:A,transition:w}=p;if(g===fe){dr(v,A);return}if(g===sa){Y(p);return}const M=()=>{r(v),w&&!w.persisted&&w.afterLeave&&w.afterLeave()};if(p.shapeFlag&1&&w&&!w.persisted){const{leave:B,delayLeave:N}=w,O=()=>B(v,M);N?N(p.el,M,O):O()}else M()},dr=(p,g)=>{let v;for(;p!==g;)v=f(p),r(p),p=v;r(g)},xo=(p,g,v)=>{const{bum:A,scope:w,update:M,subTree:B,um:N}=p;A&&Zo(A),w.stop(),M&&(M.active=!1,xt(B,p,g,v)),N&&Lt(N,g),Lt(()=>{p.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},yt=(p,g,v,A=!1,w=!1,M=0)=>{for(let B=M;B<p.length;B++)xt(p[B],g,v,A,w)},b=p=>p.shapeFlag&6?b(p.component.subTree):p.shapeFlag&128?p.suspense.next():f(p.anchor||p.el);let W=!1;const $=(p,g,v)=>{p==null?g._vnode&&xt(g._vnode,null,null,!0):S(g._vnode||null,p,g,null,null,null,v),W||(W=!0,Jd(),eg(),W=!1),g._vnode=p},Q={p:S,um:xt,m:un,r:hr,mt:ri,mc:Ze,pc:be,pbc:Ct,n:b,o:t};let Ae,Ve;return e&&([Ae,Ve]=e(Q)),{render:$,hydrate:Ae,createApp:dE($,Ae)}}function cl({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ps({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function IE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function yg(t,e,n=!1){const s=t.children,r=e.children;if(se(s)&&se(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Qn(r[i]),a.el=o.el),n||yg(o,a)),a.type===sc&&(a.el=o.el)}}function wE(t){const e=t.slice(),n=[0];let s,r,i,o,a;const c=t.length;for(s=0;s<c;s++){const l=t[s];if(l!==0){if(r=n[n.length-1],t[r]<l){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<l?i=a+1:o=a;l<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function vg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:vg(e)}const EE=t=>t.__isTeleport,fe=Symbol.for("v-fgt"),sc=Symbol.for("v-txt"),ds=Symbol.for("v-cmt"),sa=Symbol.for("v-stc"),Ri=[];let tn=null;function _(t=!1){Ri.push(tn=t?null:[])}function TE(){Ri.pop(),tn=Ri[Ri.length-1]||null}let Bi=1;function uf(t){Bi+=t}function Ig(t){return t.dynamicChildren=Bi>0?tn||Er:null,TE(),Bi>0&&tn&&tn.push(t),t}function y(t,e,n,s,r,i){return Ig(u(t,e,n,s,r,i,!0))}function je(t,e,n,s,r){return Ig(D(t,e,n,s,r,!0))}function va(t){return t?t.__v_isVNode===!0:!1}function oi(t,e){return t.type===e.type&&t.key===e.key}const rc="__vInternal",wg=({key:t})=>t??null,ra=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?nt(t)||Ft(t)||de(t)?{i:at,r:t,k:e,f:!!n}:t:null);function u(t,e=null,n=null,s=0,r=null,i=t===fe?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&wg(e),ref:e&&ra(e),scopeId:tc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:at};return a?(Yu(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=nt(n)?8:16),Bi>0&&!o&&tn&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&tn.push(c),c}const D=bE;function bE(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===Fw)&&(t=ds),va(t)){const a=Mr(t,e,!0);return n&&Yu(a,n),Bi>0&&!i&&tn&&(a.shapeFlag&6?tn[tn.indexOf(t)]=a:tn.push(a)),a.patchFlag|=-2,a}if(xE(t)&&(t=t.__vccOpts),e){e=AE(e);let{class:a,style:c}=e;a&&!nt(a)&&(e.class=Ya(a)),Ne(c)&&(Wm(c)&&!se(c)&&(c=gt({},c)),e.style=Lu(c))}const o=nt(t)?1:Bw(t)?128:EE(t)?64:Ne(t)?4:de(t)?2:0;return u(t,e,n,s,r,o,i,!0)}function AE(t){return t?Wm(t)||rc in t?gt({},t):t:null}function Mr(t,e,n=!1){const{props:s,ref:r,patchFlag:i,children:o}=t,a=e?RE(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&wg(a),ref:e&&e.ref?n&&r?se(r)?r.concat(ra(e)):[r,ra(e)]:ra(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==fe?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Mr(t.ssContent),ssFallback:t.ssFallback&&Mr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function et(t=" ",e=0){return D(sc,null,t,e)}function ic(t,e){const n=D(sa,null,t);return n.staticCount=e,n}function ne(t="",e=!1){return e?(_(),je(ds,null,t)):D(ds,null,t)}function fn(t){return t==null||typeof t=="boolean"?D(ds):se(t)?D(fe,null,t.slice()):typeof t=="object"?Qn(t):D(sc,null,String(t))}function Qn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Mr(t)}function Yu(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(se(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Yu(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(rc in e)?e._ctx=at:r===3&&at&&(at.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else de(e)?(e={default:e,_ctx:at},n=32):(e=String(e),s&64?(n=16,e=[et(e)]):n=8);t.children=e,t.shapeFlag|=n}function RE(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Ya([e.class,s.class]));else if(r==="style")e.style=Lu([e.style,s.style]);else if(Ha(r)){const i=e[r],o=s[r];o&&i!==o&&!(se(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function dn(t,e,n,s=null){nn(t,e,7,[n,s])}const SE=dg();let PE=0;function DE(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||SE,i={uid:PE++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new sw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pg(s,r),emitsOptions:ng(s,r),emit:null,emitted:null,propsDefaults:Oe,inheritAttrs:s.inheritAttrs,ctx:Oe,data:Oe,props:Oe,attrs:Oe,slots:Oe,refs:Oe,setupState:Oe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Ow.bind(null,i),t.ce&&t.ce(i),i}let Tt=null,Ia,zl;{const t=Cm(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Ia=e("__VUE_INSTANCE_SETTERS__",n=>Tt=n),zl=e("__VUE_SSR_SETTERS__",n=>oc=n)}const lo=t=>{const e=Tt;return Ia(t),t.scope.on(),()=>{t.scope.off(),Ia(e)}},hf=()=>{Tt&&Tt.scope.off(),Ia(null)};function Eg(t){return t.vnode.shapeFlag&4}let oc=!1;function CE(t,e=!1){e&&zl(e);const{props:n,children:s}=t.vnode,r=Eg(t);fE(t,n,r,e),gE(t,s);const i=r?kE(t,e):void 0;return e&&zl(!1),i}function kE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=zm(new Proxy(t.ctx,iE));const{setup:s}=n;if(s){const r=t.setupContext=s.length>1?ME(t):null,i=lo(t);tr();const o=is(s,t,0,[t.props,r]);if(nr(),i(),Sm(o)){if(o.then(hf,hf),e)return o.then(a=>{df(t,a,e)}).catch(a=>{Za(a,t,0)});t.asyncDep=o}else df(t,o,e)}else Tg(t,e)}function df(t,e,n){de(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ne(e)&&(t.setupState=Xm(e)),Tg(t,n)}let ff;function Tg(t,e,n){const s=t.type;if(!t.render){if(!e&&ff&&!s.render){const r=s.template||zu(t).template;if(r){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=s,l=gt(gt({isCustomElement:i,delimiters:a},o),c);s.render=ff(r,l)}}t.render=s.render||Yt}{const r=lo(t);tr();try{oE(t)}finally{nr(),r()}}}function NE(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Ut(t,"get","$attrs"),e[n]}}))}function ME(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return NE(t)},slots:t.slots,emit:t.emit,expose:e}}function ac(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Xm(zm(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in bi)return bi[n](t)},has(e,n){return n in e||n in bi}}))}function OE(t,e=!0){return de(t)?t.displayName||t.name:t.name||e&&t.__name}function xE(t){return de(t)&&"__vccOpts"in t}const en=(t,e)=>Aw(t,e,oc);function bg(t,e,n){const s=arguments.length;return s===2?Ne(e)&&!se(e)?va(e)?D(t,null,[e]):D(t,e):D(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&va(n)&&(n=[n]),D(t,e,n))}const LE="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const VE="http://www.w3.org/2000/svg",UE="http://www.w3.org/1998/Math/MathML",Xn=typeof document<"u"?document:null,pf=Xn&&Xn.createElement("template"),FE={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Xn.createElementNS(VE,t):e==="mathml"?Xn.createElementNS(UE,t):Xn.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Xn.createTextNode(t),createComment:t=>Xn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Xn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{pf.innerHTML=s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t;const a=pf.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},$E=Symbol("_vtc");function BE(t,e,n){const s=t[$E];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const wa=Symbol("_vod"),Ag=Symbol("_vsh"),GE={beforeMount(t,{value:e},{transition:n}){t[wa]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):ai(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),ai(t,!0),s.enter(t)):s.leave(t,()=>{ai(t,!1)}):ai(t,e))},beforeUnmount(t,{value:e}){ai(t,e)}};function ai(t,e){t.style.display=e?t[wa]:"none",t[Ag]=!e}const qE=Symbol(""),jE=/(^|;)\s*display\s*:/;function HE(t,e,n){const s=t.style,r=nt(n);let i=!1;if(n&&!r){if(e)if(nt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ia(s,a,"")}else for(const o in e)n[o]==null&&ia(s,o,"");for(const o in n)o==="display"&&(i=!0),ia(s,o,n[o])}else if(r){if(e!==n){const o=s[qE];o&&(n+=";"+o),s.cssText=n,i=jE.test(n)}}else e&&t.removeAttribute("style");wa in t&&(t[wa]=i?s.display:"",t[Ag]&&(s.display="none"))}const mf=/\s*!important$/;function ia(t,e,n){if(se(n))n.forEach(s=>ia(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=WE(t,e);mf.test(n)?t.setProperty(zr(s),n.replace(mf,""),"important"):t[s]=n}}const gf=["Webkit","Moz","ms"],ll={};function WE(t,e){const n=ll[e];if(n)return n;let s=Pn(e);if(s!=="filter"&&s in t)return ll[e]=s;s=Ka(s);for(let r=0;r<gf.length;r++){const i=gf[r]+s;if(i in t)return ll[e]=i}return e}const _f="http://www.w3.org/1999/xlink";function zE(t,e,n,s,r){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(_f,e.slice(6,e.length)):t.setAttributeNS(_f,e,n);else{const i=ew(e);n==null||i&&!km(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function KE(t,e,n,s,r,i,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,r,i),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const l=a==="OPTION"?t.getAttribute("value")||"":t.value,h=n??"";(l!==h||!("_value"in t))&&(t.value=h),n==null&&t.removeAttribute(e),t._value=n;return}let c=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=km(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{t[e]=n}catch{}c&&t.removeAttribute(e)}function Ns(t,e,n,s){t.addEventListener(e,n,s)}function YE(t,e,n,s){t.removeEventListener(e,n,s)}const yf=Symbol("_vei");function QE(t,e,n,s,r=null){const i=t[yf]||(t[yf]={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=XE(e);if(s){const l=i[e]=eT(s,r);Ns(t,a,l,c)}else o&&(YE(t,a,o,c),i[e]=void 0)}}const vf=/(?:Once|Passive|Capture)$/;function XE(t){let e;if(vf.test(t)){e={};let s;for(;s=t.match(vf);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):zr(t.slice(2)),e]}let ul=0;const JE=Promise.resolve(),ZE=()=>ul||(JE.then(()=>ul=0),ul=Date.now());function eT(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;nn(tT(s,n.value),e,5,[s])};return n.value=t,n.attached=ZE(),n}function tT(t,e){if(se(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const If=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,nT=(t,e,n,s,r,i,o,a,c)=>{const l=r==="svg";e==="class"?BE(t,s,l):e==="style"?HE(t,n,s):Ha(e)?Mu(e)||QE(t,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):sT(t,e,s,l))?KE(t,e,s,i,o,a,c):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),zE(t,e,s,l))};function sT(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&If(e)&&de(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return If(e)&&nt(n)?!1:e in t}const Ea=t=>{const e=t.props["onUpdate:modelValue"]||!1;return se(e)?n=>Zo(e,n):e};function rT(t){t.target.composing=!0}function wf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Rr=Symbol("_assign"),Fe={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[Rr]=Ea(r);const i=s||r.props&&r.props.type==="number";Ns(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Vi(a)),t[Rr](a)}),n&&Ns(t,"change",()=>{t.value=t.value.trim()}),e||(Ns(t,"compositionstart",rT),Ns(t,"compositionend",wf),Ns(t,"change",wf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:s,number:r}},i){if(t[Rr]=Ea(i),t.composing)return;const o=r||t.type==="number"?Vi(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||s&&t.value.trim()===a)||(t.value=a))}},Qu={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=Wa(e);Ns(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Vi(Ta(o)):Ta(o));t[Rr](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,Hu(()=>{t._assigning=!1})}),t[Rr]=Ea(s)},mounted(t,{value:e,modifiers:{number:n}}){Ef(t,e,n)},beforeUpdate(t,e,n){t[Rr]=Ea(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||Ef(t,e,n)}};function Ef(t,e,n){const s=t.multiple,r=se(e);if(!(s&&!r&&!Wa(e))){for(let i=0,o=t.options.length;i<o;i++){const a=t.options[i],c=Ta(a);if(s)if(r){const l=typeof c;l==="string"||l==="number"?a.selected=e.includes(n?Vi(c):c):a.selected=nw(e,c)>-1}else a.selected=e.has(c);else if(Qa(Ta(a),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ta(t){return"_value"in t?t._value:t.value}const iT=["ctrl","shift","alt","meta"],oT={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>iT.some(n=>t[`${n}Key`]&&!e.includes(n))},Hs=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=oT[e[o]];if(a&&a(r,e))return}return t(r,...i)})},aT=gt({patchProp:nT},FE);let Tf;function cT(){return Tf||(Tf=yE(aT))}const lT=(...t)=>{const e=cT().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=hT(s);if(!r)return;const i=e._component;!de(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,uT(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function uT(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function hT(t){return nt(t)?document.querySelector(t):t}const H=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},dT={name:"App"};function fT(t,e,n,s,r,i){const o=ee("router-view");return _(),je(o)}const pT=H(dT,[["render",fT]]);/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const _r=typeof document<"u";function mT(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Re=Object.assign;function hl(t,e){const n={};for(const s in e){const r=e[s];n[s]=on(r)?r.map(t):t(r)}return n}const Si=()=>{},on=Array.isArray,Rg=/#/g,gT=/&/g,_T=/\//g,yT=/=/g,vT=/\?/g,Sg=/\+/g,IT=/%5B/g,wT=/%5D/g,Pg=/%5E/g,ET=/%60/g,Dg=/%7B/g,TT=/%7C/g,Cg=/%7D/g,bT=/%20/g;function Xu(t){return encodeURI(""+t).replace(TT,"|").replace(IT,"[").replace(wT,"]")}function AT(t){return Xu(t).replace(Dg,"{").replace(Cg,"}").replace(Pg,"^")}function Kl(t){return Xu(t).replace(Sg,"%2B").replace(bT,"+").replace(Rg,"%23").replace(gT,"%26").replace(ET,"`").replace(Dg,"{").replace(Cg,"}").replace(Pg,"^")}function RT(t){return Kl(t).replace(yT,"%3D")}function ST(t){return Xu(t).replace(Rg,"%23").replace(vT,"%3F")}function PT(t){return t==null?"":ST(t).replace(_T,"%2F")}function Gi(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const DT=/\/$/,CT=t=>t.replace(DT,"");function dl(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=OT(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:Gi(o)}}function kT(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function bf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function NT(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Or(e.matched[s],n.matched[r])&&kg(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Or(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function kg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!MT(t[n],e[n]))return!1;return!0}function MT(t,e){return on(t)?Af(t,e):on(e)?Af(e,t):t===e}function Af(t,e){return on(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function OT(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}var qi;(function(t){t.pop="pop",t.push="push"})(qi||(qi={}));var Pi;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Pi||(Pi={}));function xT(t){if(!t)if(_r){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),CT(t)}const LT=/^[^#]+#/;function VT(t,e){return t.replace(LT,"#")+e}function UT(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const cc=()=>({left:window.scrollX,top:window.scrollY});function FT(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=UT(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Rf(t,e){return(history.state?history.state.position-e:-1)+t}const Yl=new Map;function $T(t,e){Yl.set(t,e)}function BT(t){const e=Yl.get(t);return Yl.delete(t),e}let GT=()=>location.protocol+"//"+location.host;function Ng(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,c=r.slice(a);return c[0]!=="/"&&(c="/"+c),bf(c,"")}return bf(n,t)+s+r}function qT(t,e,n,s){let r=[],i=[],o=null;const a=({state:f})=>{const m=Ng(t,location),I=n.value,S=e.value;let T=0;if(f){if(n.value=m,e.value=f,o&&o===I){o=null;return}T=S?f.position-S.position:0}else s(m);r.forEach(k=>{k(n.value,I,{delta:T,type:qi.pop,direction:T?T>0?Pi.forward:Pi.back:Pi.unknown})})};function c(){o=n.value}function l(f){r.push(f);const m=()=>{const I=r.indexOf(f);I>-1&&r.splice(I,1)};return i.push(m),m}function h(){const{history:f}=window;f.state&&f.replaceState(Re({},f.state,{scroll:cc()}),"")}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:l,destroy:d}}function Sf(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?cc():null}}function jT(t){const{history:e,location:n}=window,s={value:Ng(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,h){const d=t.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+c:GT()+t+c;try{e[h?"replaceState":"pushState"](l,"",f),r.value=l}catch(m){console.error(m),n[h?"replace":"assign"](f)}}function o(c,l){const h=Re({},e.state,Sf(r.value.back,c,r.value.forward,!0),l,{position:r.value.position});i(c,h,!0),s.value=c}function a(c,l){const h=Re({},r.value,e.state,{forward:c,scroll:cc()});i(h.current,h,!0);const d=Re({},Sf(s.value,c,null),{position:h.position+1},l);i(c,d,!1),s.value=c}return{location:s,state:r,push:a,replace:o}}function HT(t){t=xT(t);const e=jT(t),n=qT(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Re({location:"",base:t,go:s,createHref:VT.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function WT(t){return typeof t=="string"||t&&typeof t=="object"}function Mg(t){return typeof t=="string"||typeof t=="symbol"}const Wn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Og=Symbol("");var Pf;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Pf||(Pf={}));function xr(t,e){return Re(new Error,{type:t,[Og]:!0},e)}function Mn(t,e){return t instanceof Error&&Og in t&&(e==null||!!(t.type&e))}const Df="[^/]+?",zT={sensitive:!1,strict:!1,start:!0,end:!0},KT=/[.+*?^${}()[\]/\\]/g;function YT(t,e){const n=Re({},zT,e),s=[];let r=n.start?"^":"";const i=[];for(const l of t){const h=l.length?[]:[90];n.strict&&!l.length&&(r+="/");for(let d=0;d<l.length;d++){const f=l[d];let m=40+(n.sensitive?.25:0);if(f.type===0)d||(r+="/"),r+=f.value.replace(KT,"\\$&"),m+=40;else if(f.type===1){const{value:I,repeatable:S,optional:T,regexp:k}=f;i.push({name:I,repeatable:S,optional:T});const U=k||Df;if(U!==Df){m+=10;try{new RegExp(`(${U})`)}catch(Y){throw new Error(`Invalid custom RegExp for param "${I}" (${U}): `+Y.message)}}let q=S?`((?:${U})(?:/(?:${U}))*)`:`(${U})`;d||(q=T&&l.length<2?`(?:/${q})`:"/"+q),T&&(q+="?"),r+=q,m+=20,T&&(m+=-8),S&&(m+=-20),U===".*"&&(m+=-50)}h.push(m)}s.push(h)}if(n.strict&&n.end){const l=s.length-1;s[l][s[l].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(l){const h=l.match(o),d={};if(!h)return null;for(let f=1;f<h.length;f++){const m=h[f]||"",I=i[f-1];d[I.name]=m&&I.repeatable?m.split("/"):m}return d}function c(l){let h="",d=!1;for(const f of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const m of f)if(m.type===0)h+=m.value;else if(m.type===1){const{value:I,repeatable:S,optional:T}=m,k=I in l?l[I]:"";if(on(k)&&!S)throw new Error(`Provided param "${I}" is an array but it is not repeatable (* or + modifiers)`);const U=on(k)?k.join("/"):k;if(!U)if(T)f.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${I}"`);h+=U}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:c}}function QT(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function XT(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=QT(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Cf(s))return 1;if(Cf(r))return-1}return r.length-s.length}function Cf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const JT={type:0,value:""},ZT=/[a-zA-Z0-9_]/;function eb(t){if(!t)return[[]];if(t==="/")return[[JT]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${l}": ${m}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,c,l="",h="";function d(){l&&(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function f(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(l&&d(),o()):c===":"?(d(),n=1):f();break;case 4:f(),n=s;break;case 1:c==="("?n=2:ZT.test(c)?f():(d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=3:h+=c;break;case 3:d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),d(),o(),r}function tb(t,e,n){const s=YT(eb(t.path),n),r=Re(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function nb(t,e){const n=[],s=new Map;e=Mf({strict:!1,end:!0,sensitive:!1},e);function r(h){return s.get(h)}function i(h,d,f){const m=!f,I=sb(h);I.aliasOf=f&&f.record;const S=Mf(e,h),T=[I];if("alias"in h){const q=typeof h.alias=="string"?[h.alias]:h.alias;for(const Y of q)T.push(Re({},I,{components:f?f.record.components:I.components,path:Y,aliasOf:f?f.record:I}))}let k,U;for(const q of T){const{path:Y}=q;if(d&&Y[0]!=="/"){const Ie=d.record.path,X=Ie[Ie.length-1]==="/"?"":"/";q.path=d.record.path+(Y&&X+Y)}if(k=tb(q,d,S),f?f.alias.push(k):(U=U||k,U!==k&&U.alias.push(k),m&&h.name&&!Nf(k)&&o(h.name)),I.children){const Ie=I.children;for(let X=0;X<Ie.length;X++)i(Ie[X],k,f&&f.children[X])}f=f||k,(k.record.components&&Object.keys(k.record.components).length||k.record.name||k.record.redirect)&&c(k)}return U?()=>{o(U)}:Si}function o(h){if(Mg(h)){const d=s.get(h);d&&(s.delete(h),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(h);d>-1&&(n.splice(d,1),h.record.name&&s.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return n}function c(h){let d=0;for(;d<n.length&&XT(h,n[d])>=0&&(h.record.path!==n[d].record.path||!xg(h,n[d]));)d++;n.splice(d,0,h),h.record.name&&!Nf(h)&&s.set(h.record.name,h)}function l(h,d){let f,m={},I,S;if("name"in h&&h.name){if(f=s.get(h.name),!f)throw xr(1,{location:h});S=f.record.name,m=Re(kf(d.params,f.keys.filter(U=>!U.optional).concat(f.parent?f.parent.keys.filter(U=>U.optional):[]).map(U=>U.name)),h.params&&kf(h.params,f.keys.map(U=>U.name))),I=f.stringify(m)}else if(h.path!=null)I=h.path,f=n.find(U=>U.re.test(I)),f&&(m=f.parse(I),S=f.record.name);else{if(f=d.name?s.get(d.name):n.find(U=>U.re.test(d.path)),!f)throw xr(1,{location:h,currentLocation:d});S=f.record.name,m=Re({},d.params,h.params),I=f.stringify(m)}const T=[];let k=f;for(;k;)T.unshift(k.record),k=k.parent;return{name:S,path:I,params:m,matched:T,meta:ib(T)}}return t.forEach(h=>i(h)),{addRoute:i,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function kf(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function sb(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:rb(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function rb(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Nf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function ib(t){return t.reduce((e,n)=>Re(e,n.meta),{})}function Mf(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function xg(t,e){return e.children.some(n=>n===t||xg(t,n))}function ob(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(Sg," "),o=i.indexOf("="),a=Gi(o<0?i:i.slice(0,o)),c=o<0?null:Gi(i.slice(o+1));if(a in e){let l=e[a];on(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function Of(t){let e="";for(let n in t){const s=t[n];if(n=RT(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(on(s)?s.map(i=>i&&Kl(i)):[s&&Kl(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function ab(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=on(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const cb=Symbol(""),xf=Symbol(""),lc=Symbol(""),Lg=Symbol(""),Ql=Symbol("");function ci(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Jn(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,c)=>{const l=f=>{f===!1?c(xr(4,{from:n,to:e})):f instanceof Error?c(f):WT(f)?c(xr(2,{from:e,to:f})):(o&&s.enterCallbacks[r]===o&&typeof f=="function"&&o.push(f),a())},h=i(()=>t.call(s&&s.instances[r],e,n,l));let d=Promise.resolve(h);t.length<3&&(d=d.then(l)),d.catch(f=>c(f))})}function fl(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(lb(c)){const h=(c.__vccOpts||c)[e];h&&i.push(Jn(h,n,s,o,a,r))}else{let l=c();i.push(()=>l.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const d=mT(h)?h.default:h;o.components[a]=d;const m=(d.__vccOpts||d)[e];return m&&Jn(m,n,s,o,a,r)()}))}}return i}function lb(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Lf(t){const e=wn(lc),n=wn(Lg),s=en(()=>e.resolve(qt(t.to))),r=en(()=>{const{matched:c}=s.value,{length:l}=c,h=c[l-1],d=n.matched;if(!h||!d.length)return-1;const f=d.findIndex(Or.bind(null,h));if(f>-1)return f;const m=Vf(c[l-2]);return l>1&&Vf(h)===m&&d[d.length-1].path!==m?d.findIndex(Or.bind(null,c[l-2])):f}),i=en(()=>r.value>-1&&fb(n.params,s.value.params)),o=en(()=>r.value>-1&&r.value===n.matched.length-1&&kg(n.params,s.value.params));function a(c={}){return db(c)?e[qt(t.replace)?"replace":"push"](qt(t.to)).catch(Si):Promise.resolve()}return{route:s,href:en(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}const ub=og({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Lf,setup(t,{slots:e}){const n=Ja(Lf(t)),{options:s}=wn(lc),r=en(()=>({[Uf(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Uf(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:bg("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),hb=ub;function db(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function fb(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!on(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Vf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Uf=(t,e,n)=>t??e??n,pb=og({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=wn(Ql),r=en(()=>t.route||s.value),i=wn(xf,0),o=en(()=>{let l=qt(i);const{matched:h}=r.value;let d;for(;(d=h[l])&&!d.components;)l++;return l}),a=en(()=>r.value.matched[o.value]);na(xf,en(()=>o.value+1)),na(cb,a),na(Ql,r);const c=Kn();return ta(()=>[c.value,a.value,t.name],([l,h,d],[f,m,I])=>{h&&(h.instances[d]=l,m&&m!==h&&l&&l===f&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),l&&h&&(!m||!Or(h,m)||!f)&&(h.enterCallbacks[d]||[]).forEach(S=>S(l))},{flush:"post"}),()=>{const l=r.value,h=t.name,d=a.value,f=d&&d.components[h];if(!f)return Ff(n.default,{Component:f,route:l});const m=d.props[h],I=m?m===!0?l.params:typeof m=="function"?m(l):m:null,T=bg(f,Re({},I,e,{onVnodeUnmounted:k=>{k.component.isUnmounted&&(d.instances[h]=null)},ref:c}));return Ff(n.default,{Component:T,route:l})||T}}});function Ff(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const mb=pb;function gb(t){const e=nb(t.routes,t),n=t.parseQuery||ob,s=t.stringifyQuery||Of,r=t.history,i=ci(),o=ci(),a=ci(),c=Rw(Wn);let l=Wn;_r&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=hl.bind(null,b=>""+b),d=hl.bind(null,PT),f=hl.bind(null,Gi);function m(b,W){let $,Q;return Mg(b)?($=e.getRecordMatcher(b),Q=W):Q=b,e.addRoute(Q,$)}function I(b){const W=e.getRecordMatcher(b);W&&e.removeRoute(W)}function S(){return e.getRoutes().map(b=>b.record)}function T(b){return!!e.getRecordMatcher(b)}function k(b,W){if(W=Re({},W||c.value),typeof b=="string"){const g=dl(n,b,W.path),v=e.resolve({path:g.path},W),A=r.createHref(g.fullPath);return Re(g,v,{params:f(v.params),hash:Gi(g.hash),redirectedFrom:void 0,href:A})}let $;if(b.path!=null)$=Re({},b,{path:dl(n,b.path,W.path).path});else{const g=Re({},b.params);for(const v in g)g[v]==null&&delete g[v];$=Re({},b,{params:d(g)}),W.params=d(W.params)}const Q=e.resolve($,W),Ae=b.hash||"";Q.params=h(f(Q.params));const Ve=kT(s,Re({},b,{hash:AT(Ae),path:Q.path})),p=r.createHref(Ve);return Re({fullPath:Ve,hash:Ae,query:s===Of?ab(b.query):b.query||{}},Q,{redirectedFrom:void 0,href:p})}function U(b){return typeof b=="string"?dl(n,b,c.value.path):Re({},b)}function q(b,W){if(l!==b)return xr(8,{from:W,to:b})}function Y(b){return Me(b)}function Ie(b){return Y(Re(U(b),{replace:!0}))}function X(b){const W=b.matched[b.matched.length-1];if(W&&W.redirect){const{redirect:$}=W;let Q=typeof $=="function"?$(b):$;return typeof Q=="string"&&(Q=Q.includes("?")||Q.includes("#")?Q=U(Q):{path:Q},Q.params={}),Re({query:b.query,hash:b.hash,params:Q.path!=null?{}:b.params},Q)}}function Me(b,W){const $=l=k(b),Q=c.value,Ae=b.state,Ve=b.force,p=b.replace===!0,g=X($);if(g)return Me(Re(U(g),{state:typeof g=="object"?Re({},Ae,g.state):Ae,force:Ve,replace:p}),W||$);const v=$;v.redirectedFrom=W;let A;return!Ve&&NT(s,Q,$)&&(A=xr(16,{to:v,from:Q}),un(Q,Q,!0,!1)),(A?Promise.resolve(A):Ct(v,Q)).catch(w=>Mn(w)?Mn(w,2)?w:jn(w):be(w,v,Q)).then(w=>{if(w){if(Mn(w,2))return Me(Re({replace:p},U(w.to),{state:typeof w.to=="object"?Re({},Ae,w.to.state):Ae,force:Ve}),W||v)}else w=Rs(v,Q,!0,p,Ae);return qn(v,Q,w),w})}function Ze(b,W){const $=q(b,W);return $?Promise.reject($):Promise.resolve()}function Bt(b){const W=dr.values().next().value;return W&&typeof W.runWithContext=="function"?W.runWithContext(b):b()}function Ct(b,W){let $;const[Q,Ae,Ve]=_b(b,W);$=fl(Q.reverse(),"beforeRouteLeave",b,W);for(const g of Q)g.leaveGuards.forEach(v=>{$.push(Jn(v,b,W))});const p=Ze.bind(null,b,W);return $.push(p),yt($).then(()=>{$=[];for(const g of i.list())$.push(Jn(g,b,W));return $.push(p),yt($)}).then(()=>{$=fl(Ae,"beforeRouteUpdate",b,W);for(const g of Ae)g.updateGuards.forEach(v=>{$.push(Jn(v,b,W))});return $.push(p),yt($)}).then(()=>{$=[];for(const g of Ve)if(g.beforeEnter)if(on(g.beforeEnter))for(const v of g.beforeEnter)$.push(Jn(v,b,W));else $.push(Jn(g.beforeEnter,b,W));return $.push(p),yt($)}).then(()=>(b.matched.forEach(g=>g.enterCallbacks={}),$=fl(Ve,"beforeRouteEnter",b,W,Bt),$.push(p),yt($))).then(()=>{$=[];for(const g of o.list())$.push(Jn(g,b,W));return $.push(p),yt($)}).catch(g=>Mn(g,8)?g:Promise.reject(g))}function qn(b,W,$){a.list().forEach(Q=>Bt(()=>Q(b,W,$)))}function Rs(b,W,$,Q,Ae){const Ve=q(b,W);if(Ve)return Ve;const p=W===Wn,g=_r?history.state:{};$&&(Q||p?r.replace(b.fullPath,Re({scroll:p&&g&&g.scroll},Ae)):r.push(b.fullPath,Ae)),c.value=b,un(b,W,$,p),jn()}let ln;function ri(){ln||(ln=r.listen((b,W,$)=>{if(!xo.listening)return;const Q=k(b),Ae=X(Q);if(Ae){Me(Re(Ae,{replace:!0}),Q).catch(Si);return}l=Q;const Ve=c.value;_r&&$T(Rf(Ve.fullPath,$.delta),cc()),Ct(Q,Ve).catch(p=>Mn(p,12)?p:Mn(p,2)?(Me(p.to,Q).then(g=>{Mn(g,20)&&!$.delta&&$.type===qi.pop&&r.go(-1,!1)}).catch(Si),Promise.reject()):($.delta&&r.go(-$.delta,!1),be(p,Q,Ve))).then(p=>{p=p||Rs(Q,Ve,!1),p&&($.delta&&!Mn(p,8)?r.go(-$.delta,!1):$.type===qi.pop&&Mn(p,20)&&r.go(-1,!1)),qn(Q,Ve,p)}).catch(Si)}))}let ur=ci(),rt=ci(),Pe;function be(b,W,$){jn(b);const Q=rt.list();return Q.length?Q.forEach(Ae=>Ae(b,W,$)):console.error(b),Promise.reject(b)}function Nn(){return Pe&&c.value!==Wn?Promise.resolve():new Promise((b,W)=>{ur.add([b,W])})}function jn(b){return Pe||(Pe=!b,ri(),ur.list().forEach(([W,$])=>b?$(b):W()),ur.reset()),b}function un(b,W,$,Q){const{scrollBehavior:Ae}=t;if(!_r||!Ae)return Promise.resolve();const Ve=!$&&BT(Rf(b.fullPath,0))||(Q||!$)&&history.state&&history.state.scroll||null;return Hu().then(()=>Ae(b,W,Ve)).then(p=>p&&FT(p)).catch(p=>be(p,b,W))}const xt=b=>r.go(b);let hr;const dr=new Set,xo={currentRoute:c,listening:!0,addRoute:m,removeRoute:I,hasRoute:T,getRoutes:S,resolve:k,options:t,push:Y,replace:Ie,go:xt,back:()=>xt(-1),forward:()=>xt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:rt.add,isReady:Nn,install(b){const W=this;b.component("RouterLink",hb),b.component("RouterView",mb),b.config.globalProperties.$router=W,Object.defineProperty(b.config.globalProperties,"$route",{enumerable:!0,get:()=>qt(c)}),_r&&!hr&&c.value===Wn&&(hr=!0,Y(r.location).catch(Ae=>{}));const $={};for(const Ae in Wn)Object.defineProperty($,Ae,{get:()=>c.value[Ae],enumerable:!0});b.provide(lc,W),b.provide(Lg,jm($)),b.provide(Ql,c);const Q=b.unmount;dr.add(b),b.unmount=function(){dr.delete(b),dr.size<1&&(l=Wn,ln&&ln(),ln=null,c.value=Wn,hr=!1,Pe=!1),Q()}}};function yt(b){return b.reduce((W,$)=>W.then(()=>Bt($)),Promise.resolve())}return xo}function _b(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(l=>Or(l,a))?s.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>Or(l,c))||r.push(c))}return[n,s,r]}function yb(){return wn(lc)}var $f={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},vb=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ug={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,l=c?t[r+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(f=64)),s.push(n[h],n[d],n[f],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Vg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const l=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||l==null||d==null)throw new Ib;const f=i<<2|a>>4;if(s.push(f),l!==64){const m=a<<4&240|l>>2;if(s.push(m),d!==64){const I=l<<6&192|d;s.push(I)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ib extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wb=function(t){const e=Vg(t);return Ug.encodeByteArray(e,!0)},ba=function(t){return wb(t).replace(/\./g,"")},Fg=function(t){try{return Ug.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=()=>Eb().__FIREBASE_DEFAULTS__,bb=()=>{if(typeof process>"u"||typeof $f>"u")return;const t=$f.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ab=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Fg(t[1]);return e&&JSON.parse(e)},uc=()=>{try{return Tb()||bb()||Ab()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$g=t=>{var e,n;return(n=(e=uc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Bg=t=>{const e=$g(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Gg=()=>{var t;return(t=uc())===null||t===void 0?void 0:t.config},qg=t=>{var e;return(e=uc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ba(JSON.stringify(n)),ba(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function Pb(){var t;const e=(t=uc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Db(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Cb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kb(){const t=Xe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Nb(){return!Pb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hg(){try{return typeof indexedDB=="object"}catch{return!1}}function Mb(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="FirebaseError";class kn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Ob,Object.setPrototypeOf(this,kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uo.prototype.create)}}class uo{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?xb(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new kn(r,a,s)}}function xb(t,e){return t.replace(Lb,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Lb=/\{\$([^}]+)}/g;function Vb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lr(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Bf(i)&&Bf(o)){if(!Lr(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Bf(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function mi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function gi(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Ub(t,e){const n=new Fb(t,e);return n.subscribe.bind(n)}class Fb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");$b(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=pl),r.error===void 0&&(r.error=pl),r.complete===void 0&&(r.complete=pl);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $b(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pl(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t){return t&&t._delegate?t._delegate:t}class fs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Rb;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qb(e))try{this.getOrInitializeService({instanceIdentifier:Cs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cs){return this.instances.has(e)}getOptions(e=Cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Gb(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Cs){return this.component?this.component.multipleInstances?e:Cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gb(t){return t===Cs?void 0:t}function qb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Bb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const Hb={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},Wb=ge.INFO,zb={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},Kb=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=zb[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ju{constructor(e){this.name=e,this._logLevel=Wb,this._logHandler=Kb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const Yb=(t,e)=>e.some(n=>t instanceof n);let Gf,qf;function Qb(){return Gf||(Gf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xb(){return qf||(qf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wg=new WeakMap,Xl=new WeakMap,zg=new WeakMap,ml=new WeakMap,Zu=new WeakMap;function Jb(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(os(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Wg.set(n,t)}).catch(()=>{}),Zu.set(e,t),e}function Zb(t){if(Xl.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Xl.set(t,e)}let Jl={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return os(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eA(t){Jl=t(Jl)}function tA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(gl(this),e,...n);return zg.set(s,e.sort?e.sort():[e]),os(s)}:Xb().includes(t)?function(...e){return t.apply(gl(this),e),os(Wg.get(this))}:function(...e){return os(t.apply(gl(this),e))}}function nA(t){return typeof t=="function"?tA(t):(t instanceof IDBTransaction&&Zb(t),Yb(t,Qb())?new Proxy(t,Jl):t)}function os(t){if(t instanceof IDBRequest)return Jb(t);if(ml.has(t))return ml.get(t);const e=nA(t);return e!==t&&(ml.set(t,e),Zu.set(e,t)),e}const gl=t=>Zu.get(t);function sA(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=os(o);return s&&o.addEventListener("upgradeneeded",c=>{s(os(o.result),c.oldVersion,c.newVersion,os(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const rA=["get","getKey","getAll","getAllKeys","count"],iA=["put","add","delete","clear"],_l=new Map;function jf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_l.get(e))return _l.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=iA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||rA.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,r?"readwrite":"readonly");let l=c.store;return s&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),r&&c.done]))[0]};return _l.set(e,i),i}eA(t=>({...t,get:(e,n,s)=>jf(e,n)||t.get(e,n,s),has:(e,n)=>!!jf(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function aA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zl="@firebase/app",Hf="0.9.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new Ju("@firebase/app"),cA="@firebase/app-compat",lA="@firebase/analytics-compat",uA="@firebase/analytics",hA="@firebase/app-check-compat",dA="@firebase/app-check",fA="@firebase/auth",pA="@firebase/auth-compat",mA="@firebase/database",gA="@firebase/database-compat",_A="@firebase/functions",yA="@firebase/functions-compat",vA="@firebase/installations",IA="@firebase/installations-compat",wA="@firebase/messaging",EA="@firebase/messaging-compat",TA="@firebase/performance",bA="@firebase/performance-compat",AA="@firebase/remote-config",RA="@firebase/remote-config-compat",SA="@firebase/storage",PA="@firebase/storage-compat",DA="@firebase/firestore",CA="@firebase/firestore-compat",kA="firebase",NA="10.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu="[DEFAULT]",MA={[Zl]:"fire-core",[cA]:"fire-core-compat",[uA]:"fire-analytics",[lA]:"fire-analytics-compat",[dA]:"fire-app-check",[hA]:"fire-app-check-compat",[fA]:"fire-auth",[pA]:"fire-auth-compat",[mA]:"fire-rtdb",[gA]:"fire-rtdb-compat",[_A]:"fire-fn",[yA]:"fire-fn-compat",[vA]:"fire-iid",[IA]:"fire-iid-compat",[wA]:"fire-fcm",[EA]:"fire-fcm-compat",[TA]:"fire-perf",[bA]:"fire-perf-compat",[AA]:"fire-rc",[RA]:"fire-rc-compat",[SA]:"fire-gcs",[PA]:"fire-gcs-compat",[DA]:"fire-fst",[CA]:"fire-fst-compat","fire-js":"fire-js",[kA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new Map,tu=new Map;function OA(t,e){try{t.container.addComponent(e)}catch(n){Ws.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zs(t){const e=t.name;if(tu.has(e))return Ws.debug(`There were multiple attempts to register component ${e}.`),!1;tu.set(e,t);for(const n of Aa.values())OA(n,t);return!0}function hc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},as=new uo("app","Firebase",xA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw as.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=NA;function Kg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:eu,automaticDataCollectionEnabled:!1},e),r=s.name;if(typeof r!="string"||!r)throw as.create("bad-app-name",{appName:String(r)});if(n||(n=Gg()),!n)throw as.create("no-options");const i=Aa.get(r);if(i){if(Lr(n,i.options)&&Lr(s,i.config))return i;throw as.create("duplicate-app",{appName:r})}const o=new jb(r);for(const c of tu.values())o.addComponent(c);const a=new LA(n,s,o);return Aa.set(r,a),a}function eh(t=eu){const e=Aa.get(t);if(!e&&t===eu&&Gg())return Kg();if(!e)throw as.create("no-app",{appName:t});return e}function En(t,e,n){var s;let r=(s=MA[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ws.warn(a.join(" "));return}zs(new fs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="firebase-heartbeat-database",UA=1,ji="firebase-heartbeat-store";let yl=null;function Yg(){return yl||(yl=sA(VA,UA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ji)}catch(n){console.warn(n)}}}}).catch(t=>{throw as.create("idb-open",{originalErrorMessage:t.message})})),yl}async function FA(t){try{const n=(await Yg()).transaction(ji),s=await n.objectStore(ji).get(Qg(t));return await n.done,s}catch(e){if(e instanceof kn)Ws.warn(e.message);else{const n=as.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ws.warn(n.message)}}}async function Wf(t,e){try{const s=(await Yg()).transaction(ji,"readwrite");await s.objectStore(ji).put(e,Qg(t)),await s.done}catch(n){if(n instanceof kn)Ws.warn(n.message);else{const s=as.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ws.warn(s.message)}}}function Qg(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=1024,BA=30*24*60*60*1e3;class GA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=zf();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=BA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zf(),{heartbeatsToSend:s,unsentEntries:r}=qA(this._heartbeatsCache.heartbeats),i=ba(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function zf(){return new Date().toISOString().substring(0,10)}function qA(t,e=$A){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Kf(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Kf(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class jA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hg()?Mb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Wf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Wf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Kf(t){return ba(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(t){zs(new fs("platform-logger",e=>new oA(e),"PRIVATE")),zs(new fs("heartbeat",e=>new GA(e),"PRIVATE")),En(Zl,Hf,t),En(Zl,Hf,"esm2017"),En("fire-js","")}HA("");function th(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function Xg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WA=Xg,Jg=new uo("auth","Firebase",Xg());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new Ju("@firebase/auth");function zA(t,...e){Ra.logLevel<=ge.WARN&&Ra.warn(`Auth (${sr}): ${t}`,...e)}function oa(t,...e){Ra.logLevel<=ge.ERROR&&Ra.error(`Auth (${sr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t,...e){throw nh(t,...e)}function Tn(t,...e){return nh(t,...e)}function Zg(t,e,n){const s=Object.assign(Object.assign({},WA()),{[e]:n});return new uo("auth","Firebase",s).create(e,{appName:t.name})}function KA(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Qt(t,"argument-error"),Zg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nh(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Jg.create(t,...e)}function re(t,e,...n){if(!t)throw nh(e,...n)}function On(t){const e="INTERNAL ASSERTION FAILED: "+t;throw oa(e),new Error(e)}function Un(t,e){t||On(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function YA(){return Yf()==="http:"||Yf()==="https:"}function Yf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YA()||Db()||"connection"in navigator)?navigator.onLine:!0}function XA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Un(n>e,"Short delay should be less than long delay!"),this.isMobile=Sb()||Cb()}get(){return QA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(t,e){Un(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;On("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;On("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;On("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=new fo(3e4,6e4);function ys(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vs(t,e,n,s,r={}){return t_(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=ho(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),e_.fetch()(n_(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},i))})}async function t_(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},JA),e);try{const r=new tR(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Go(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Go(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Go(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Go(t,"user-disabled",o);const h=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Zg(t,h,l);Qt(t,h)}}catch(r){if(r instanceof kn)throw r;Qt(t,"network-request-failed",{message:String(r)})}}async function po(t,e,n,s,r={}){const i=await vs(t,e,n,s,r);return"mfaPendingCredential"in i&&Qt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function n_(t,e,n,s){const r=`${e}${n}?${s}`;return t.config.emulator?sh(t.config,r):`${t.config.apiScheme}://${r}`}function eR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Tn(this.auth,"network-request-failed")),ZA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Go(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Tn(t,e,s);return r.customData._tokenResponse=n,r}function Qf(t){return t!==void 0&&t.enterprise!==void 0}class nR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return eR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function sR(t,e){return vs(t,"GET","/v2/recaptchaConfig",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(t,e){return vs(t,"POST","/v1/accounts:delete",e)}async function iR(t,e){return vs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oR(t,e=!1){const n=Be(t),s=await n.getIdToken(e),r=rh(s);re(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:Di(vl(r.auth_time)),issuedAtTime:Di(vl(r.iat)),expirationTime:Di(vl(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function vl(t){return Number(t)*1e3}function rh(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return oa("JWT malformed, contained fewer than 3 sections"),null;try{const r=Fg(n);return r?JSON.parse(r):(oa("Failed to decode base64 JWT payload"),null)}catch(r){return oa("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function aR(t){const e=rh(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hi(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof kn&&cR(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function cR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Di(this.lastLoginAt),this.creationTime=Di(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(t){var e;const n=t.auth,s=await t.getIdToken(),r=await Hi(t,iR(n,{idToken:s}));re(r==null?void 0:r.users.length,n,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?dR(i.providerUserInfo):[],a=hR(t.providerData,o),c=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=c?l:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new s_(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function uR(t){const e=Be(t);await Sa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hR(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function dR(t){return t.map(e=>{var{providerId:n}=e,s=th(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(t,e){const n=await t_(t,{},async()=>{const s=ho({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=n_(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",e_.fetch()(o,{method:"POST",headers:a,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pR(t,e){return vs(t,"POST","/v2/accounts:revokeToken",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):aR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return re(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await fR(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Wi;return s&&(re(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(re(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(re(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wi,this.toJSON())}_performRefresh(){return On("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gs{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,i=th(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new s_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Hi(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oR(this,e)}reload(){return uR(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Sa(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Hi(this,rR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,i,o,a,c,l,h;const d=(s=n.displayName)!==null&&s!==void 0?s:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,I=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,U=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:q,emailVerified:Y,isAnonymous:Ie,providerData:X,stsTokenManager:Me}=n;re(q&&Me,e,"internal-error");const Ze=Wi.fromJSON(this.name,Me);re(typeof q=="string",e,"internal-error"),zn(d,e.name),zn(f,e.name),re(typeof Y=="boolean",e,"internal-error"),re(typeof Ie=="boolean",e,"internal-error"),zn(m,e.name),zn(I,e.name),zn(S,e.name),zn(T,e.name),zn(k,e.name),zn(U,e.name);const Bt=new Gs({uid:q,auth:e,email:f,emailVerified:Y,displayName:d,isAnonymous:Ie,photoURL:I,phoneNumber:m,tenantId:S,stsTokenManager:Ze,createdAt:k,lastLoginAt:U});return X&&Array.isArray(X)&&(Bt.providerData=X.map(Ct=>Object.assign({},Ct))),T&&(Bt._redirectEventId=T),Bt}static async _fromIdTokenResponse(e,n,s=!1){const r=new Wi;r.updateFromServerResponse(n);const i=new Gs({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Sa(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf=new Map;function xn(t){Un(t instanceof Function,"Expected a class definition");let e=Xf.get(t);return e?(Un(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Xf.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}r_.type="NONE";const Jf=r_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t,e,n){return`firebase:${t}:${e}:${n}`}class Sr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=aa(this.userKey,r.apiKey,i),this.fullPersistenceKey=aa("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Sr(xn(Jf),e,s);const r=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let i=r[0]||xn(Jf);const o=aa(s,e.config.apiKey,e.name);let a=null;for(const l of n)try{const h=await l._get(o);if(h){const d=Gs._fromJSON(e,h);l!==i&&(a=d),i=l;break}}catch{}const c=r.filter(l=>l._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Sr(i,e,s):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==i)try{await l._remove(o)}catch{}})),new Sr(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(a_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(i_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(l_(e))return"Blackberry";if(u_(e))return"Webos";if(ih(e))return"Safari";if((e.includes("chrome/")||o_(e))&&!e.includes("edge/"))return"Chrome";if(c_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function i_(t=Xe()){return/firefox\//i.test(t)}function ih(t=Xe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o_(t=Xe()){return/crios\//i.test(t)}function a_(t=Xe()){return/iemobile/i.test(t)}function c_(t=Xe()){return/android/i.test(t)}function l_(t=Xe()){return/blackberry/i.test(t)}function u_(t=Xe()){return/webos/i.test(t)}function dc(t=Xe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mR(t=Xe()){var e;return dc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gR(){return kb()&&document.documentMode===10}function h_(t=Xe()){return dc(t)||c_(t)||u_(t)||l_(t)||/windows phone/i.test(t)||a_(t)}function _R(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t,e=[]){let n;switch(t){case"Browser":n=Zf(Xe());break;case"Worker":n=`${Zf(Xe())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${sr}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(t,e={}){return vs(t,"GET","/v2/passwordPolicy",ys(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=6;class wR{constructor(e){var n,s,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:IR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ep(this),this.idTokenSubscription=new ep(this),this.beforeStateQueue=new yR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xn(n)),this._initializationPromise=this.queue(async()=>{var s,r;if(!this._deleted&&(this.persistenceManager=await Sr.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sa(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Be(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vR(this),n=new wR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new uo("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await pR(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xn(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await Sr.create(this,[xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=d_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&zA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Is(t){return Be(t)}class ep{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ub(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TR(t){fc=t}function f_(t){return fc.loadJS(t)}function bR(){return fc.recaptchaEnterpriseScript}function AR(){return fc.gapiScript}function RR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const SR="recaptcha-enterprise",PR="NO_RECAPTCHA";class DR{constructor(e){this.type=SR,this.auth=Is(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{sR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const l=new nR(c);return i.tenantId==null?i._agentRecaptchaConfig=l:i._tenantRecaptchaConfigs[i.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})})}function r(i,o,a){const c=window.grecaptcha;Qf(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(l=>{o(l)}).catch(()=>{o(PR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{s(this.auth).then(a=>{if(!n&&Qf(window.grecaptcha))r(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=bR();c.length!==0&&(c+=a),f_(c).then(()=>{r(a,i,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function tp(t,e,n,s=!1){const r=new DR(t);let i;try{i=await r.verify(n)}catch{i=await r.verify(n,!0)}const o=Object.assign({},e);return s?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function su(t,e,n,s){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await tp(t,e,n,n==="getOobCode");return s(t,i)}else return s(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await tp(t,e,n,n==="getOobCode");return s(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(t,e){const n=hc(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Lr(i,e??{}))return r;Qt(r,"already-initialized")}return n.initialize({options:e})}function kR(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(xn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function NR(t,e,n){const s=Is(t);re(s._canInitEmulator,s,"emulator-config-failed"),re(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),i=p_(e),{host:o,port:a}=MR(e),c=a===null?"":`:${a}`;s.config.emulator={url:`${i}//${o}${c}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||OR()}function p_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MR(t){const e=p_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:np(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:np(o)}}}function np(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return On("not implemented")}_getIdTokenResponse(e){return On("not implemented")}_linkToIdToken(e,n){return On("not implemented")}_getReauthenticationResolver(e){return On("not implemented")}}async function xR(t,e){return vs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(t,e){return po(t,"POST","/v1/accounts:signInWithPassword",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(t,e){return po(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}async function UR(t,e){return po(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends oh{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new zi(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new zi(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return su(e,n,"signInWithPassword",LR);case"emailLink":return VR(e,{email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return su(e,s,"signUpPassword",xR);case"emailLink":return UR(e,{idToken:n,email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pr(t,e){return po(t,"POST","/v1/accounts:signInWithIdp",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="http://localhost";class Ks extends oh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,i=th(n,["providerId","signInMethod"]);if(!s||!r)return null;const o=new Ks(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Pr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Pr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Pr(e,n)}buildRequest(){const e={requestUri:FR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ho(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BR(t){const e=mi(gi(t)).link,n=e?mi(gi(e)).deep_link_id:null,s=mi(gi(t)).deep_link_id;return(s?mi(gi(s)).link:null)||s||n||e||t}class ah{constructor(e){var n,s,r,i,o,a;const c=mi(gi(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(s=c.oobCode)!==null&&s!==void 0?s:null,d=$R((r=c.mode)!==null&&r!==void 0?r:null);re(l&&h&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=BR(e);try{return new ah(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(){this.providerId=Kr.PROVIDER_ID}static credential(e,n){return zi._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=ah.parseLink(n);return re(s,"argument-error"),zi._fromEmailAndCode(e,s.code,s.tenantId)}}Kr.PROVIDER_ID="password";Kr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Kr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends ch{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends mo{constructor(){super("facebook.com")}static credential(e){return Ks._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zn.credential(e.oauthAccessToken)}catch{return null}}}Zn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn extends mo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ks._fromParams({providerId:mn.PROVIDER_ID,signInMethod:mn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mn.credentialFromTaggedObject(e)}static credentialFromError(e){return mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return mn.credential(n,s)}catch{return null}}}mn.GOOGLE_SIGN_IN_METHOD="google.com";mn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends mo{constructor(){super("github.com")}static credential(e){return Ks._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.GITHUB_SIGN_IN_METHOD="github.com";es.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends mo{constructor(){super("twitter.com")}static credential(e,n){return Ks._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ts.credential(n,s)}catch{return null}}}ts.TWITTER_SIGN_IN_METHOD="twitter.com";ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(t,e){return po(t,"POST","/v1/accounts:signUp",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await Gs._fromIdTokenResponse(e,s,r),o=sp(s);return new Ys({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=sp(s);return new Ys({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function sp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa extends kn{constructor(e,n,s,r){var i;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Pa.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Pa(e,n,s,r)}}function m_(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Pa._fromErrorAndOperation(t,i,e,s):i})}async function qR(t,e,n=!1){const s=await Hi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ys._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e,n=!1){const{auth:s}=t,r="reauthenticate";try{const i=await Hi(t,m_(s,r,e,t),n);re(i.idToken,s,"internal-error");const o=rh(i.idToken);re(o,s,"internal-error");const{sub:a}=o;return re(t.uid===a,s,"user-mismatch"),Ys._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Qt(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g_(t,e,n=!1){const s="signIn",r=await m_(t,s,e),i=await Ys._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function HR(t,e){return g_(Is(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __(t){const e=Is(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WR(t,e,n){const s=Is(t),o=await su(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GR).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&__(t),c}),a=await Ys._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function zR(t,e,n){return HR(Be(t),Kr.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&__(t),s})}function KR(t,e,n,s){return Be(t).onIdTokenChanged(e,n,s)}function YR(t,e,n){return Be(t).beforeAuthStateChanged(e,n)}function QR(t){return Be(t).signOut()}async function XR(t){return Be(t).delete()}const Da="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Da,"1"),this.storage.removeItem(Da),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(){const t=Xe();return ih(t)||dc(t)}const ZR=1e3,e0=10;class v_ extends y_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=JR()&&_R(),this.fallbackToPolling=h_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const s=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(s);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(s,e.newValue):this.storage.removeItem(s);else if(this.localCache[s]===e.newValue&&!n)return}const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);gR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,e0):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},ZR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}v_.type="LOCAL";const t0=v_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_ extends y_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}I_.type="SESSION";const w_=I_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new pc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async l=>l(n.origin,i)),c=await n0(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const l=lh("",20);r.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return window}function r0(t){bn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(){return typeof bn().WorkerGlobalScope<"u"&&typeof bn().importScripts=="function"}async function i0(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function o0(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function a0(){return E_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="firebaseLocalStorageDb",c0=1,Ca="firebaseLocalStorage",b_="fbase_key";class go{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mc(t,e){return t.transaction([Ca],e?"readwrite":"readonly").objectStore(Ca)}function l0(){const t=indexedDB.deleteDatabase(T_);return new go(t).toPromise()}function ru(){const t=indexedDB.open(T_,c0);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Ca,{keyPath:b_})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Ca)?e(s):(s.close(),await l0(),e(await ru()))})})}async function rp(t,e,n){const s=mc(t,!0).put({[b_]:e,value:n});return new go(s).toPromise()}async function u0(t,e){const n=mc(t,!1).get(e),s=await new go(n).toPromise();return s===void 0?null:s.value}function ip(t,e){const n=mc(t,!0).delete(e);return new go(n).toPromise()}const h0=800,d0=3;class A_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ru(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>d0)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return E_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pc._getInstance(a0()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await i0(),!this.activeServiceWorker)return;this.sender=new s0(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||o0()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ru();return await rp(e,Da,"1"),await ip(e,Da),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>rp(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>u0(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ip(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=mc(r,!1).getAll();return new go(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),h0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}A_.type="LOCAL";const f0=A_;new fo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(t,e){return e?xn(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh extends oh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Pr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Pr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function p0(t){return g_(t.auth,new uh(t),t.bypassAuthState)}function m0(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),jR(n,new uh(t),t.bypassAuthState)}async function g0(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),qR(n,new uh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p0;case"linkViaPopup":case"linkViaRedirect":return g0;case"reauthViaPopup":case"reauthViaRedirect":return m0;default:Qt(this.auth,"internal-error")}}resolve(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=new fo(2e3,1e4);async function P_(t,e,n){const s=Is(t);KA(t,e,ch);const r=R_(s,n);return new xs(s,"signInViaPopup",e,r).executeNotNull()}class xs extends S_{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,xs.currentPopupAction&&xs.currentPopupAction.cancel(),xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Un(this.filter.length===1,"Popup operations only handle one event");const e=lh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_0.get())};e()}}xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="pendingRedirect",ca=new Map;class v0 extends S_{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ca.get(this.auth._key());if(!e){try{const s=await I0(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ca.set(this.auth._key(),e)}return this.bypassAuthState||ca.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function I0(t,e){const n=T0(e),s=E0(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function w0(t,e){ca.set(t._key(),e)}function E0(t){return xn(t._redirectPersistence)}function T0(t){return aa(y0,t.config.apiKey,t.name)}async function b0(t,e,n=!1){const s=Is(t),r=R_(s,e),o=await new v0(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0=10*60*1e3;class R0{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!S0(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!D_(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Tn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=A0&&this.cachedEventUids.clear(),this.cachedEventUids.has(op(e))}saveEventToCache(e){this.cachedEventUids.add(op(e)),this.lastProcessedEventTime=Date.now()}}function op(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function D_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function S0(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return D_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P0(t,e={}){return vs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,C0=/^https?/;async function k0(t){if(t.config.emulator)return;const{authorizedDomains:e}=await P0(t);for(const n of e)try{if(N0(n))return}catch{}Qt(t,"unauthorized-domain")}function N0(t){const e=nu(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!C0.test(n))return!1;if(D0.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0=new fo(3e4,6e4);function ap(){const t=bn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function O0(t){return new Promise((e,n)=>{var s,r,i;function o(){ap(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ap(),n(Tn(t,"network-request-failed"))},timeout:M0.get()})}if(!((r=(s=bn().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((i=bn().gapi)===null||i===void 0)&&i.load)o();else{const a=RR("iframefcb");return bn()[a]=()=>{gapi.load?o():n(Tn(t,"network-request-failed"))},f_(`${AR()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw la=null,e})}let la=null;function x0(t){return la=la||O0(t),la}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=new fo(5e3,15e3),V0="__/auth/iframe",U0="emulator/auth/iframe",F0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function B0(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?sh(e,U0):`https://${t.config.authDomain}/${V0}`,s={apiKey:e.apiKey,appName:t.name,v:sr},r=$0.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${ho(s).slice(1)}`}async function G0(t){const e=await x0(t),n=bn().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:B0(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F0,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Tn(t,"network-request-failed"),a=bn().setTimeout(()=>{i(o)},L0.get());function c(){bn().clearTimeout(a),r(s)}s.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j0=500,H0=600,W0="_blank",z0="http://localhost";let cp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function K0(t,e,n,s=j0,r=H0){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const c=Object.assign(Object.assign({},q0),{width:s.toString(),height:r.toString(),top:i,left:o}),l=Xe().toLowerCase();n&&(a=o_(l)?W0:n),i_(l)&&(e=e||z0,c.scrollbars="yes");const h=Object.entries(c).reduce((f,[m,I])=>`${f}${m}=${I},`,"");if(mR(l)&&a!=="_self")return Y0(e||"",a),new cp(null);const d=window.open(e||"",a,h);re(d,t,"popup-blocked");try{d.focus()}catch{}return new cp(d)}function Y0(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="__/auth/handler",X0="emulator/auth/handler",J0=encodeURIComponent("fac");async function lp(t,e,n,s,r,i){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:sr,eventId:r};if(e instanceof ch){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Vb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(i||{}))o[h]=d}if(e instanceof mo){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await t._getAppCheckToken(),l=c?`#${J0}=${encodeURIComponent(c)}`:"";return`${Z0(t)}?${ho(a).slice(1)}${l}`}function Z0({config:t}){return t.emulator?sh(t,X0):`https://${t.authDomain}/${Q0}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il="webStorageSupport";class eS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=w_,this._completeRedirectFn=b0,this._overrideRedirectResult=w0}async _openPopup(e,n,s,r){var i;Un((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await lp(e,n,s,nu(),r);return K0(e,o,lh())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await lp(e,n,s,nu(),r);return r0(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Un(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await G0(e),s=new R0(e);return n.register("authEvent",r=>(re(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Il,{type:Il},r=>{var i;const o=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[Il];o!==void 0&&n(!!o),Qt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=k0(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return h_()||ih()||dc()}}const tS=eS;var up="@firebase/auth",hp="1.6.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rS(t){zs(new fs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:d_(t)},l=new ER(s,r,i,c);return kR(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),zs(new fs("auth-internal",e=>{const n=Is(e.getProvider("auth").getImmediate());return(s=>new nS(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),En(up,hp,sS(t)),En(up,hp,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=5*60,oS=qg("authIdTokenMaxAge")||iS;let dp=null;const aS=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>oS)return;const r=n==null?void 0:n.token;dp!==r&&(dp=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function ve(t=eh()){const e=hc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=CR(t,{popupRedirectResolver:tS,persistence:[f0,t0,w_]}),s=qg("authTokenSyncURL");if(s&&s.match(/^\/[^\/].*/)){const i=aS(s);YR(n,i,()=>i(n.currentUser)),KR(n,o=>i(o))}const r=$g("auth");return r&&NR(n,`http://${r}`),n}function cS(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}TR({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Tn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",cS().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rS("Browser");const lS={name:"CommonHeader",methods:{goHome(){this.$router.push("/")},goLogin(){this.$router.push("/login")},goRegister(){this.$router.push("/register")}}},gc=t=>(ue("data-v-09bca77f"),t=t(),he(),t),uS={class:"common-header-container"},hS=gc(()=>u("h1",{class:"header"},"ConnectHub",-1)),dS={class:"common-header"},fS=gc(()=>u("span",null,"Home",-1)),pS=[fS],mS=gc(()=>u("span",null,"Login",-1)),gS=[mS],_S=gc(()=>u("span",null,"Sign Up",-1)),yS=[_S];function vS(t,e,n,s,r,i){return _(),y("div",uS,[hS,u("div",dS,[u("ul",null,[u("li",{onClick:e[0]||(e[0]=(...o)=>i.goHome&&i.goHome(...o))},pS),u("li",{onClick:e[1]||(e[1]=(...o)=>i.goLogin&&i.goLogin(...o))},gS),u("li",{onClick:e[2]||(e[2]=(...o)=>i.goRegister&&i.goRegister(...o))},yS)])])])}const hh=H(lS,[["render",vS],["__scopeId","data-v-09bca77f"]]),C_="/assets/maillogo-CoTVKf5L.png",k_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMwAAADMCAMAAAAI/LzAAAABSlBMVEX////qQzU0qFNChfT7vAU8gvTx9P5ckvVUj/XJ2fv7uADi6v1yn/Y3gPT/vQD7ugDqPi8tpk4kpEnpNiX//fj7tAD935/3+/jpLhrpOiqt2LjpMh/M5tL85eT++vr8wAAmefP3+f7n8+oWoUGd0Kn2urb1rqrzop3sVUr97+7venLoJg3oHQD4y8nxkYvtaF/62dfY4/yPsvibuvm5zvoAnTNwvILtYVfucWj+89n80Xb92Iz8yFX96b/7wCzpNjf7xUD+9+j8z2gAplh+p/ddtnNGrmCGxZS83sTwh4H6wnDtWh3wdCn0jCDsUTL2oBjtYS7+zQDygCTtZEf6xYb95rDi1Iu8sytptGPouhadsTnYuCB1rURUq0yrxPmLrz/gy26jzcE1ht8zn34/j9A9lLs6m582pWY8lrEtqjM5nZM2o3NAjNk8kcV4+df5AAAKvklEQVR4nO2c6X/aRhrHQYCvGNBhm0NcRtxIQBJzOKmTprE4uk3T7bHZtIl3t2eO5v9/uyOBbWFmpBkxI4l8+L1KL6QvzznPMzQU2mqrrbbaaqtNVTPf06q1haqalm8W/H4lF2pq9dZQaqfTsixLC4E/yum23GjVq73NYCoU8tVZo62qaSkThoqXZPCPw6Nar1kIMFOhma+2wmpb5uEYy0hpVR3We/mm328NUzOv1YfttoQBcqNMWuVn1V7AeAq9ameYTiMcy9ZCcjvcqgWIp1mtd6U0iUmWeaR2Y1br+U1hqldvhd3YZNk+Urej+Z4OtM4wQxQnKGWkRqvqK47WavBrGuVWvBTuVn1D6XUzPA2j3OLwmaHmC0qzq1IzioWn3fA+FTQ7qkQfxVBGbXmbqJvVcJoNiiGZr3mHU9Ba7qsKjvj2yKs8na+HZZYohuRwPe8FS3XE1ixz8ekR+zTd9MAscwHjMHY1bUSl3GOJz7SYulq1waC0oCU12JXQQsc7s8yV4WuMWPKjtrcoYSNJd5iUnF6DYZ1Eq80icDSeUfviSNOl3qxVUcMW9pIblD2tqnoc+halu3Qdre51GrOIdtDUMz7ahTYL3fOkvyw+2kUe0WWp+hgvMuXY19r+sUhduklZ89EutFl6Yd9qJfAxuiz5oUcnMYjSlFlCLe/75BsWynksVKfAws/3f8Y2kCT6aNeXUHW9eDGXY3Jj1Jp1gGat0ZBX1baM9aHUWXqNNRKZ3DaWLlovn2/eKJ/vabXOMK067gmpsxRarg0jqWqrmi/A9q/gbza1Tka1HVfR7pONLsYdCZ+WZo5ziHw9nEZ2SbTrC6iWYTdOxmf4IebKSGuF4Q0sfZZmy0WF4aVGi+CMm+/AVlX0WQo1chZebswIj+sA524yoF4rjUxGHDFS2DlUVqUBnCUW2rUSONmMdKzESyN369VCtWUxDvWcDFQlZZHWWEGAzHbtBiyGZAVSJ5O76yyHClpDYmaXUI2wJ1PXnaE2R4YrMIgXIJWQhcJaaKZSPyMvPpgoLWfSVMandZV+TgbKExkmM6T0DhqTzdLX/yBhGQXndhVE50+K3+CzsN3Ura1HyWjxxbdPPwuW8y+T0Wjx5Xc4NBkmuZSiHkcNFY8xXI0fBpzl2RfJOc3BC0cWPhhXEdE6iS5ULL50gKFRK5nq6NFB9AYnapsG1I7fL+ukiyfJ6K3++Q2aRur6/a6OOjmIWlVEBg6fCXSxNHT+RTK6TPPyOziM7M9dShJdRO8KkaPlju+XkJ109PhglebgxbcrLBkfboWSyqz+KzTRlytZTaoF3jChi1XDmBXn+E5zIwW8JTN0dAKFMVzt+yUaPujlMmS0MggYox14eosje3zx2JWeoVjMrGYJHFY32mjq4hgNEy0mr9uBgB8u57L2ZTCa6CJH83W/3xRDR3Yo88AxaPhG8FMZCBk7L5vjGAfQzMzvF8XRT44wIA18/5QPflcGZB8yN4Hzg9/viaUnkF4Goh/dfPbpDhOdIh+IYRig43MXLPce7O2y0OF9xAOPnEPG0IELltC9w3iMheL7iAfalsxblq9cwkRYqHSGeOAJFszxRaBgrhBR8xVWzBwfBQkm/mAH/kDYwWxFyagbFnYwlwiYIg6Mu5BhBhPbvQd/IJ6XnQQLJgLPzXaHGQuMq/hnBhOJw2HO8WCeBQumBC80eDBJV8nMcxj4ZOYuy5OgwcCr5k84MAdfbgYMasy0DPMoaDDwFmBDYR5uYeYwjwMGE/+sYB58Rm62hdkwmM0smgiYDW1n4NlsQxvNdWACdwSAtzObeTgrXcEfuInHZuTgbBMHGqjD2UaOmpAwmzgEjJQQk/NNHM9GEKOmjRycx/YQQ0DGKw0mMPFDBAzTZZPXg3O8NWDi4F/uYEj3SFgwiG4mhLegTSRe/dsNzOUeqfBgEA0A1uo88frn50KOHOb0/j6pDnFsg9ycOV9qSCZ+efOcEybkMC7w8aIMtdN0vG4CXOwtx3GCXvYAZn8XwzLxXdS22ekiUCL6MzdX1gOYKxwvi1+iMrND2UxE3yxYxEGKPcwDHC8rwQ/NpuyONInX3PMFjOCBafAKUxyZzOyuNSair65RvDHNGQ5LbA8Z/zYXTo2MfMvCCQJr0+xgeVkcedvEEHxCM8/IVokDxgntPk4uQy/OTUEvaQMXe7vMAmgYm+aqhMESiT+0+wzY9XngYtyKRLa1Bi/8YxFk/Te1+sOGxOs3qywcp0xY5oAzLMMgbzQstPKTk8Qvb2EswDZTdiw7u1itTPzS4XPu5LPEKziKkdHYweBFTCRiU2VMLf1MK5F4czfyLY6mM4PBY4nt2SVmQ9b+LPF6JYtZ1a8wYsFzMhAyjp9089NGkJFtSEwaFwcbDO1jOlnMNjGbuv7R6W2PbCMW+XkHe1pgn8tMPV642H+cWVicbHZwRx8YXnbdBbyCVpe7ot/WnGI1ZYbQJ2arHiWNI6Vd6FtsM6FMc4XrY5ES+ihj0flBEcPF2NCcRfBGTBgVc6H/Ioo+nIbm2WYfmyVSwgh/Q+U+AQzoOanR4NslEscJf1MDhYhGoORpZyVsFuReZlUpItNwIpXqefoQs1jODYMV/qYqRKYxOpu1XW3nkIAFMy/PlRoLZDTKILcWzun9PRKW+K7defmupoSm4cRxdo3IKf/vVxIWIsMA05DlACBBnLiNnNRU7//2O0nEIFdMcOU4QkczjOMOJzfhRE756w/8XBYjMgz4tkhzgGkcnbwfyE3GovG9idyfEcy2zH7CBFN5IBLTgLP0mAxnOhgLwvV/+9uvWDROQxnoc8gdzXwlboDrbKmsLgiWh4h/YQVO/BK/xtyo4sI05jspAkbwpKYDRbnzdQniu7hj4Dgf/aGPc+NoC54+4Cmn4KUnlUrlKnq/D/l04f2HPSca+zEmUjnS0mmV0lf0STZXLgOma4G/KOemFV3oK6jv6f3Hv+0XzbFDF05mKOvaNKZEBRCN9cGkMtdgoBuMSJD5l8B9suudUT9lwtCEPD+vIokAyhT4E8a/Lyjv9tBZDb0rdxR5I0BDyoe/UTSlQ9csoNqM1/M0dxI/foJntTjq3g+eXLQ1FCSM30EDB/9IhqARfaERPkACZ42AWSjb94MGdJ4r00C7RTk2jR9hAwLn/afl5oa08Yer4otpQAH90xo4NldLNoPG0kfHdtcM/mul/KIBffSiubG9v0Coyt0G1yua8bwdiKHvYrmQTzkNVLkPwNXQ/68MlzS+1BvjjPPx9zhlFlA9BX9SNAicP2izGMcbP7pOo+1msW0s+9NDj9ncbElNvA8chheosh4fCQRh/ZE8WrmBl8YRx2yvgqUmnmU1QcEewblWduBNOyCKFQ8uUJcrHHvjCIrO8BKYRakcc+N4Y5YFTpZjWXOAWdbbxBGqPIHNV+lIEaZeopg4OhscUWFZW5DK6aJAOXYEkfmdaTTO7bKICgrpsoo2zkQX6DQFoBjr3qUwhMqVAbd+phaV8WCd7Ts1lacVXVyHR1AEPetpMrZTKjed6A6bF7RNRL0yDYJRbpUy7ANd7tmC9IVBNlcOilEsSpXL0wHX7+N5HADpjyvI1WcQlAIWmozBeyrIHGesB/t9DsR7gDksSpVzlcFYNFd/VhnbQEGfAHv4/YYuBKBy2RvlcoGMjq222mqrrbbC0/8Bfz+68Ka6YAgAAAAASUVORK5CYII=";var IS="firebase",wS="10.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En(IS,wS,"app");var ES=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V,dh=dh||{},oe=ES||self;function _c(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function _o(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function TS(t){return Object.prototype.hasOwnProperty.call(t,wl)&&t[wl]||(t[wl]=++bS)}var wl="closure_uid_"+(1e9*Math.random()>>>0),bS=0;function AS(t,e,n){return t.call.apply(t.bind,arguments)}function RS(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,s),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function bt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?bt=AS:bt=RS,bt.apply(null,arguments)}function qo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),t.apply(this,s)}}function ut(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(s,r,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(s,o)}}function ws(){this.s=this.s,this.o=this.o}var SS=0;ws.prototype.s=!1;ws.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),SS!=0)&&TS(this)};ws.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const N_=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function fh(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function fp(t,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(_c(s)){const r=t.length||0,i=s.length||0;t.length=r+i;for(let o=0;o<i;o++)t[r+o]=s[o]}else t.push(s)}}function At(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var PS=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};oe.addEventListener("test",n,e),oe.removeEventListener("test",n,e)}catch{}return t}();function Ki(t){return/^[\s\xa0]*$/.test(t)}function yc(){var t=oe.navigator;return t&&(t=t.userAgent)?t:""}function gn(t){return yc().indexOf(t)!=-1}function ph(t){return ph[" "](t),t}ph[" "]=function(){};function DS(t,e){var n=wP;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var CS=gn("Opera"),Vr=gn("Trident")||gn("MSIE"),M_=gn("Edge"),iu=M_||Vr,O_=gn("Gecko")&&!(yc().toLowerCase().indexOf("webkit")!=-1&&!gn("Edge"))&&!(gn("Trident")||gn("MSIE"))&&!gn("Edge"),kS=yc().toLowerCase().indexOf("webkit")!=-1&&!gn("Edge");function x_(){var t=oe.document;return t?t.documentMode:void 0}var ou;e:{var El="",Tl=function(){var t=yc();if(O_)return/rv:([^\);]+)(\)|;)/.exec(t);if(M_)return/Edge\/([\d\.]+)/.exec(t);if(Vr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(kS)return/WebKit\/(\S+)/.exec(t);if(CS)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Tl&&(El=Tl?Tl[1]:""),Vr){var bl=x_();if(bl!=null&&bl>parseFloat(El)){ou=String(bl);break e}}ou=El}var au;if(oe.document&&Vr){var pp=x_();au=pp||parseInt(ou,10)||void 0}else au=void 0;var NS=au;function Yi(t,e){if(At.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(O_){e:{try{ph(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:MS[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Yi.$.h.call(this)}}ut(Yi,At);var MS={2:"touch",3:"pen",4:"mouse"};Yi.prototype.h=function(){Yi.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var yo="closure_listenable_"+(1e6*Math.random()|0),OS=0;function xS(t,e,n,s,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.la=r,this.key=++OS,this.fa=this.ia=!1}function vc(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function mh(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function LS(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function L_(t){const e={};for(const n in t)e[n]=t[n];return e}const mp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V_(t,e){let n,s;for(let r=1;r<arguments.length;r++){s=arguments[r];for(n in s)t[n]=s[n];for(let i=0;i<mp.length;i++)n=mp[i],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function Ic(t){this.src=t,this.g={},this.h=0}Ic.prototype.add=function(t,e,n,s,r){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=lu(t,e,s,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new xS(e,this.src,i,!!s,r),e.ia=n,t.push(e)),e};function cu(t,e){var n=e.type;if(n in t.g){var s=t.g[n],r=N_(s,e),i;(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(vc(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function lu(t,e,n,s){for(var r=0;r<t.length;++r){var i=t[r];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==s)return r}return-1}var gh="closure_lm_"+(1e6*Math.random()|0),Al={};function U_(t,e,n,s,r){if(s&&s.once)return $_(t,e,n,s,r);if(Array.isArray(e)){for(var i=0;i<e.length;i++)U_(t,e[i],n,s,r);return null}return n=vh(n),t&&t[yo]?t.O(e,n,_o(s)?!!s.capture:!!s,r):F_(t,e,n,!1,s,r)}function F_(t,e,n,s,r,i){if(!e)throw Error("Invalid event type");var o=_o(r)?!!r.capture:!!r,a=yh(t);if(a||(t[gh]=a=new Ic(t)),n=a.add(e,n,s,o,i),n.proxy)return n;if(s=VS(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)PS||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),s,r);else if(t.attachEvent)t.attachEvent(G_(e.toString()),s);else if(t.addListener&&t.removeListener)t.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function VS(){function t(n){return e.call(t.src,t.listener,n)}const e=US;return t}function $_(t,e,n,s,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)$_(t,e[i],n,s,r);return null}return n=vh(n),t&&t[yo]?t.P(e,n,_o(s)?!!s.capture:!!s,r):F_(t,e,n,!0,s,r)}function B_(t,e,n,s,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)B_(t,e[i],n,s,r);else s=_o(s)?!!s.capture:!!s,n=vh(n),t&&t[yo]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=lu(i,n,s,r),-1<n&&(vc(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=yh(t))&&(e=t.g[e.toString()],t=-1,e&&(t=lu(e,n,s,r)),(n=-1<t?e[t]:null)&&_h(n))}function _h(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[yo])cu(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(G_(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=yh(e))?(cu(n,t),n.h==0&&(n.src=null,e[gh]=null)):vc(t)}}}function G_(t){return t in Al?Al[t]:Al[t]="on"+t}function US(t,e){if(t.fa)t=!0;else{e=new Yi(e,this);var n=t.listener,s=t.la||t.src;t.ia&&_h(t),t=n.call(s,e)}return t}function yh(t){return t=t[gh],t instanceof Ic?t:null}var Rl="__closure_events_fn_"+(1e9*Math.random()>>>0);function vh(t){return typeof t=="function"?t:(t[Rl]||(t[Rl]=function(e){return t.handleEvent(e)}),t[Rl])}function lt(){ws.call(this),this.i=new Ic(this),this.S=this,this.J=null}ut(lt,ws);lt.prototype[yo]=!0;lt.prototype.removeEventListener=function(t,e,n,s){B_(this,t,e,n,s)};function pt(t,e){var n,s=t.J;if(s)for(n=[];s;s=s.J)n.push(s);if(t=t.S,s=e.type||e,typeof e=="string")e=new At(e,t);else if(e instanceof At)e.target=e.target||t;else{var r=e;e=new At(s,t),V_(e,r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];r=jo(o,s,!0,e)&&r}if(o=e.g=t,r=jo(o,s,!0,e)&&r,r=jo(o,s,!1,e)&&r,n)for(i=0;i<n.length;i++)o=e.g=n[i],r=jo(o,s,!1,e)&&r}lt.prototype.N=function(){if(lt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)vc(n[s]);delete t.g[e],t.h--}}this.J=null};lt.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)};lt.prototype.P=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};function jo(t,e,n,s){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&cu(t.i,o),r=a.call(c,s)!==!1&&r}}return r&&!s.defaultPrevented}var Ih=oe.JSON.stringify;class FS{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function $S(){var t=wh;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class BS{constructor(){this.h=this.g=null}add(e,n){const s=q_.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var q_=new FS(()=>new GS,t=>t.reset());class GS{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function qS(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function jS(t){oe.setTimeout(()=>{throw t},0)}let Qi,Xi=!1,wh=new BS,j_=()=>{const t=oe.Promise.resolve(void 0);Qi=()=>{t.then(HS)}};var HS=()=>{for(var t;t=$S();){try{t.h.call(t.g)}catch(n){jS(n)}var e=q_;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Xi=!1};function wc(t,e){lt.call(this),this.h=t||1,this.g=e||oe,this.j=bt(this.qb,this),this.l=Date.now()}ut(wc,lt);V=wc.prototype;V.ga=!1;V.T=null;V.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),pt(this,"tick"),this.ga&&(Eh(this),this.start()))}};V.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Eh(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}V.N=function(){wc.$.N.call(this),Eh(this),delete this.g};function Th(t,e,n){if(typeof t=="function")n&&(t=bt(t,n));else if(t&&typeof t.handleEvent=="function")t=bt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:oe.setTimeout(t,e||0)}function H_(t){t.g=Th(()=>{t.g=null,t.i&&(t.i=!1,H_(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class WS extends ws{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:H_(this)}N(){super.N(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ji(t){ws.call(this),this.h=t,this.g={}}ut(Ji,ws);var gp=[];function W_(t,e,n,s){Array.isArray(n)||(n&&(gp[0]=n.toString()),n=gp);for(var r=0;r<n.length;r++){var i=U_(e,n[r],s||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function z_(t){mh(t.g,function(e,n){this.g.hasOwnProperty(n)&&_h(e)},t),t.g={}}Ji.prototype.N=function(){Ji.$.N.call(this),z_(this)};Ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ec(){this.g=!0}Ec.prototype.Ea=function(){this.g=!1};function zS(t,e,n,s,r,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var h=l[0];l=l[1];var d=h.split("_");o=2<=d.length&&d[1]=="type"?o+(h+"="+l+"&"):o+(h+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function KS(t,e,n,s,r,i,o){t.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+e+`
`+n+`
`+i+" "+o})}function wr(t,e,n,s){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+QS(t,n)+(s?" "+s:"")})}function YS(t,e){t.info(function(){return"TIMEOUT: "+e})}Ec.prototype.info=function(){};function QS(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return Ih(n)}catch{return e}}var rr={},_p=null;function Tc(){return _p=_p||new lt}rr.Ta="serverreachability";function K_(t){At.call(this,rr.Ta,t)}ut(K_,At);function Zi(t){const e=Tc();pt(e,new K_(e))}rr.STAT_EVENT="statevent";function Y_(t,e){At.call(this,rr.STAT_EVENT,t),this.stat=e}ut(Y_,At);function Mt(t){const e=Tc();pt(e,new Y_(e,t))}rr.Ua="timingevent";function Q_(t,e){At.call(this,rr.Ua,t),this.size=e}ut(Q_,At);function vo(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return oe.setTimeout(function(){t()},e)}var bc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},X_={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function bh(){}bh.prototype.h=null;function yp(t){return t.h||(t.h=t.i())}function J_(){}var Io={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ah(){At.call(this,"d")}ut(Ah,At);function Rh(){At.call(this,"c")}ut(Rh,At);var uu;function Ac(){}ut(Ac,bh);Ac.prototype.g=function(){return new XMLHttpRequest};Ac.prototype.i=function(){return{}};uu=new Ac;function wo(t,e,n,s){this.l=t,this.j=e,this.m=n,this.W=s||1,this.U=new Ji(this),this.P=XS,t=iu?125:void 0,this.V=new wc(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Z_}function Z_(){this.i=null,this.g="",this.h=!1}var XS=45e3,ey={},hu={};V=wo.prototype;V.setTimeout=function(t){this.P=t};function du(t,e,n){t.L=1,t.A=Sc(Fn(e)),t.u=n,t.S=!0,ty(t,null)}function ty(t,e){t.G=Date.now(),Eo(t),t.B=Fn(t.A);var n=t.B,s=t.W;Array.isArray(s)||(s=[String(s)]),ly(n.i,"t",s),t.o=0,n=t.l.J,t.h=new Z_,t.g=Cy(t.l,n?e:null,!t.u),0<t.O&&(t.M=new WS(bt(t.Pa,t,t.g),t.O)),W_(t.U,t.g,"readystatechange",t.nb),e=t.I?L_(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Zi(),zS(t.j,t.v,t.B,t.m,t.W,t.u)}V.nb=function(t){t=t.target;const e=this.M;e&&yn(t)==3?e.l():this.Pa(t)};V.Pa=function(t){try{if(t==this.g)e:{const h=yn(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>h)&&(h!=3||iu||this.g&&(this.h.h||this.g.ja()||Ep(this.g)))){this.J||h!=4||e==7||(e==8||0>=d?Zi(3):Zi(2)),Rc(this);var n=this.g.da();this.ca=n;t:if(ny(this)){var s=Ep(this.g);t="";var r=s.length,i=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ls(this),Ci(this);var o="";break t}this.h.i=new oe.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:i&&e==r-1});s.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,KS(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ki(a)){var l=a;break t}}l=null}if(n=l)wr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fu(this,n);else{this.i=!1,this.s=3,Mt(12),Ls(this),Ci(this);break e}}this.S?(sy(this,h,o),iu&&this.i&&h==3&&(W_(this.U,this.V,"tick",this.mb),this.V.start())):(wr(this.j,this.m,o,null),fu(this,o)),h==4&&Ls(this),this.i&&!this.J&&(h==4?Ry(this.l,this):(this.i=!1,Eo(this)))}else yP(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),Ls(this),Ci(this)}}}catch{}finally{}};function ny(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function sy(t,e,n){let s=!0,r;for(;!t.J&&t.o<n.length;)if(r=JS(t,n),r==hu){e==4&&(t.s=4,Mt(14),s=!1),wr(t.j,t.m,null,"[Incomplete Response]");break}else if(r==ey){t.s=4,Mt(15),wr(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}else wr(t.j,t.m,r,null),fu(t,r);ny(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Mt(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Nh(e),e.M=!0,Mt(11))):(wr(t.j,t.m,n,"[Invalid Chunked Response]"),Ls(t),Ci(t))}V.mb=function(){if(this.g){var t=yn(this.g),e=this.g.ja();this.o<e.length&&(Rc(this),sy(this,t,e),this.i&&t!=4&&Eo(this))}};function JS(t,e){var n=t.o,s=e.indexOf(`
`,n);return s==-1?hu:(n=Number(e.substring(n,s)),isNaN(n)?ey:(s+=1,s+n>e.length?hu:(e=e.slice(s,s+n),t.o=s+n,e)))}V.cancel=function(){this.J=!0,Ls(this)};function Eo(t){t.Y=Date.now()+t.P,ry(t,t.P)}function ry(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=vo(bt(t.lb,t),e)}function Rc(t){t.C&&(oe.clearTimeout(t.C),t.C=null)}V.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(YS(this.j,this.B),this.L!=2&&(Zi(),Mt(17)),Ls(this),this.s=2,Ci(this)):ry(this,this.Y-t)};function Ci(t){t.l.H==0||t.J||Ry(t.l,t)}function Ls(t){Rc(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Eh(t.V),z_(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function fu(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||pu(n.i,t))){if(!t.K&&pu(n.i,t)&&n.H==3){try{var s=n.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var r=s;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Ma(n),kc(n);else break e;kh(n),Mt(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=vo(bt(n.ib,n),6e3));if(1>=dy(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Vs(n,11)}else if((t.K||n.g==t)&&Ma(n),!Ki(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const h=l[3];h!=null&&(n.ra=h,n.l.info("VER="+n.ra));const d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const f=l[5];f!=null&&typeof f=="number"&&0<f&&(s=1.5*f,n.L=s,n.l.info("backChannelRequestTimeoutMs_="+s)),s=n;const m=t.g;if(m){const I=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(I){var i=s.i;i.g||I.indexOf("spdy")==-1&&I.indexOf("quic")==-1&&I.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Sh(i,i.h),i.h=null))}if(s.F){const S=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;S&&(s.Da=S,xe(s.I,s.F,S))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),s=n;var o=t;if(s.wa=Dy(s,s.J?s.pa:null,s.Y),o.K){fy(s.i,o);var a=o,c=s.L;c&&a.setTimeout(c),a.C&&(Rc(a),Eo(a)),s.g=o}else by(s);0<n.j.length&&Nc(n)}else l[0]!="stop"&&l[0]!="close"||Vs(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Vs(n,7):Ch(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}Zi(4)}catch{}}function ZS(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(_c(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}e=[],n=0;for(s in t)e[n++]=t[s];return e}function eP(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(_c(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const s in t)e[n++]=s;return e}}}function iy(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(_c(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=eP(t),s=ZS(t),r=s.length,i=0;i<r;i++)e.call(void 0,s[i],n&&n[i],t)}var oy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tP(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),r=null;if(0<=s){var i=t[n].substring(0,s);r=t[n].substring(s+1)}else i=t[n];e(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function qs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof qs){this.h=t.h,ka(this,t.j),this.s=t.s,this.g=t.g,Na(this,t.m),this.l=t.l;var e=t.i,n=new eo;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),vp(this,n),this.o=t.o}else t&&(e=String(t).match(oy))?(this.h=!1,ka(this,e[1]||"",!0),this.s=_i(e[2]||""),this.g=_i(e[3]||"",!0),Na(this,e[4]),this.l=_i(e[5]||"",!0),vp(this,e[6]||"",!0),this.o=_i(e[7]||"")):(this.h=!1,this.i=new eo(null,this.h))}qs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(yi(e,Ip,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(yi(e,Ip,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(yi(n,n.charAt(0)=="/"?rP:sP,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",yi(n,oP)),t.join("")};function Fn(t){return new qs(t)}function ka(t,e,n){t.j=n?_i(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Na(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function vp(t,e,n){e instanceof eo?(t.i=e,aP(t.i,t.h)):(n||(e=yi(e,iP)),t.i=new eo(e,t.h))}function xe(t,e,n){t.i.set(e,n)}function Sc(t){return xe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function _i(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function yi(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,nP),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function nP(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Ip=/[#\/\?@]/g,sP=/[#\?:]/g,rP=/[#\?]/g,iP=/[#\?@]/g,oP=/#/g;function eo(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Es(t){t.g||(t.g=new Map,t.h=0,t.i&&tP(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}V=eo.prototype;V.add=function(t,e){Es(this),this.i=null,t=Yr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function ay(t,e){Es(t),e=Yr(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function cy(t,e){return Es(t),e=Yr(t,e),t.g.has(e)}V.forEach=function(t,e){Es(this),this.g.forEach(function(n,s){n.forEach(function(r){t.call(e,r,s,this)},this)},this)};V.ta=function(){Es(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const r=t[s];for(let i=0;i<r.length;i++)n.push(e[s])}return n};V.Z=function(t){Es(this);let e=[];if(typeof t=="string")cy(this,t)&&(e=e.concat(this.g.get(Yr(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};V.set=function(t,e){return Es(this),this.i=null,t=Yr(this,t),cy(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};V.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function ly(t,e,n){ay(t,e),0<n.length&&(t.i=null,t.g.set(Yr(t,e),fh(n)),t.h+=n.length)}V.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const i=encodeURIComponent(String(s)),o=this.Z(s);for(s=0;s<o.length;s++){var r=i;o[s]!==""&&(r+="="+encodeURIComponent(String(o[s]))),t.push(r)}}return this.i=t.join("&")};function Yr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function aP(t,e){e&&!t.j&&(Es(t),t.i=null,t.g.forEach(function(n,s){var r=s.toLowerCase();s!=r&&(ay(this,s),ly(this,r,n))},t)),t.j=e}var cP=class{constructor(t,e){this.g=t,this.map=e}};function uy(t){this.l=t||lP,oe.PerformanceNavigationTiming?(t=oe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(oe.g&&oe.g.Ka&&oe.g.Ka()&&oe.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var lP=10;function hy(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function dy(t){return t.h?1:t.g?t.g.size:0}function pu(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Sh(t,e){t.g?t.g.add(e):t.h=e}function fy(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}uy.prototype.cancel=function(){if(this.i=py(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function py(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return fh(t.i)}var uP=class{stringify(t){return oe.JSON.stringify(t,void 0)}parse(t){return oe.JSON.parse(t,void 0)}};function hP(){this.g=new uP}function dP(t,e,n){const s=n||"";try{iy(t,function(r,i){let o=r;_o(r)&&(o=Ih(r)),e.push(s+i+"="+encodeURIComponent(o))})}catch(r){throw e.push(s+"type="+encodeURIComponent("_badmap")),r}}function fP(t,e){const n=new Ec;if(oe.Image){const s=new Image;s.onload=qo(Ho,n,s,"TestLoadImage: loaded",!0,e),s.onerror=qo(Ho,n,s,"TestLoadImage: error",!1,e),s.onabort=qo(Ho,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=qo(Ho,n,s,"TestLoadImage: timeout",!1,e),oe.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=t}else e(!1)}function Ho(t,e,n,s,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(s)}catch{}}function Pc(t){this.l=t.ec||null,this.j=t.ob||!1}ut(Pc,bh);Pc.prototype.g=function(){return new Dc(this.l,this.j)};Pc.prototype.i=function(t){return function(){return t}}({});function Dc(t,e){lt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Ph,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ut(Dc,lt);var Ph=0;V=Dc.prototype;V.open=function(t,e){if(this.readyState!=Ph)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,to(this)};V.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||oe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};V.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,To(this)),this.readyState=Ph};V.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,to(this)),this.g&&(this.readyState=3,to(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof oe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;my(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function my(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}V.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?To(this):to(this),this.readyState==3&&my(this)}};V.Za=function(t){this.g&&(this.response=this.responseText=t,To(this))};V.Ya=function(t){this.g&&(this.response=t,To(this))};V.ka=function(){this.g&&To(this)};function To(t){t.readyState=4,t.l=null,t.j=null,t.A=null,to(t)}V.setRequestHeader=function(t,e){this.v.append(t,e)};V.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};V.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function to(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Dc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var pP=oe.JSON.parse;function He(t){lt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=gy,this.L=this.M=!1}ut(He,lt);var gy="",mP=/^https?$/i,gP=["POST","PUT"];V=He.prototype;V.Oa=function(t){this.M=t};V.ha=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():uu.g(),this.C=this.u?yp(this.u):yp(uu),this.g.onreadystatechange=bt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){wp(this,i);return}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var r in s)n.set(r,s[r]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const i of s.keys())n.set(i,s.get(i));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),r=oe.FormData&&t instanceof oe.FormData,!(0<=N_(gP,e))||s||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{vy(this),0<this.B&&((this.L=_P(this.g))?(this.g.timeout=this.B,this.g.ontimeout=bt(this.ua,this)):this.A=Th(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){wp(this,i)}};function _P(t){return Vr&&typeof t.timeout=="number"&&t.ontimeout!==void 0}V.ua=function(){typeof dh<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pt(this,"timeout"),this.abort(8))};function wp(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,_y(t),Cc(t)}function _y(t){t.F||(t.F=!0,pt(t,"complete"),pt(t,"error"))}V.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,pt(this,"complete"),pt(this,"abort"),Cc(this))};V.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cc(this,!0)),He.$.N.call(this)};V.La=function(){this.s||(this.G||this.v||this.l?yy(this):this.kb())};V.kb=function(){yy(this)};function yy(t){if(t.h&&typeof dh<"u"&&(!t.C[1]||yn(t)!=4||t.da()!=2)){if(t.v&&yn(t)==4)Th(t.La,0,t);else if(pt(t,"readystatechange"),yn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=o===0){var r=String(t.I).match(oy)[1]||null;!r&&oe.self&&oe.self.location&&(r=oe.self.location.protocol.slice(0,-1)),s=!mP.test(r?r.toLowerCase():"")}n=s}if(n)pt(t,"complete"),pt(t,"success");else{t.m=6;try{var i=2<yn(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",_y(t)}}finally{Cc(t)}}}}function Cc(t,e){if(t.g){vy(t);const n=t.g,s=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||pt(t,"ready");try{n.onreadystatechange=s}catch{}}}function vy(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(oe.clearTimeout(t.A),t.A=null)}V.isActive=function(){return!!this.g};function yn(t){return t.g?t.g.readyState:0}V.da=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}};V.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};V.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),pP(e)}};function Ep(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case gy:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function yP(t){const e={};t=(t.g&&2<=yn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let s=0;s<t.length;s++){if(Ki(t[s]))continue;var n=qS(t[s]);const r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[r]||[];e[r]=i,i.push(n)}LS(e,function(s){return s.join(", ")})}V.Ia=function(){return this.m};V.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Iy(t){let e="";return mh(t,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function Dh(t,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=Iy(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):xe(t,e,n))}function li(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function wy(t){this.Ga=0,this.j=[],this.l=new Ec,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=li("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=li("baseRetryDelayMs",5e3,t),this.hb=li("retryDelaySeedMs",1e4,t),this.eb=li("forwardChannelMaxRetries",2,t),this.xa=li("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new uy(t&&t.concurrentRequestLimit),this.Ja=new hP,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}V=wy.prototype;V.ra=8;V.H=1;function Ch(t){if(Ey(t),t.H==3){var e=t.W++,n=Fn(t.I);if(xe(n,"SID",t.K),xe(n,"RID",e),xe(n,"TYPE","terminate"),bo(t,n),e=new wo(t,t.l,e),e.L=2,e.A=Sc(Fn(n)),n=!1,oe.navigator&&oe.navigator.sendBeacon)try{n=oe.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&oe.Image&&(new Image().src=e.A,n=!0),n||(e.g=Cy(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Eo(e)}Py(t)}function kc(t){t.g&&(Nh(t),t.g.cancel(),t.g=null)}function Ey(t){kc(t),t.u&&(oe.clearTimeout(t.u),t.u=null),Ma(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&oe.clearTimeout(t.m),t.m=null)}function Nc(t){if(!hy(t.i)&&!t.m){t.m=!0;var e=t.Na;Qi||j_(),Xi||(Qi(),Xi=!0),wh.add(e,t),t.C=0}}function vP(t,e){return dy(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=vo(bt(t.Na,t,e),Sy(t,t.C)),t.C++,!0)}V.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new wo(this,this.l,t);let i=this.s;if(this.U&&(i?(i=L_(i),V_(i,this.U)):i=this.U),this.o!==null||this.O||(r.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var s=this.j[n];if("__data__"in s.map&&(s=s.map.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(e+=s,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Ty(this,r,e),n=Fn(this.I),xe(n,"RID",t),xe(n,"CVER",22),this.F&&xe(n,"X-HTTP-Session-Id",this.F),bo(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(Iy(i)))+"&"+e:this.o&&Dh(n,this.o,i)),Sh(this.i,r),this.bb&&xe(n,"TYPE","init"),this.P?(xe(n,"$req",e),xe(n,"SID","null"),r.aa=!0,du(r,n,null)):du(r,n,e),this.H=2}}else this.H==3&&(t?Tp(this,t):this.j.length==0||hy(this.i)||Tp(this))};function Tp(t,e){var n;e?n=e.m:n=t.W++;const s=Fn(t.I);xe(s,"SID",t.K),xe(s,"RID",n),xe(s,"AID",t.V),bo(t,s),t.o&&t.s&&Dh(s,t.o,t.s),n=new wo(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Ty(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Sh(t.i,n),du(n,s,e)}function bo(t,e){t.na&&mh(t.na,function(n,s){xe(e,s,n)}),t.h&&iy({},function(n,s){xe(e,s,n)})}function Ty(t,e,n){n=Math.min(t.j.length,n);var s=t.h?bt(t.h.Va,t.h,t):null;e:{var r=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=r[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let c=0;c<n;c++){let l=r[c].g;const h=r[c].map;if(l-=i,0>l)i=Math.max(0,r[c].g-100),a=!1;else try{dP(h,o,"req"+l+"_")}catch{s&&s(h)}}if(a){s=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,s}function by(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Qi||j_(),Xi||(Qi(),Xi=!0),wh.add(e,t),t.A=0}}function kh(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=vo(bt(t.Ma,t),Sy(t,t.A)),t.A++,!0)}V.Ma=function(){if(this.u=null,Ay(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=vo(bt(this.jb,this),t)}};V.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Mt(10),kc(this),Ay(this))};function Nh(t){t.B!=null&&(oe.clearTimeout(t.B),t.B=null)}function Ay(t){t.g=new wo(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Fn(t.wa);xe(e,"RID","rpc"),xe(e,"SID",t.K),xe(e,"AID",t.V),xe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&xe(e,"TO",t.qa),xe(e,"TYPE","xmlhttp"),bo(t,e),t.o&&t.s&&Dh(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Sc(Fn(e)),n.u=null,n.S=!0,ty(n,t)}V.ib=function(){this.v!=null&&(this.v=null,kc(this),kh(this),Mt(19))};function Ma(t){t.v!=null&&(oe.clearTimeout(t.v),t.v=null)}function Ry(t,e){var n=null;if(t.g==e){Ma(t),Nh(t),t.g=null;var s=2}else if(pu(t.i,e))n=e.F,fy(t.i,e),s=1;else return;if(t.H!=0){if(e.i)if(s==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;s=Tc(),pt(s,new Q_(s,n)),Nc(t)}else by(t);else if(r=e.s,r==3||r==0&&0<e.ca||!(s==1&&vP(t,e)||s==2&&kh(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Vs(t,5);break;case 4:Vs(t,10);break;case 3:Vs(t,6);break;default:Vs(t,2)}}}function Sy(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Vs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var s=bt(t.pb,t);n||(n=new qs("//www.google.com/images/cleardot.gif"),oe.location&&oe.location.protocol=="http"||ka(n,"https"),Sc(n)),fP(n.toString(),s)}else Mt(2);t.H=0,t.h&&t.h.za(e),Py(t),Ey(t)}V.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Mt(2)):(this.l.info("Failed to ping google.com"),Mt(1))};function Py(t){if(t.H=0,t.ma=[],t.h){const e=py(t.i);(e.length!=0||t.j.length!=0)&&(fp(t.ma,e),fp(t.ma,t.j),t.i.i.length=0,fh(t.j),t.j.length=0),t.h.ya()}}function Dy(t,e,n){var s=n instanceof qs?Fn(n):new qs(n);if(s.g!="")e&&(s.g=e+"."+s.g),Na(s,s.m);else{var r=oe.location;s=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var i=new qs(null);s&&ka(i,s),e&&(i.g=e),r&&Na(i,r),n&&(i.l=n),s=i}return n=t.F,e=t.Da,n&&e&&xe(s,n,e),xe(s,"VER",t.ra),bo(t,s),s}function Cy(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new He(new Pc({ob:n})):new He(t.va),e.Oa(t.J),e}V.isActive=function(){return!!this.h&&this.h.isActive(this)};function ky(){}V=ky.prototype;V.Ba=function(){};V.Aa=function(){};V.za=function(){};V.ya=function(){};V.isActive=function(){return!0};V.Va=function(){};function Oa(){if(Vr&&!(10<=Number(NS)))throw Error("Environmental error: no available transport.")}Oa.prototype.g=function(t,e){return new zt(t,e)};function zt(t,e){lt.call(this),this.g=new wy(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ki(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ki(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Qr(this)}ut(zt,lt);zt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Mt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Dy(t,null,t.Y),Nc(t)};zt.prototype.close=function(){Ch(this.g)};zt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ih(t),t=n);e.j.push(new cP(e.fb++,t)),e.H==3&&Nc(e)};zt.prototype.N=function(){this.g.h=null,delete this.j,Ch(this.g),delete this.g,zt.$.N.call(this)};function Ny(t){Ah.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ut(Ny,Ah);function My(){Rh.call(this),this.status=1}ut(My,Rh);function Qr(t){this.g=t}ut(Qr,ky);Qr.prototype.Ba=function(){pt(this.g,"a")};Qr.prototype.Aa=function(t){pt(this.g,new Ny(t))};Qr.prototype.za=function(t){pt(this.g,new My)};Qr.prototype.ya=function(){pt(this.g,"b")};function IP(){this.blockSize=-1}function an(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ut(an,IP);an.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Sl(t,e,n){n||(n=0);var s=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)s[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)s[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var i=t.g[3],o=e+(i^n&(r^i))+s[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(r^e&(n^r))+s[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=r+(n^i&(e^n))+s[2]+606105819&4294967295,r=i+(o<<17&4294967295|o>>>15),o=n+(e^r&(i^e))+s[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(i^n&(r^i))+s[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(r^e&(n^r))+s[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=r+(n^i&(e^n))+s[6]+2821735955&4294967295,r=i+(o<<17&4294967295|o>>>15),o=n+(e^r&(i^e))+s[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(i^n&(r^i))+s[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(r^e&(n^r))+s[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=r+(n^i&(e^n))+s[10]+4294925233&4294967295,r=i+(o<<17&4294967295|o>>>15),o=n+(e^r&(i^e))+s[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(i^n&(r^i))+s[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(r^e&(n^r))+s[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=r+(n^i&(e^n))+s[14]+2792965006&4294967295,r=i+(o<<17&4294967295|o>>>15),o=n+(e^r&(i^e))+s[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^i&(n^r))+s[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^r&(e^n))+s[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(i^e))+s[11]+643717713&4294967295,r=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(r^i))+s[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^i&(n^r))+s[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^r&(e^n))+s[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(i^e))+s[15]+3634488961&4294967295,r=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(r^i))+s[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^i&(n^r))+s[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^r&(e^n))+s[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(i^e))+s[3]+4107603335&4294967295,r=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(r^i))+s[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^i&(n^r))+s[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^r&(e^n))+s[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(i^e))+s[7]+1735328473&4294967295,r=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(r^i))+s[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^i)+s[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^r)+s[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=r+(i^e^n)+s[11]+1839030562&4294967295,r=i+(o<<16&4294967295|o>>>16),o=n+(r^i^e)+s[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^i)+s[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^r)+s[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=r+(i^e^n)+s[7]+4139469664&4294967295,r=i+(o<<16&4294967295|o>>>16),o=n+(r^i^e)+s[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^i)+s[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^r)+s[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=r+(i^e^n)+s[3]+3572445317&4294967295,r=i+(o<<16&4294967295|o>>>16),o=n+(r^i^e)+s[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^i)+s[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^r)+s[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=r+(i^e^n)+s[15]+530742520&4294967295,r=i+(o<<16&4294967295|o>>>16),o=n+(r^i^e)+s[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~i))+s[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~r))+s[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=r+(e^(i|~n))+s[14]+2878612391&4294967295,r=i+(o<<15&4294967295|o>>>17),o=n+(i^(r|~e))+s[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~i))+s[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~r))+s[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=r+(e^(i|~n))+s[10]+4293915773&4294967295,r=i+(o<<15&4294967295|o>>>17),o=n+(i^(r|~e))+s[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~i))+s[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~r))+s[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=r+(e^(i|~n))+s[6]+2734768916&4294967295,r=i+(o<<15&4294967295|o>>>17),o=n+(i^(r|~e))+s[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~i))+s[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~r))+s[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=r+(e^(i|~n))+s[2]+718787259&4294967295,r=i+(o<<15&4294967295|o>>>17),o=n+(i^(r|~e))+s[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+i&4294967295}an.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,s=this.m,r=this.h,i=0;i<e;){if(r==0)for(;i<=n;)Sl(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(s[r++]=t.charCodeAt(i++),r==this.blockSize){Sl(this,s),r=0;break}}else for(;i<e;)if(s[r++]=t[i++],r==this.blockSize){Sl(this,s),r=0;break}}this.h=r,this.i+=e};an.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var s=0;32>s;s+=8)t[n++]=this.g[e]>>>s&255;return t};function Se(t,e){this.h=e;for(var n=[],s=!0,r=t.length-1;0<=r;r--){var i=t[r]|0;s&&i==e||(n[r]=i,s=!1)}this.g=n}var wP={};function Mh(t){return-128<=t&&128>t?DS(t,function(e){return new Se([e|0],0>e?-1:0)}):new Se([t|0],0>t?-1:0)}function vn(t){if(isNaN(t)||!isFinite(t))return Dr;if(0>t)return dt(vn(-t));for(var e=[],n=1,s=0;t>=n;s++)e[s]=t/n|0,n*=mu;return new Se(e,0)}function Oy(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return dt(Oy(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=vn(Math.pow(e,8)),s=Dr,r=0;r<t.length;r+=8){var i=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+i),e);8>i?(i=vn(Math.pow(e,i)),s=s.R(i).add(vn(o))):(s=s.R(n),s=s.add(vn(o)))}return s}var mu=4294967296,Dr=Mh(0),gu=Mh(1),bp=Mh(16777216);V=Se.prototype;V.ea=function(){if(Kt(this))return-dt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var s=this.D(n);t+=(0<=s?s:mu+s)*e,e*=mu}return t};V.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Ln(this))return"0";if(Kt(this))return"-"+dt(this).toString(t);for(var e=vn(Math.pow(t,6)),n=this,s="";;){var r=La(n,e).g;n=xa(n,r.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Ln(n))return i+s;for(;6>i.length;)i="0"+i;s=i+s}};V.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Ln(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Kt(t){return t.h==-1}V.X=function(t){return t=xa(this,t),Kt(t)?-1:Ln(t)?0:1};function dt(t){for(var e=t.g.length,n=[],s=0;s<e;s++)n[s]=~t.g[s];return new Se(n,~t.h).add(gu)}V.abs=function(){return Kt(this)?dt(this):this};V.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0,r=0;r<=e;r++){var i=s+(this.D(r)&65535)+(t.D(r)&65535),o=(i>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);s=o>>>16,i&=65535,o&=65535,n[r]=o<<16|i}return new Se(n,n[n.length-1]&-2147483648?-1:0)};function xa(t,e){return t.add(dt(e))}V.R=function(t){if(Ln(this)||Ln(t))return Dr;if(Kt(this))return Kt(t)?dt(this).R(dt(t)):dt(dt(this).R(t));if(Kt(t))return dt(this.R(dt(t)));if(0>this.X(bp)&&0>t.X(bp))return vn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],s=0;s<2*e;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var r=0;r<t.g.length;r++){var i=this.D(s)>>>16,o=this.D(s)&65535,a=t.D(r)>>>16,c=t.D(r)&65535;n[2*s+2*r]+=o*c,Wo(n,2*s+2*r),n[2*s+2*r+1]+=i*c,Wo(n,2*s+2*r+1),n[2*s+2*r+1]+=o*a,Wo(n,2*s+2*r+1),n[2*s+2*r+2]+=i*a,Wo(n,2*s+2*r+2)}for(s=0;s<e;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=e;s<2*e;s++)n[s]=0;return new Se(n,0)};function Wo(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ui(t,e){this.g=t,this.h=e}function La(t,e){if(Ln(e))throw Error("division by zero");if(Ln(t))return new ui(Dr,Dr);if(Kt(t))return e=La(dt(t),e),new ui(dt(e.g),dt(e.h));if(Kt(e))return e=La(t,dt(e)),new ui(dt(e.g),e.h);if(30<t.g.length){if(Kt(t)||Kt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=gu,s=e;0>=s.X(t);)n=Ap(n),s=Ap(s);var r=pr(n,1),i=pr(s,1);for(s=pr(s,2),n=pr(n,2);!Ln(s);){var o=i.add(s);0>=o.X(t)&&(r=r.add(n),i=o),s=pr(s,1),n=pr(n,1)}return e=xa(t,r.R(e)),new ui(r,e)}for(r=Dr;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),s=Math.ceil(Math.log(n)/Math.LN2),s=48>=s?1:Math.pow(2,s-48),i=vn(n),o=i.R(e);Kt(o)||0<o.X(t);)n-=s,i=vn(n),o=i.R(e);Ln(i)&&(i=gu),r=r.add(i),t=xa(t,o)}return new ui(r,t)}V.gb=function(t){return La(this,t).h};V.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)&t.D(s);return new Se(n,this.h&t.h)};V.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)|t.D(s);return new Se(n,this.h|t.h)};V.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)^t.D(s);return new Se(n,this.h^t.h)};function Ap(t){for(var e=t.g.length+1,n=[],s=0;s<e;s++)n[s]=t.D(s)<<1|t.D(s-1)>>>31;return new Se(n,t.h)}function pr(t,e){var n=e>>5;e%=32;for(var s=t.g.length-n,r=[],i=0;i<s;i++)r[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new Se(r,t.h)}Oa.prototype.createWebChannel=Oa.prototype.g;zt.prototype.send=zt.prototype.u;zt.prototype.open=zt.prototype.m;zt.prototype.close=zt.prototype.close;bc.NO_ERROR=0;bc.TIMEOUT=8;bc.HTTP_ERROR=6;X_.COMPLETE="complete";J_.EventType=Io;Io.OPEN="a";Io.CLOSE="b";Io.ERROR="c";Io.MESSAGE="d";lt.prototype.listen=lt.prototype.O;He.prototype.listenOnce=He.prototype.P;He.prototype.getLastError=He.prototype.Sa;He.prototype.getLastErrorCode=He.prototype.Ia;He.prototype.getStatus=He.prototype.da;He.prototype.getResponseJson=He.prototype.Wa;He.prototype.getResponseText=He.prototype.ja;He.prototype.send=He.prototype.ha;He.prototype.setWithCredentials=He.prototype.Oa;an.prototype.digest=an.prototype.l;an.prototype.reset=an.prototype.reset;an.prototype.update=an.prototype.j;Se.prototype.add=Se.prototype.add;Se.prototype.multiply=Se.prototype.R;Se.prototype.modulo=Se.prototype.gb;Se.prototype.compare=Se.prototype.X;Se.prototype.toNumber=Se.prototype.ea;Se.prototype.toString=Se.prototype.toString;Se.prototype.getBits=Se.prototype.D;Se.fromNumber=vn;Se.fromString=Oy;var EP=function(){return new Oa},TP=function(){return Tc()},Pl=bc,bP=X_,AP=rr,Rp={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},zo=J_,RP=He,SP=an,Cr=Se;const Sp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xr="10.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=new Ju("@firebase/firestore");function hi(){return Qs.logLevel}function L(t,...e){if(Qs.logLevel<=ge.DEBUG){const n=e.map(Oh);Qs.debug(`Firestore (${Xr}): ${t}`,...n)}}function Dn(t,...e){if(Qs.logLevel<=ge.ERROR){const n=e.map(Oh);Qs.error(`Firestore (${Xr}): ${t}`,...n)}}function Ur(t,...e){if(Qs.logLevel<=ge.WARN){const n=e.map(Oh);Qs.warn(`Firestore (${Xr}): ${t}`,...n)}}function Oh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${Xr}) INTERNAL ASSERTION FAILED: `+t;throw Dn(e),new Error(e)}function ke(t,e){t||ie()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(It.UNAUTHENTICATED))}shutdown(){}}class DP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class CP{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new An;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new An,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new An)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ke(typeof s.accessToken=="string"),new xy(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string"),new It(e)}}class kP{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=It.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class NP{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new kP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class MP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const s=i=>{i.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,L("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?r(i):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ke(typeof n.token=="string"),this.R=n.token,new MP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const r=xP(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%e.length))}return s}}function Ee(t,e){return t<e?-1:t>e?1:0}function Fr(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new tt(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new tt(0,0))}static max(){return new ce(new tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n,s){n===void 0?n=0:n>e.length&&ie(),s===void 0?s=e.length-n:s>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return no.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof no?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=e.get(r),o=n.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Le extends no{construct(e,n,s){return new Le(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new G(E.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const LP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends no{construct(e,n,s){return new ft(e,n,s)}static isValidIdentifier(e){return LP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ft(["__name__"])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new G(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new G(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new G(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new G(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(n)}static emptyPath(){return new ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Le.fromString(e))}static fromName(e){return new Z(Le.fromString(e).popFirst(5))}static empty(){return new Z(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Le(e.slice()))}}function VP(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ce.fromTimestamp(s===1e9?new tt(n+1,0):new tt(n,s));return new ps(r,Z.empty(),e)}function UP(t){return new ps(t.readTime,t.key,-1)}class ps{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ps(ce.min(),Z.empty(),-1)}static max(){return new ps(ce.max(),Z.empty(),-1)}}function FP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(t){if(t.code!==E.FAILED_PRECONDITION||t.message!==$P)throw t;L("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new R((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof R?n:R.resolve(n)}catch(n){return R.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):R.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):R.reject(n)}static resolve(e){return new R((n,s)=>{n(e)})}static reject(e){return new R((n,s)=>{s(e)})}static waitFor(e){return new R((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=R.resolve(!1);for(const s of e)n=n.next(r=>r?R.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new R((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const l=c;n(e[l]).next(h=>{o[l]=h,++a,a===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new R((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new An,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ki(e,n.error)):this.V.resolve()},this.transaction.onerror=s=>{const r=Lh(s.target.error);this.V.reject(new ki(e,r))}}static open(e,n,s,r){try{return new xh(n,e.transaction(r,s))}catch(i){throw new ki(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(L("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new qP(n)}}class Us{constructor(e,n,s){this.name=e,this.version=n,this.p=s,Us.S(Xe())===12.2&&Dn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return L("SimpleDb","Removing database:",e),Ms(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Hg())return!1;if(Us.C())return!0;const e=Xe(),n=Us.S(e),s=0<n&&n<10,r=Us.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||i)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static v(e){const n=e.match(/Android ([\d.]+)/i),s=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(s)}async O(e){return this.db||(L("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,s)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=i=>{const o=i.target.result;n(o)},r.onblocked=()=>{s(new ki(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=i=>{const o=i.target.error;o.name==="VersionError"?s(new G(E.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?s(new G(E.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):s(new ki(e,o))},r.onupgradeneeded=i=>{L("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,r.transaction,i.oldVersion,this.version).next(()=>{L("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,s,r){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=xh.open(this.db,e,i?"readonly":"readwrite",s),c=r(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),R.reject(l))).toPromise();return c.catch(()=>{}),await a.m,c}catch(a){const c=a,l=c.name!=="FirebaseError"&&o<3;if(L("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}class GP{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ms(this.k.delete())}}class ki extends G{constructor(e,n){super(E.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ro(t){return t.name==="IndexedDbTransactionError"}class qP{constructor(e){this.store=e}put(e,n){let s;return n!==void 0?(L("SimpleDb","PUT",this.store.name,e,n),s=this.store.put(n,e)):(L("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Ms(s)}add(e){return L("SimpleDb","ADD",this.store.name,e,e),Ms(this.store.add(e))}get(e){return Ms(this.store.get(e)).next(n=>(n===void 0&&(n=null),L("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return L("SimpleDb","DELETE",this.store.name,e),Ms(this.store.delete(e))}count(){return L("SimpleDb","COUNT",this.store.name),Ms(this.store.count())}W(e,n){const s=this.options(e,n),r=s.index?this.store.index(s.index):this.store;if(typeof r.getAll=="function"){const i=r.getAll(s.range);return new R((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(s),o=[];return this.G(i,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){const s=this.store.getAll(e,n===null?void 0:n);return new R((r,i)=>{s.onerror=o=>{i(o.target.error)},s.onsuccess=o=>{r(o.target.result)}})}H(e,n){L("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,n);s.J=!1;const r=this.cursor(s);return this.G(r,(i,o,a)=>a.delete())}Y(e,n){let s;n?s=e:(s={},n=e);const r=this.cursor(s);return this.G(r,n)}Z(e){const n=this.cursor({});return new R((s,r)=>{n.onerror=i=>{const o=Lh(i.target.error);r(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():s()}):s()}})}G(e,n){const s=[];return new R((r,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const c=new GP(a),l=n(a.primaryKey,a.value,c);if(l instanceof R){const h=l.catch(d=>(c.done(),R.reject(d)));s.push(h)}c.isDone?r():c.$===null?a.continue():a.continue(c.$)}}).next(()=>R.waitFor(s))}options(e,n){let s;return e!==void 0&&(typeof e=="string"?s=e:n=e),{index:s,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const s=this.store.index(e.index);return e.J?s.openKeyCursor(e.range,n):s.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ms(t){return new R((e,n)=>{t.onsuccess=s=>{const r=s.target.result;e(r)},t.onerror=s=>{const r=Lh(s.target.error);n(r)}})}let Pp=!1;function Lh(t){const e=Us.S(Xe());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const s=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Pp||(Pp=!0,setTimeout(()=>{throw s},0)),s}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.se(s),this.oe=s=>n.writeSequenceNumber(s))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}Vh._e=-1;function Mc(t){return t==null}function Va(t){return t===0&&1/t==-1/0}function jP(t){return typeof t=="number"&&Number.isInteger(t)&&!Va(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ir(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Vy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ko(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ko(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ko(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ko(this.root,e,this.comparator,!0)}}class Ko{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??ht.RED,this.left=r??ht.EMPTY,this.right=i??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new ht(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ht.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,s,r,i){return this}insert(e,n,s){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Cp(this.data.getIterator())}getIteratorFrom(e){return new Cp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class Cp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new jt([])}unionWith(e){let n=new mt(ft.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fr(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Uy("Invalid base64 string: "+i):i}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const HP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(t){if(ke(!!t),typeof t=="string"){let e=0;const n=HP.exec(t);if(ke(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xs(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Fh(t){const e=t.mapValue.fields.__previous_value__;return Uh(e)?Fh(e):e}function so(t){const e=ms(t.mapValue.fields.__local_write_time__.timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,n,s,r,i,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class ro{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ro("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ro&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Uh(t)?4:zP(t)?9007199254740991:10:ie()}function Cn(t,e){if(t===e)return!0;const n=Js(t);if(n!==Js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return so(t).isEqual(so(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=ms(r.timestampValue),a=ms(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Xs(r.bytesValue).isEqual(Xs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Ye(r.geoPointValue.latitude)===Ye(i.geoPointValue.latitude)&&Ye(r.geoPointValue.longitude)===Ye(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ye(r.integerValue)===Ye(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Ye(r.doubleValue),a=Ye(i.doubleValue);return o===a?Va(o)===Va(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Fr(t.arrayValue.values||[],e.arrayValue.values||[],Cn);case 10:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(Dp(o)!==Dp(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Cn(o[c],a[c])))return!1;return!0}(t,e);default:return ie()}}function io(t,e){return(t.values||[]).find(n=>Cn(n,e))!==void 0}function $r(t,e){if(t===e)return 0;const n=Js(t),s=Js(e);if(n!==s)return Ee(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ye(i.integerValue||i.doubleValue),c=Ye(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return kp(t.timestampValue,e.timestampValue);case 4:return kp(so(t),so(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Xs(i),c=Xs(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const h=Ee(a[l],c[l]);if(h!==0)return h}return Ee(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ee(Ye(i.latitude),Ye(o.latitude));return a!==0?a:Ee(Ye(i.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){const h=$r(a[l],c[l]);if(h)return h}return Ee(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Yo.mapValue&&o===Yo.mapValue)return 0;if(i===Yo.mapValue)return 1;if(o===Yo.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let d=0;d<c.length&&d<h.length;++d){const f=Ee(c[d],h[d]);if(f!==0)return f;const m=$r(a[c[d]],l[h[d]]);if(m!==0)return m}return Ee(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ie()}}function kp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=ms(t),s=ms(e),r=Ee(n.seconds,s.seconds);return r!==0?r:Ee(n.nanos,s.nanos)}function Br(t){return _u(t)}function _u(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=ms(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=_u(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${_u(n.fields[o])}`;return r+"}"}(t.mapValue):ie()}function Np(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function yu(t){return!!t&&"integerValue"in t}function $h(t){return!!t&&"arrayValue"in t}function Mp(t){return!!t&&"nullValue"in t}function Op(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ua(t){return!!t&&"mapValue"in t}function Ni(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ir(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Ni(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ni(t.arrayValue.values[n]);return e}return Object.assign({},t)}function zP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.value=e}static empty(){return new Vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!ua(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ni(n)}setAll(e){let n=ft.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=Ni(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());ua(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];ua(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){ir(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Vt(Ni(this.value))}}function Fy(t){const e=[];return ir(t.fields,(n,s)=>{const r=new ft([n]);if(ua(s)){const i=Fy(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new wt(e,0,ce.min(),ce.min(),ce.min(),Vt.empty(),0)}static newFoundDocument(e,n,s,r){return new wt(e,1,n,ce.min(),s,r,0)}static newNoDocument(e,n){return new wt(e,2,n,ce.min(),ce.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new wt(e,3,n,ce.min(),ce.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n){this.position=e,this.inclusive=n}}function xp(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=Z.comparator(Z.fromName(o.referenceValue),n.key):s=$r(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Lp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n="asc"){this.field=e,this.dir=n}}function KP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{}class Qe extends $y{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new QP(e,n,s):n==="array-contains"?new ZP(e,s):n==="in"?new e1(e,s):n==="not-in"?new t1(e,s):n==="array-contains-any"?new n1(e,s):new Qe(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new XP(e,s):new JP(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison($r(n,this.value)):n!==null&&Js(this.value)===Js(n)&&this.matchesComparison($r(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cn extends $y{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new cn(e,n)}matches(e){return By(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function By(t){return t.op==="and"}function Gy(t){return YP(t)&&By(t)}function YP(t){for(const e of t.filters)if(e instanceof cn)return!1;return!0}function vu(t){if(t instanceof Qe)return t.field.canonicalString()+t.op.toString()+Br(t.value);if(Gy(t))return t.filters.map(e=>vu(e)).join(",");{const e=t.filters.map(n=>vu(n)).join(",");return`${t.op}(${e})`}}function qy(t,e){return t instanceof Qe?function(s,r){return r instanceof Qe&&s.op===r.op&&s.field.isEqual(r.field)&&Cn(s.value,r.value)}(t,e):t instanceof cn?function(s,r){return r instanceof cn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,a)=>i&&qy(o,r.filters[a]),!0):!1}(t,e):void ie()}function jy(t){return t instanceof Qe?function(n){return`${n.field.canonicalString()} ${n.op} ${Br(n.value)}`}(t):t instanceof cn?function(n){return n.op.toString()+" {"+n.getFilters().map(jy).join(" ,")+"}"}(t):"Filter"}class QP extends Qe{constructor(e,n,s){super(e,n,s),this.key=Z.fromName(s.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class XP extends Qe{constructor(e,n){super(e,"in",n),this.keys=Hy("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class JP extends Qe{constructor(e,n){super(e,"not-in",n),this.keys=Hy("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Hy(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Z.fromName(s.referenceValue))}class ZP extends Qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $h(n)&&io(n.arrayValue,this.value)}}class e1 extends Qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&io(this.value.arrayValue,n)}}class t1 extends Qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(io(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!io(this.value.arrayValue,n)}}class n1 extends Qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$h(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>io(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function Vp(t,e=null,n=[],s=[],r=null,i=null,o=null){return new s1(t,e,n,s,r,i,o)}function Bh(t){const e=le(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>vu(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Mc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Br(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Br(s)).join(",")),e.ce=n}return e.ce}function Gh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!KP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qy(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Lp(t.startAt,e.startAt)&&Lp(t.endAt,e.endAt)}function Iu(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function r1(t,e,n,s,r,i,o,a){return new Jr(t,e,n,s,r,i,o,a)}function Oc(t){return new Jr(t)}function Up(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Wy(t){return t.collectionGroup!==null}function Mi(t){const e=le(t);if(e.le===null){e.le=[];const n=new Set;for(const i of e.explicitOrderBy)e.le.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new mt(ft.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.le.push(new oo(i,s))}),n.has(ft.keyField().canonicalString())||e.le.push(new oo(ft.keyField(),s))}return e.le}function Rn(t){const e=le(t);return e.he||(e.he=i1(e,Mi(t))),e.he}function i1(t,e){if(t.limitType==="F")return Vp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new oo(r.field,i)});const n=t.endAt?new Ua(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ua(t.startAt.position,t.startAt.inclusive):null;return Vp(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function wu(t,e){const n=t.filters.concat([e]);return new Jr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fa(t,e,n){return new Jr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xc(t,e){return Gh(Rn(t),Rn(e))&&t.limitType===e.limitType}function zy(t){return`${Bh(Rn(t))}|lt:${t.limitType}`}function yr(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>jy(r)).join(", ")}]`),Mc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Br(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Br(r)).join(",")),`Target(${s})`}(Rn(t))}; limitType=${t.limitType})`}function Lc(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):Z.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of Mi(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,a,c){const l=xp(o,a,c);return o.inclusive?l<=0:l<0}(s.startAt,Mi(s),r)||s.endAt&&!function(o,a,c){const l=xp(o,a,c);return o.inclusive?l>=0:l>0}(s.endAt,Mi(s),r))}(t,e)}function o1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ky(t){return(e,n)=>{let s=!1;for(const r of Mi(t)){const i=a1(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function a1(t,e,n){const s=t.field.isKeyField()?Z.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),l=a.data.field(i);return c!==null&&l!==null?$r(c,l):ie()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ir(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return Vy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new Ge(Z.comparator);function $n(){return c1}const Yy=new Ge(Z.comparator);function vi(...t){let e=Yy;for(const n of t)e=e.insert(n.key,n);return e}function Qy(t){let e=Yy;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Fs(){return Oi()}function Xy(){return Oi()}function Oi(){return new Zr(t=>t.toString(),(t,e)=>t.isEqual(e))}const l1=new Ge(Z.comparator),u1=new mt(Z.comparator);function me(...t){let e=u1;for(const n of t)e=e.add(n);return e}const h1=new mt(Ee);function d1(){return h1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Va(e)?"-0":e}}function Zy(t){return{integerValue:""+t}}function f1(t,e){return jP(e)?Zy(e):Jy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(){this._=void 0}}function p1(t,e,n){return t instanceof ao?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Uh(i)&&(i=Fh(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Gr?tv(t,e):t instanceof qr?nv(t,e):function(r,i){const o=ev(r,i),a=Fp(o)+Fp(r.Ie);return yu(o)&&yu(r.Ie)?Zy(a):Jy(r.serializer,a)}(t,e)}function m1(t,e,n){return t instanceof Gr?tv(t,e):t instanceof qr?nv(t,e):n}function ev(t,e){return t instanceof $a?function(s){return yu(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class ao extends Vc{}class Gr extends Vc{constructor(e){super(),this.elements=e}}function tv(t,e){const n=sv(e);for(const s of t.elements)n.some(r=>Cn(r,s))||n.push(s);return{arrayValue:{values:n}}}class qr extends Vc{constructor(e){super(),this.elements=e}}function nv(t,e){let n=sv(e);for(const s of t.elements)n=n.filter(r=>!Cn(r,s));return{arrayValue:{values:n}}}class $a extends Vc{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Fp(t){return Ye(t.integerValue||t.doubleValue)}function sv(t){return $h(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this.field=e,this.transform=n}}function g1(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof Gr&&r instanceof Gr||s instanceof qr&&r instanceof qr?Fr(s.elements,r.elements,Cn):s instanceof $a&&r instanceof $a?Cn(s.Ie,r.Ie):s instanceof ao&&r instanceof ao}(t.transform,e.transform)}class _1{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ha(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Uc{}function rv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jh(t.key,sn.none()):new So(t.key,t.data,sn.none());{const n=t.data,s=Vt.empty();let r=new mt(ft.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Ts(t.key,s,new jt(r.toArray()),sn.none())}}function y1(t,e,n){t instanceof So?function(r,i,o){const a=r.value.clone(),c=Bp(r.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ts?function(r,i,o){if(!ha(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Bp(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(iv(r)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xi(t,e,n,s){return t instanceof So?function(i,o,a,c){if(!ha(i.precondition,o))return a;const l=i.value.clone(),h=Gp(i.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,s):t instanceof Ts?function(i,o,a,c){if(!ha(i.precondition,o))return a;const l=Gp(i.fieldTransforms,c,o),h=o.data;return h.setAll(iv(i)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,s):function(i,o,a){return ha(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function v1(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=ev(s.transform,r||null);i!=null&&(n===null&&(n=Vt.empty()),n.set(s.field,i))}return n||null}function $p(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Fr(s,r,(i,o)=>g1(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class So extends Uc{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ts extends Uc{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function iv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Bp(t,e,n){const s=new Map;ke(t.length===n.length);for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,m1(o,a,n[r]))}return s}function Gp(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,p1(i,o,e))}return s}class jh extends Uc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class I1 extends Uc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&y1(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=xi(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=xi(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Xy();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const c=rv(o,a);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ce.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&Fr(this.mutations,e.mutations,(n,s)=>$p(n,s))&&Fr(this.baseMutations,e.baseMutations,(n,s)=>$p(n,s))}}class Hh{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){ke(e.mutations.length===s.length);let r=function(){return l1}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Hh(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke,_e;function b1(t){switch(t){default:return ie();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function ov(t){if(t===void 0)return Dn("GRPC error has no .code"),E.UNKNOWN;switch(t){case Ke.OK:return E.OK;case Ke.CANCELLED:return E.CANCELLED;case Ke.UNKNOWN:return E.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return E.INTERNAL;case Ke.UNAVAILABLE:return E.UNAVAILABLE;case Ke.UNAUTHENTICATED:return E.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case Ke.NOT_FOUND:return E.NOT_FOUND;case Ke.ALREADY_EXISTS:return E.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return E.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case Ke.ABORTED:return E.ABORTED;case Ke.OUT_OF_RANGE:return E.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return E.UNIMPLEMENTED;case Ke.DATA_LOSS:return E.DATA_LOSS;default:return ie()}}(_e=Ke||(Ke={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=new Cr([4294967295,4294967295],0);function qp(t){const e=A1().encode(t),n=new SP;return n.update(e),new Uint8Array(n.digest())}function jp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Cr([n,s],0),new Cr([r,i],0)]}class Wh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ii(`Invalid padding: ${n}`);if(s<0)throw new Ii(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ii(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Ii(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Cr.fromNumber(this.Te)}de(e,n,s){let r=e.add(n.multiply(Cr.fromNumber(s)));return r.compare(R1)===1&&(r=new Cr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=qp(e),[s,r]=jp(n);for(let i=0;i<this.hashCount;i++){const o=this.de(s,r,i);if(!this.Ae(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Wh(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=qp(e),[s,r]=jp(n);for(let i=0;i<this.hashCount;i++){const o=this.de(s,r,i);this.Re(o)}}Re(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Ii extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Po.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Fc(ce.min(),r,new Ge(Ee),$n(),me())}}class Po{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Po(s,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n,s,r){this.Ve=e,this.removedTargetIds=n,this.key=s,this.me=r}}class av{constructor(e,n){this.targetId=e,this.fe=n}}class cv{constructor(e,n,s=Pt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Hp{constructor(){this.ge=0,this.pe=zp(),this.ye=Pt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=me(),n=me(),s=me();return this.pe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ie()}}),new Po(this.ye,this.we,e,n,s)}Fe(){this.Se=!1,this.pe=zp()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,ke(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class S1{constructor(e){this.Be=e,this.ke=new Map,this.qe=$n(),this.Qe=Wp(),this.Ke=new Ge(Ee)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.Ce(e.resumeToken);break;case 1:s.Ne(),s.be||s.Fe(),s.Ce(e.resumeToken);break;case 2:s.Ne(),s.be||this.removeTarget(n);break;case 3:this.je(n)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.Ce(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((s,r)=>{this.je(r)&&n(r)})}Je(e){const n=e.targetId,s=e.fe.count,r=this.Ye(n);if(r){const i=r.target;if(Iu(i))if(s===0){const o=new Z(i.path);this.We(n,o,wt.newNoDocument(o,ce.min()))}else ke(s===1);else{const o=this.Ze(n);if(o!==s){const a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=Xs(s).toUint8Array()}catch(c){if(c instanceof Uy)return Ur("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Wh(o,r,i)}catch(c){return Ur(c instanceof Ii?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,s){return n.fe.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Be.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.We(n,i,null),r++)}),r}it(e){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&Iu(a.target)){const c=new Z(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,wt.newNoDocument(c,e))}i.De&&(n.set(o,i.ve()),i.Fe())}});let s=me();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(e));const r=new Fc(e,n,this.Ke,this.qe,s);return this.qe=$n(),this.Qe=Wp(),this.Ke=new Ge(Ee),r}Ue(e,n){if(!this.je(e))return;const s=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,s),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const r=this.ze(e);this.st(e,n)?r.Me(n,1):r.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),s&&(this.qe=this.qe.insert(n,s))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Hp,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new mt(Ee),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Hp),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function Wp(){return new Ge(Z.comparator)}function zp(){return new Ge(Z.comparator)}const P1={asc:"ASCENDING",desc:"DESCENDING"},D1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C1={and:"AND",or:"OR"};class k1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Eu(t,e){return t.useProto3Json||Mc(e)?e:{value:e}}function Ba(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function N1(t,e){return Ba(t,e.toTimestamp())}function Sn(t){return ke(!!t),ce.fromTimestamp(function(n){const s=ms(n);return new tt(s.seconds,s.nanos)}(t))}function zh(t,e){return Tu(t,e).canonicalString()}function Tu(t,e){const n=function(r){return new Le(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function uv(t){const e=Le.fromString(t);return ke(mv(e)),e}function bu(t,e){return zh(t.databaseId,e.path)}function Dl(t,e){const n=uv(e);if(n.get(1)!==t.databaseId.projectId)throw new G(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(dv(n))}function hv(t,e){return zh(t.databaseId,e)}function M1(t){const e=uv(t);return e.length===4?Le.emptyPath():dv(e)}function Au(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dv(t){return ke(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Kp(t,e,n){return{name:bu(t,e),fields:n.value.mapValue.fields}}function O1(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(l,h){return l.useProto3Json?(ke(h===void 0||typeof h=="string"),Pt.fromBase64String(h||"")):(ke(h===void 0||h instanceof Uint8Array),Pt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const h=l.code===void 0?E.UNKNOWN:ov(l.code);return new G(h,l.message||"")}(o);n=new cv(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Dl(t,s.document.name),i=Sn(s.document.updateTime),o=s.document.createTime?Sn(s.document.createTime):ce.min(),a=new Vt({mapValue:{fields:s.document.fields}}),c=wt.newFoundDocument(r,i,o,a),l=s.targetIds||[],h=s.removedTargetIds||[];n=new da(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Dl(t,s.document),i=s.readTime?Sn(s.readTime):ce.min(),o=wt.newNoDocument(r,i),a=s.removedTargetIds||[];n=new da([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Dl(t,s.document),i=s.removedTargetIds||[];n=new da([],i,r,null)}else{if(!("filter"in e))return ie();{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new T1(r,i),a=s.targetId;n=new av(a,o)}}return n}function x1(t,e){let n;if(e instanceof So)n={update:Kp(t,e.key,e.value)};else if(e instanceof jh)n={delete:bu(t,e.key)};else if(e instanceof Ts)n={update:Kp(t,e.key,e.data),updateMask:j1(e.fieldMask)};else{if(!(e instanceof I1))return ie();n={verify:bu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const a=o.transform;if(a instanceof ao)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $a)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw ie()}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:N1(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function L1(t,e){return t&&t.length>0?(ke(e!==void 0),t.map(n=>function(r,i){let o=r.updateTime?Sn(r.updateTime):Sn(i);return o.isEqual(ce.min())&&(o=Sn(i)),new _1(o,r.transformResults||[])}(n,e))):[]}function V1(t,e){return{documents:[hv(t,e.path)]}}function U1(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=hv(t,r);const i=function(l){if(l.length!==0)return pv(cn.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(l){if(l.length!==0)return l.map(h=>function(f){return{field:vr(f.field),direction:B1(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Eu(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:r}}function F1(t){let e=M1(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){ke(s===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const f=fv(d);return f instanceof cn&&Gy(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(I){return new oo(Ir(I.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Mc(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(d){const f=!!d.before,m=d.values||[];return new Ua(m,f)}(n.startAt));let l=null;return n.endAt&&(l=function(d){const f=!d.before,m=d.values||[];return new Ua(m,f)}(n.endAt)),r1(e,r,o,i,a,"F",c,l)}function $1(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ir(n.unaryFilter.field);return Qe.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Ir(n.unaryFilter.field);return Qe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ir(n.unaryFilter.field);return Qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ir(n.unaryFilter.field);return Qe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return Qe.create(Ir(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cn.create(n.compositeFilter.filters.map(s=>fv(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function B1(t){return P1[t]}function G1(t){return D1[t]}function q1(t){return C1[t]}function vr(t){return{fieldPath:t.canonicalString()}}function Ir(t){return ft.fromServerFormat(t.fieldPath)}function pv(t){return t instanceof Qe?function(n){if(n.op==="=="){if(Op(n.value))return{unaryFilter:{field:vr(n.field),op:"IS_NAN"}};if(Mp(n.value))return{unaryFilter:{field:vr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Op(n.value))return{unaryFilter:{field:vr(n.field),op:"IS_NOT_NAN"}};if(Mp(n.value))return{unaryFilter:{field:vr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vr(n.field),op:G1(n.op),value:n.value}}}(t):t instanceof cn?function(n){const s=n.getFilters().map(r=>pv(r));return s.length===1?s[0]:{compositeFilter:{op:q1(n.op),filters:s}}}(t):ie()}function j1(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,s,r,i=ce.min(),o=ce.min(),a=Pt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.ct=e}}function W1(t){const e=F1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fa(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this._n=new K1}addToCollectionParentIndex(e,n){return this._n.add(n),R.resolve()}getCollectionParents(e,n){return R.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return R.resolve()}deleteFieldIndex(e,n){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,n){return R.resolve()}getDocumentsMatchingTarget(e,n){return R.resolve(null)}getIndexType(e,n){return R.resolve(0)}getFieldIndexes(e,n){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,n){return R.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,n){return R.resolve(ps.min())}updateCollectionGroup(e,n,s){return R.resolve()}updateIndexEntries(e,n){return R.resolve()}}class K1{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new mt(Le.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new mt(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new jr(0)}static Ln(){return new jr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.changes=new Zr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?R.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&xi(s.mutation,r,jt.empty(),tt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,me()).next(()=>s))}getLocalViewOfDocuments(e,n,s=me()){const r=Fs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=vi();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Fs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,me()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=$n();const o=Oi(),a=function(){return Oi()}();return n.forEach((c,l)=>{const h=s.get(l.key);r.has(l.key)&&(h===void 0||h.mutation instanceof Ts)?i=i.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),xi(h.mutation,l,h.mutation.getFieldMask(),tt.now())):o.set(l.key,jt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var d;return a.set(l,new Q1(h,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const s=Oi();let r=new Ge((o,a)=>o-a),i=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let h=s.get(c)||jt.empty();h=a.applyToLocalView(l,h),s.set(c,h);const d=(r.get(a.batchId)||me()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,h=c.value,d=Xy();h.forEach(f=>{if(!i.has(f)){const m=rv(n.get(f),s.get(f));m!==null&&d.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return R.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Wy(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):R.resolve(Fs());let a=-1,c=i;return o.next(l=>R.forEach(l,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?R.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{c=c.insert(h,f)}))).next(()=>this.populateOverlays(e,l,i)).next(()=>this.computeViews(e,c,l,me())).next(h=>({batchId:a,changes:Qy(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(s=>{let r=vi();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=vi();return this.indexManager.getCollectionParents(e,i).next(a=>R.forEach(a,c=>{const l=function(d,f){return new Jr(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,s,r).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((c,l)=>{const h=l.getKey();o.get(h)===null&&(o=o.insert(h,wt.newInvalidDocument(h)))});let a=vi();return o.forEach((c,l)=>{const h=i.get(c);h!==void 0&&xi(h.mutation,l,jt.empty(),tt.now()),Lc(n,l)&&(a=a.insert(c,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return R.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Sn(r.createTime)}}(n)),R.resolve()}getNamedQuery(e,n){return R.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:W1(r.bundledQuery),readTime:Sn(r.readTime)}}(n)),R.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this.overlays=new Ge(Z.comparator),this.hr=new Map}getOverlay(e,n){return R.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Fs();return R.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.ht(e,n,i)}),R.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.hr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(s)),R.resolve()}getOverlaysForCollection(e,n,s){const r=Fs(),i=n.length+1,o=new Z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return R.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ge((l,h)=>l-h);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>s){let h=i.get(l.largestBatchId);h===null&&(h=Fs(),i=i.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=Fs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=r)););return R.resolve(a)}ht(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.hr.get(r.largestBatchId).delete(s.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new E1(n,s));let i=this.hr.get(n);i===void 0&&(i=me(),this.hr.set(n,i)),this.hr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(){this.Pr=new mt(ot.Ir),this.Tr=new mt(ot.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const s=new ot(e,n);this.Pr=this.Pr.add(s),this.Tr=this.Tr.add(s)}dr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Ar(new ot(e,n))}Rr(e,n){e.forEach(s=>this.removeReference(s,n))}Vr(e){const n=new Z(new Le([])),s=new ot(n,e),r=new ot(n,e+1),i=[];return this.Tr.forEachInRange([s,r],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Z(new Le([])),s=new ot(n,e),r=new ot(n,e+1);let i=me();return this.Tr.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ot(e,0),s=this.Pr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ot{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Z.comparator(e.key,n.key)||Ee(e.pr,n.pr)}static Er(e,n){return Ee(e.pr,n.pr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new mt(ot.Ir)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new w1(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.wr=this.wr.add(new ot(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return R.resolve(o)}lookupMutationBatch(e,n){return R.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.br(s),i=r<0?0:r;return R.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ot(n,0),r=new ot(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([s,r],o=>{const a=this.Sr(o.pr);i.push(a)}),R.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new mt(Ee);return n.forEach(r=>{const i=new ot(r,0),o=new ot(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{s=s.add(a.pr)})}),R.resolve(this.Dr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;Z.isDocumentKey(i)||(i=i.child(""));const o=new ot(new Z(i),0);let a=new mt(Ee);return this.wr.forEachWhile(c=>{const l=c.key.path;return!!s.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.pr)),!0)},o),R.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(s=>{const r=this.Sr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ke(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.wr;return R.forEach(n.mutations,r=>{const i=new ot(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=s})}Mn(e){}containsKey(e,n){const s=new ot(n,0),r=this.wr.firstAfterOrEqual(s);return R.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.vr=e,this.docs=function(){return new Ge(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.vr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return R.resolve(s?s.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let s=$n();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():wt.newInvalidDocument(r))}),R.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=$n();const o=n.path,a=new Z(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||FP(UP(h),s)<=0||(r.has(h.key)||Lc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return R.resolve(i)}getAllFromCollectionGroup(e,n,s,r){ie()}Fr(e,n){return R.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new nD(this)}getSize(e){return R.resolve(this.size)}}class nD extends Y1{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(s)}),R.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.persistence=e,this.Mr=new Zr(n=>Bh(n),Gh),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Kh,this.targetCount=0,this.Lr=jr.Nn()}forEachTarget(e,n){return this.Mr.forEach((s,r)=>n(r)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Or&&(this.Or=n),R.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new jr(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,R.resolve()}updateTargetData(e,n){return this.qn(n),R.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),R.waitFor(i).next(()=>r)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,n){const s=this.Mr.get(n)||null;return R.resolve(s)}addMatchingKeys(e,n,s){return this.Nr.dr(n,s),R.resolve()}removeMatchingKeys(e,n,s){this.Nr.Rr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),R.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),R.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Nr.gr(n);return R.resolve(s)}containsKey(e,n){return R.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n){this.Br={},this.overlays={},this.kr=new Vh(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new sD(this),this.indexManager=new z1,this.remoteDocumentCache=function(r){return new tD(r)}(s=>this.referenceDelegate.Kr(s)),this.serializer=new H1(n),this.$r=new J1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Z1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Br[e.toKey()];return s||(s=new eD(n,this.referenceDelegate),this.Br[e.toKey()]=s),s}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,s){L("MemoryPersistence","Starting transaction:",e);const r=new iD(this.kr.next());return this.referenceDelegate.Ur(),s(r).next(i=>this.referenceDelegate.Wr(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Gr(e,n){return R.or(Object.values(this.Br).map(s=>()=>s.containsKey(e,n)))}}class iD extends BP{constructor(e){super(),this.currentSequenceNumber=e}}class Yh{constructor(e){this.persistence=e,this.zr=new Kh,this.jr=null}static Hr(e){return new Yh(e)}get Jr(){if(this.jr)return this.jr;throw ie()}addReference(e,n,s){return this.zr.addReference(s,n),this.Jr.delete(s.toString()),R.resolve()}removeReference(e,n,s){return this.zr.removeReference(s,n),this.Jr.add(s.toString()),R.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),R.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.Jr.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Jr,s=>{const r=Z.fromPath(s);return this.Yr(e,r).next(i=>{i||n.removeEntry(r,ce.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(s=>{s?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return R.or([()=>R.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.qi=s,this.Qi=r}static Ki(e,n){let s=me(),r=me();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Qh(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Nb()?8:Us.v(Xe())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ji(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new oD;return this.Ji(e,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>i.result)}Yi(e,n,s,r){return s.documentReadCount<this.Wi?(hi()<=ge.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",yr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),R.resolve()):(hi()<=ge.DEBUG&&L("QueryEngine","Query:",yr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.Gi*r?(hi()<=ge.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",yr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rn(n))):R.resolve())}ji(e,n){if(Up(n))return R.resolve(null);let s=Rn(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Fa(n,null,"F"),s=Rn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=me(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(c=>{const l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,Fa(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,s,r){return Up(n)||r.isEqual(ce.min())?R.resolve(null):this.zi.getDocuments(e,s).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,s,r)?R.resolve(null):(hi()<=ge.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),yr(n)),this.es(e,o,n,VP(r,-1)).next(a=>a))})}Zi(e,n){let s=new mt(Ky(e));return n.forEach((r,i)=>{Lc(e,i)&&(s=s.add(i))}),s}Xi(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,n,s){return hi()<=ge.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",yr(n)),this.zi.getDocumentsMatchingQuery(e,n,ps.min(),s)}es(e,n,s,r){return this.zi.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,n,s,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new Ge(Ee),this.rs=new Zr(i=>Bh(i),Gh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(s)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new X1(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function lD(t,e,n,s){return new cD(t,e,n,s)}async function gv(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n._s(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let c=me();for(const l of r){o.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}for(const l of i){a.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(s,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function uD(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){const d=l.batch,f=d.keys();let m=R.resolve();return f.forEach(I=>{m=m.next(()=>h.getEntry(c,I)).next(S=>{const T=l.docVersions.get(I);ke(T!==null),S.version.compareTo(T)<0&&(d.applyToRemoteDocument(S,l),S.isValidDocument()&&(S.setReadTime(l.commitVersion),h.addEntry(S)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let c=me();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function _v(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function hD(t,e){const n=le(t),s=e.snapshotVersion;let r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;const a=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;a.push(n.Qr.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(i,h.addedDocuments,d)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Pt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),r=r.insert(d,m),function(S,T,k){return S.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(f,m,h)&&a.push(n.Qr.updateTargetData(i,m))});let c=$n(),l=me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(dD(i,o,e.documentUpdates).next(h=>{c=h.cs,l=h.ls})),!s.isEqual(ce.min())){const h=n.Qr.getLastRemoteSnapshotVersion(i).next(d=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(h)}return R.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,l)).next(()=>c)}).then(i=>(n.ns=r,i))}function dD(t,e,n){let s=me(),r=me();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=$n();return n.forEach((a,c)=>{const l=i.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(ce.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:r}})}function fD(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function pD(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Qr.getTargetData(s,e).next(i=>i?(r=i,R.resolve(r)):n.Qr.allocateTargetId(s).next(o=>(r=new ss(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Qr.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.ns.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(s.targetId,s),n.rs.set(e,s.targetId)),s})}async function Ru(t,e,n){const s=le(t),r=s.ns.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Ro(o))throw o;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.ns=s.ns.remove(e),s.rs.delete(r.target)}function Yp(t,e,n){const s=le(t);let r=ce.min(),i=me();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,h){const d=le(c),f=d.rs.get(h);return f!==void 0?R.resolve(d.ns.get(f)):d.Qr.getTargetData(l,h)}(s,o,Rn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>s.ts.getDocumentsMatchingQuery(o,e,n?r:ce.min(),n?i:me())).next(a=>(mD(s,o1(e),a),{documents:a,hs:i})))}function mD(t,e,n){let s=t.ss.get(e)||ce.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.ss.set(e,s)}class Qp{constructor(){this.activeTargetIds=d1()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gD{constructor(){this.no=new Qp,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,s){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Qp,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo=null;function Cl(){return Qo===null?Qo=function(){return 268435456+Math.round(2147483648*Math.random())}():Qo++,"0x"+Qo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt="WebChannelConnection";class ID extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=s+"://"+n.host,this.po=`projects/${r}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${i}`}get wo(){return!1}So(n,s,r,i,o){const a=Cl(),c=this.bo(n,s.toUriEncodedString());L("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);const l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,i,o),this.Co(n,c,l,r).then(h=>(L("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Ur("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",c,"request:",r),h})}vo(n,s,r,i,o,a){return this.So(n,s,r,i,o)}Do(n,s,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((i,o)=>n[o]=i),r&&r.headers.forEach((i,o)=>n[o]=i)}bo(n,s){const r=yD[n];return`${this.fo}/v1/${s}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,s,r){const i=Cl();return new Promise((o,a)=>{const c=new RP;c.setWithCredentials(!0),c.listenOnce(bP.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Pl.NO_ERROR:const h=c.getResponseJson();L(vt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Pl.TIMEOUT:L(vt,`RPC '${e}' ${i} timed out`),a(new G(E.DEADLINE_EXCEEDED,"Request time out"));break;case Pl.HTTP_ERROR:const d=c.getStatus();if(L(vt,`RPC '${e}' ${i} failed with status:`,d,"response text:",c.getResponseText()),d>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const I=function(T){const k=T.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(k)>=0?k:E.UNKNOWN}(m.status);a(new G(I,m.message))}else a(new G(E.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new G(E.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{L(vt,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);L(vt,`RPC '${e}' ${i} sending request:`,r),c.send(n,"POST",l,s,15)})}Fo(e,n,s){const r=Cl(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=EP(),a=TP(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const h=i.join("");L(vt,`Creating RPC '${e}' stream ${r}: ${h}`,c);const d=o.createWebChannel(h,c);let f=!1,m=!1;const I=new vD({lo:T=>{m?L(vt,`Not sending because RPC '${e}' stream ${r} is closed:`,T):(f||(L(vt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),L(vt,`RPC '${e}' stream ${r} sending:`,T),d.send(T))},ho:()=>d.close()}),S=(T,k,U)=>{T.listen(k,q=>{try{U(q)}catch(Y){setTimeout(()=>{throw Y},0)}})};return S(d,zo.EventType.OPEN,()=>{m||L(vt,`RPC '${e}' stream ${r} transport opened.`)}),S(d,zo.EventType.CLOSE,()=>{m||(m=!0,L(vt,`RPC '${e}' stream ${r} transport closed`),I.Vo())}),S(d,zo.EventType.ERROR,T=>{m||(m=!0,Ur(vt,`RPC '${e}' stream ${r} transport errored:`,T),I.Vo(new G(E.UNAVAILABLE,"The operation could not be completed")))}),S(d,zo.EventType.MESSAGE,T=>{var k;if(!m){const U=T.data[0];ke(!!U);const q=U,Y=q.error||((k=q[0])===null||k===void 0?void 0:k.error);if(Y){L(vt,`RPC '${e}' stream ${r} received error:`,Y);const Ie=Y.status;let X=function(Bt){const Ct=Ke[Bt];if(Ct!==void 0)return ov(Ct)}(Ie),Me=Y.message;X===void 0&&(X=E.INTERNAL,Me="Unknown error status: "+Ie+" with message "+Y.message),m=!0,I.Vo(new G(X,Me)),d.close()}else L(vt,`RPC '${e}' stream ${r} received:`,U),I.mo(U)}}),S(a,AP.STAT_EVENT,T=>{T.stat===Rp.PROXY?L(vt,`RPC '${e}' stream ${r} detected buffering proxy`):T.stat===Rp.NOPROXY&&L(vt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{I.Ro()},0),I}}function kl(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t){return new k1(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,n,s=1e3,r=1.5,i=6e4){this.oi=e,this.timerId=n,this.Mo=s,this.xo=r,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),s=Math.max(0,Date.now()-this.Bo),r=Math.max(0,n-s);r>0&&L("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,n,s,r,i,o,a,c){this.oi=e,this.$o=s,this.Uo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new yv(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===E.RESOURCE_EXHAUSTED?(Dn(n.toString()),Dn("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===E.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.Wo===n&&this.o_(s,r)},s=>{e(()=>{const r=new G(E.UNKNOWN,"Fetching auth token failed: "+s.message);return this.__(r)})})}o_(e,n){const s=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{s(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(r=>{s(()=>this.__(r))}),this.stream.onMessage(r=>{s(()=>this.onMessage(r))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wD extends vv{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=O1(this.serializer,e),s=function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?Sn(o.readTime):ce.min()}(e);return this.listener.u_(n,s)}c_(e){const n={};n.database=Au(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=Iu(c)?{documents:V1(i,c)}:{query:U1(i,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=lv(i,o.resumeToken);const l=Eu(i,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=Ba(i,o.snapshotVersion.toTimestamp());const l=Eu(i,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const s=$1(this.serializer,e);s&&(n.labels=s),this.t_(n)}l_(e){const n={};n.database=Au(this.serializer),n.removeTarget=e,this.t_(n)}}class ED extends vv{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=L1(e.writeResults,e.commitTime),s=Sn(e.commitTime);return this.listener.T_(s,n)}return ke(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Au(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>x1(this.serializer,s))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD extends class{}{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new G(E.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,Tu(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(E.UNKNOWN,i.toString())})}vo(e,n,s,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Tu(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(E.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class bD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Dn(n),this.g_=!1):L("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{s.enqueueAndForget(async()=>{or(this)&&(L("RemoteStore","Restarting streams for network reachability change."),await async function(c){const l=le(c);l.v_.add(4),await Do(l),l.x_.set("Unknown"),l.v_.delete(4),await Bc(l)}(this))})}),this.x_=new bD(s,r)}}async function Bc(t){if(or(t))for(const e of t.F_)await e(!0)}async function Do(t){for(const e of t.F_)await e(!1)}function Iv(t,e){const n=le(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),ed(n)?Zh(n):ei(n).Jo()&&Jh(n,e))}function Xh(t,e){const n=le(t),s=ei(n);n.C_.delete(e),s.Jo()&&wv(n,e),n.C_.size===0&&(s.Jo()?s.Xo():or(n)&&n.x_.set("Unknown"))}function Jh(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ei(t).c_(e)}function wv(t,e){t.O_.Oe(e),ei(t).l_(e)}function Zh(t){t.O_=new S1({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ei(t).start(),t.x_.p_()}function ed(t){return or(t)&&!ei(t).Ho()&&t.C_.size>0}function or(t){return le(t).v_.size===0}function Ev(t){t.O_=void 0}async function RD(t){t.C_.forEach((e,n)=>{Jh(t,e)})}async function SD(t,e){Ev(t),ed(t)?(t.x_.S_(e),Zh(t)):t.x_.set("Unknown")}async function PD(t,e,n){if(t.x_.set("Online"),e instanceof cv&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const a of i.targetIds)r.C_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.C_.delete(a),r.O_.removeTarget(a))}(t,e)}catch(s){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ga(t,s)}else if(e instanceof da?t.O_.$e(e):e instanceof av?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(ce.min()))try{const s=await _v(t.localStore);n.compareTo(s)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.C_.get(l);h&&i.C_.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const h=i.C_.get(c);if(!h)return;i.C_.set(c,h.withResumeToken(Pt.EMPTY_BYTE_STRING,h.snapshotVersion)),wv(i,c);const d=new ss(h.target,c,l,h.sequenceNumber);Jh(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(s){L("RemoteStore","Failed to raise snapshot:",s),await Ga(t,s)}}async function Ga(t,e,n){if(!Ro(e))throw e;t.v_.add(1),await Do(t),t.x_.set("Offline"),n||(n=()=>_v(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{L("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Bc(t)})}function Tv(t,e){return e().catch(n=>Ga(t,n,e))}async function Gc(t){const e=le(t),n=gs(e);let s=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;DD(e);)try{const r=await fD(e.localStore,s);if(r===null){e.D_.length===0&&n.Xo();break}s=r.batchId,CD(e,r)}catch(r){await Ga(e,r)}bv(e)&&Av(e)}function DD(t){return or(t)&&t.D_.length<10}function CD(t,e){t.D_.push(e);const n=gs(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function bv(t){return or(t)&&!gs(t).Ho()&&t.D_.length>0}function Av(t){gs(t).start()}async function kD(t){gs(t).d_()}async function ND(t){const e=gs(t);for(const n of t.D_)e.I_(n.mutations)}async function MD(t,e,n){const s=t.D_.shift(),r=Hh.from(s,e,n);await Tv(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Gc(t)}async function OD(t,e){e&&gs(t).P_&&await async function(s,r){if(function(o){return b1(o)&&o!==E.ABORTED}(r.code)){const i=s.D_.shift();gs(s).Zo(),await Tv(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Gc(s)}}(t,e),bv(t)&&Av(t)}async function Jp(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");const s=or(n);n.v_.add(3),await Do(n),s&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Bc(n)}async function xD(t,e){const n=le(t);e?(n.v_.delete(2),await Bc(n)):e||(n.v_.add(2),await Do(n),n.x_.set("Unknown"))}function ei(t){return t.N_||(t.N_=function(n,s,r){const i=le(n);return i.R_(),new wD(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Po:RD.bind(null,t),To:SD.bind(null,t),u_:PD.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),ed(t)?Zh(t):t.x_.set("Unknown")):(await t.N_.stop(),Ev(t))})),t.N_}function gs(t){return t.L_||(t.L_=function(n,s,r){const i=le(n);return i.R_(),new ED(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Po:kD.bind(null,t),To:OD.bind(null,t),E_:ND.bind(null,t),T_:MD.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await Gc(t)):(await t.L_.stop(),t.D_.length>0&&(L("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new An,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new td(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nd(t,e){if(Dn("AsyncQueue",`${e}: ${t}`),Ro(t))return new G(E.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.comparator=e?(n,s)=>e(n,s)||Z.comparator(n.key,s.key):(n,s)=>Z.comparator(n.key,s.key),this.keyedMap=vi(),this.sortedSet=new Ge(this.comparator)}static emptySet(e){return new kr(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof kr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new kr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this.B_=new Ge(Z.comparator)}track(e){const n=e.doc.key,s=this.B_.get(n);s?e.type!==0&&s.type===3?this.B_=this.B_.insert(n,e):e.type===3&&s.type!==1?this.B_=this.B_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.B_=this.B_.remove(n):e.type===1&&s.type===2?this.B_=this.B_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):ie():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Hr{constructor(e,n,s,r,i,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Hr(e,n,kr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class VD{constructor(){this.queries=new Zr(e=>zy(e),xc),this.onlineState="Unknown",this.W_=new Set}}async function sd(t,e){const n=le(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.K_()&&e.U_()&&(s=2):(i=new LD,s=e.U_()?0:1);try{switch(s){case 0:i.q_=await n.onListen(r,!0);break;case 1:i.q_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=nd(o,`Initialization of query '${yr(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Q_.push(e),e.G_(n.onlineState),i.q_&&e.z_(i.q_)&&id(n)}async function rd(t,e){const n=le(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Q_.indexOf(e);o>=0&&(i.Q_.splice(o,1),i.Q_.length===0?r=e.U_()?0:1:!i.K_()&&e.U_()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function UD(t,e){const n=le(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.z_(r)&&(s=!0);o.q_=r}}s&&id(n)}function FD(t,e,n){const s=le(t),r=s.queries.get(e);if(r)for(const i of r.Q_)i.onError(n);s.queries.delete(e)}function id(t){t.W_.forEach(e=>{e.next()})}var Su,em;(em=Su||(Su={})).j_="default",em.Cache="cache";class od{constructor(e,n,s){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=s||{}}z_(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Hr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const s=n!=="Offline";return(!this.options.ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=Hr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Su.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e){this.key=e}}class Sv{constructor(e){this.key=e}}class $D{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=me(),this.mutatedKeys=me(),this.ha=Ky(e),this.Pa=new kr(this.ha)}get Ia(){return this.ua}Ta(e,n){const s=n?n.Ea:new Zp,r=n?n.Pa:this.Pa;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),m=Lc(this.query,d)?d:null,I=!!f&&this.mutatedKeys.has(f.key),S=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;f&&m?f.data.isEqual(m.data)?I!==S&&(s.track({type:3,doc:m}),T=!0):this.da(f,m)||(s.track({type:2,doc:m}),T=!0,(c&&this.ha(m,c)>0||l&&this.ha(m,l)<0)&&(a=!0)):!f&&m?(s.track({type:0,doc:m}),T=!0):f&&!m&&(s.track({type:1,doc:f}),T=!0,(c||l)&&(a=!0)),T&&(m?(o=o.add(m),i=S?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{Pa:o,Ea:s,Xi:a,mutatedKeys:i}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((h,d)=>function(m,I){const S=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return S(m)-S(I)}(h.type,d.type)||this.ha(h.doc,d.doc)),this.Aa(s),r=r!=null&&r;const a=n&&!r?this.Ra():[],c=this.la.size===0&&this.current&&!r?1:0,l=c!==this.ca;return this.ca=c,o.length!==0||l?{snapshot:new Hr(this.query,e.Pa,i,o,e.mutatedKeys,c===0,l,!1,!!s&&s.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Zp,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=me(),this.Pa.forEach(s=>{this.ma(s.key)&&(this.la=this.la.add(s.key))});const n=[];return e.forEach(s=>{this.la.has(s)||n.push(new Sv(s))}),this.la.forEach(s=>{e.has(s)||n.push(new Rv(s))}),n}fa(e){this.ua=e.hs,this.la=me();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Hr.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class BD{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class GD{constructor(e){this.key=e,this.pa=!1}}class qD{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Zr(a=>zy(a),xc),this.Sa=new Map,this.ba=new Set,this.Da=new Ge(Z.comparator),this.Ca=new Map,this.va=new Kh,this.Fa={},this.Ma=new Map,this.xa=jr.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function jD(t,e,n=!0){const s=Mv(t);let r;const i=s.wa.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.ga()):r=await Pv(s,e,n,!0),r}async function HD(t,e){const n=Mv(t);await Pv(n,e,!0,!1)}async function Pv(t,e,n,s){const r=await pD(t.localStore,Rn(e)),i=r.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return s&&(a=await WD(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&Iv(t.remoteStore,r),a}async function WD(t,e,n,s,r){t.Na=(d,f,m)=>async function(S,T,k,U){let q=T.view.Ta(k);q.Xi&&(q=await Yp(S.localStore,T.query,!1).then(({documents:Me})=>T.view.Ta(Me,q)));const Y=U&&U.targetChanges.get(T.targetId),Ie=U&&U.targetMismatches.get(T.targetId)!=null,X=T.view.applyChanges(q,S.isPrimaryClient,Y,Ie);return nm(S,T.targetId,X.Va),X.snapshot}(t,d,f,m);const i=await Yp(t.localStore,e,!0),o=new $D(e,i.hs),a=o.Ta(i.documents),c=Po.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),l=o.applyChanges(a,t.isPrimaryClient,c);nm(t,n,l.Va);const h=new BD(e,n,o);return t.wa.set(e,h),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),l.snapshot}async function zD(t,e,n){const s=le(t),r=s.wa.get(e),i=s.Sa.get(r.targetId);if(i.length>1)return s.Sa.set(r.targetId,i.filter(o=>!xc(o,e))),void s.wa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Ru(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Xh(s.remoteStore,r.targetId),Pu(s,r.targetId)}).catch(Ao)):(Pu(s,r.targetId),await Ru(s.localStore,r.targetId,!0))}async function KD(t,e){const n=le(t),s=n.wa.get(e),r=n.Sa.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Xh(n.remoteStore,s.targetId))}async function YD(t,e,n){const s=nC(t);try{const r=await function(o,a){const c=le(o),l=tt.now(),h=a.reduce((m,I)=>m.add(I.key),me());let d,f;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let I=$n(),S=me();return c.os.getEntries(m,h).next(T=>{I=T,I.forEach((k,U)=>{U.isValidDocument()||(S=S.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,I)).next(T=>{d=T;const k=[];for(const U of a){const q=v1(U,d.get(U.key).overlayedDocument);q!=null&&k.push(new Ts(U.key,q,Fy(q.value.mapValue),sn.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,k,a)}).next(T=>{f=T;const k=T.applyToLocalDocumentSet(d,S);return c.documentOverlayCache.saveOverlays(m,T.batchId,k)})}).then(()=>({batchId:f.batchId,changes:Qy(d)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let l=o.Fa[o.currentUser.toKey()];l||(l=new Ge(Ee)),l=l.insert(a,c),o.Fa[o.currentUser.toKey()]=l}(s,r.batchId,n),await Co(s,r.changes),await Gc(s.remoteStore)}catch(r){const i=nd(r,"Failed to persist write");n.reject(i)}}async function Dv(t,e){const n=le(t);try{const s=await hD(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Ca.get(i);o&&(ke(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.pa=!0:r.modifiedDocuments.size>0?ke(o.pa):r.removedDocuments.size>0&&(ke(o.pa),o.pa=!1))}),await Co(n,s,e)}catch(s){await Ao(s)}}function tm(t,e,n){const s=le(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.wa.forEach((i,o)=>{const a=o.view.G_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const c=le(o);c.onlineState=a;let l=!1;c.queries.forEach((h,d)=>{for(const f of d.Q_)f.G_(a)&&(l=!0)}),l&&id(c)}(s.eventManager,e),r.length&&s.ya.u_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function QD(t,e,n){const s=le(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Ca.get(e),i=r&&r.key;if(i){let o=new Ge(Z.comparator);o=o.insert(i,wt.newNoDocument(i,ce.min()));const a=me().add(i),c=new Fc(ce.min(),new Map,new Ge(Ee),o,a);await Dv(s,c),s.Da=s.Da.remove(i),s.Ca.delete(e),ad(s)}else await Ru(s.localStore,e,!1).then(()=>Pu(s,e,n)).catch(Ao)}async function XD(t,e){const n=le(t),s=e.batch.batchId;try{const r=await uD(n.localStore,e);kv(n,s,null),Cv(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Co(n,r)}catch(r){await Ao(r)}}async function JD(t,e,n){const s=le(t);try{const r=await function(o,a){const c=le(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(ke(d!==null),h=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(s.localStore,e);kv(s,e,n),Cv(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Co(s,r)}catch(r){await Ao(r)}}function Cv(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function kv(t,e,n){const s=le(t);let r=s.Fa[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Fa[s.currentUser.toKey()]=r}}function Pu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Sa.get(e))t.wa.delete(s),n&&t.ya.La(s,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(s=>{t.va.containsKey(s)||Nv(t,s)})}function Nv(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(Xh(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),ad(t))}function nm(t,e,n){for(const s of n)s instanceof Rv?(t.va.addReference(s.key,e),ZD(t,s)):s instanceof Sv?(L("SyncEngine","Document no longer in limbo: "+s.key),t.va.removeReference(s.key,e),t.va.containsKey(s.key)||Nv(t,s.key)):ie()}function ZD(t,e){const n=e.key,s=n.path.canonicalString();t.Da.get(n)||t.ba.has(s)||(L("SyncEngine","New document in limbo: "+n),t.ba.add(s),ad(t))}function ad(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new Z(Le.fromString(e)),s=t.xa.next();t.Ca.set(s,new GD(n)),t.Da=t.Da.insert(n,s),Iv(t.remoteStore,new ss(Rn(Oc(n.path)),s,"TargetPurposeLimboResolution",Vh._e))}}async function Co(t,e,n){const s=le(t),r=[],i=[],o=[];s.wa.isEmpty()||(s.wa.forEach((a,c)=>{o.push(s.Na(c,e,n).then(l=>{if((l||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(c.targetId,l!=null&&l.fromCache?"not-current":"current"),l){r.push(l);const h=Qh.Ki(c.targetId,l);i.push(h)}}))}),await Promise.all(o),s.ya.u_(r),await async function(c,l){const h=le(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>R.forEach(l,f=>R.forEach(f.qi,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>R.forEach(f.Qi,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Ro(d))throw d;L("LocalStore","Failed to update sequence numbers: "+d)}for(const d of l){const f=d.targetId;if(!d.fromCache){const m=h.ns.get(f),I=m.snapshotVersion,S=m.withLastLimboFreeSnapshotVersion(I);h.ns=h.ns.insert(f,S)}}}(s.localStore,i))}async function eC(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());const s=await gv(n.localStore,e);n.currentUser=e,function(i,o){i.Ma.forEach(a=>{a.forEach(c=>{c.reject(new G(E.CANCELLED,o))})}),i.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Co(n,s.us)}}function tC(t,e){const n=le(t),s=n.Ca.get(e);if(s&&s.pa)return me().add(s.key);{let r=me();const i=n.Sa.get(e);if(!i)return r;for(const o of i){const a=n.wa.get(o);r=r.unionWith(a.view.Ia)}return r}}function Mv(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QD.bind(null,e),e.ya.u_=UD.bind(null,e.eventManager),e.ya.La=FD.bind(null,e.eventManager),e}function nC(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JD.bind(null,e),e}class sm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=$c(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return lD(this.persistence,new aD,e.initialUser,this.serializer)}createPersistence(e){return new rD(Yh.Hr,this.serializer)}createSharedClientState(e){return new gD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class sC{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>tm(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=eC.bind(null,this.syncEngine),await xD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VD}()}createDatastore(e){const n=$c(e.databaseInfo.databaseId),s=function(i){return new ID(i)}(e.databaseInfo);return function(i,o,a,c){return new TD(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,a){return new AD(s,r,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>tm(this.syncEngine,n,0),function(){return Xp.D()?new Xp:new _D}())}createSyncEngine(e,n){return function(r,i,o,a,c,l,h){const d=new qD(r,i,o,a,c,l);return h&&(d.Oa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(s){const r=le(s);L("RemoteStore","RemoteStore shutting down."),r.v_.add(5),await Do(r),r.M_.shutdown(),r.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Dn("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=It.UNAUTHENTICATED,this.clientId=Ly.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async i=>{L("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(s,i=>(L("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new An;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=nd(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Nl(t,e){t.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await gv(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function rm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oC(t);L("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Jp(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>Jp(e.remoteStore,r)),t._onlineComponents=e}function iC(t){return t.name==="FirebaseError"?t.code===E.FAILED_PRECONDITION||t.code===E.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function oC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{await Nl(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!iC(n))throw n;Ur("Error using user provided cache. Falling back to memory cache: "+n),await Nl(t,new sm)}}else L("FirestoreClient","Using default OfflineComponentProvider"),await Nl(t,new sm);return t._offlineComponents}async function Ov(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),await rm(t,t._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),await rm(t,new sC))),t._onlineComponents}function aC(t){return Ov(t).then(e=>e.syncEngine)}async function qa(t){const e=await Ov(t),n=e.eventManager;return n.onListen=jD.bind(null,e.syncEngine),n.onUnlisten=zD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=HD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KD.bind(null,e.syncEngine),n}function cC(t,e,n={}){const s=new An;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,l){const h=new cd({next:f=>{o.enqueueAndForget(()=>rd(i,d));const m=f.docs.has(a);!m&&f.fromCache?l.reject(new G(E.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&c&&c.source==="server"?l.reject(new G(E.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(f)},error:f=>l.reject(f)}),d=new od(Oc(a.path),h,{includeMetadataChanges:!0,ta:!0});return sd(i,d)}(await qa(t),t.asyncQueue,e,n,s)),s.promise}function lC(t,e,n={}){const s=new An;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,l){const h=new cd({next:f=>{o.enqueueAndForget(()=>rd(i,d)),f.fromCache&&c.source==="server"?l.reject(new G(E.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(f)},error:f=>l.reject(f)}),d=new od(a,h,{includeMetadataChanges:!0,ta:!0});return sd(i,d)}(await qa(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t,e,n){if(!n)throw new G(E.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uC(t,e,n,s){if(e===!0&&s===!0)throw new G(E.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function om(t){if(!Z.isDocumentKey(t))throw new G(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function am(t){if(Z.isDocumentKey(t))throw new G(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function Wt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qc(t);throw new G(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function hC(t,e){if(e<=0)throw new G(E.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new G(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xv((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jc{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cm(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new PP;switch(s.type){case"firstParty":return new NP(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new G(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=im.get(n);s&&(L("ComponentProvider","Removing Datastore"),im.delete(n),s.terminate())}(this),Promise.resolve()}}function dC(t,e,n,s={}){var r;const i=(t=Wt(t,jc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Ur("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),s.mockUserToken){let a,c;if(typeof s.mockUserToken=="string")a=s.mockUserToken,c=It.MOCK_USER;else{a=jg(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const l=s.mockUserToken.sub||s.mockUserToken.user_id;if(!l)throw new G(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new It(l)}t._authCredentials=new DP(new xy(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Gn(this.firestore,e,this._query)}}class Rt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}}class cs extends Gn{constructor(e,n,s){super(e,n,Oc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new Z(e))}withConverter(e){return new cs(this.firestore,e,this._path)}}function $e(t,e,...n){if(t=Be(t),Lv("collection","path",e),t instanceof jc){const s=Le.fromString(e,...n);return am(s),new cs(t,null,s)}{if(!(t instanceof Rt||t instanceof cs))throw new G(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Le.fromString(e,...n));return am(s),new cs(t.firestore,null,s)}}function C(t,e,...n){if(t=Be(t),arguments.length===1&&(e=Ly.newId()),Lv("doc","path",e),t instanceof jc){const s=Le.fromString(e,...n);return om(s),new Rt(t,null,new Z(s))}{if(!(t instanceof Rt||t instanceof cs))throw new G(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Le.fromString(e,...n));return om(s),new Rt(t.firestore,t instanceof cs?t.converter:null,new Z(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new yv(this,"async_queue_retry"),this.cu=()=>{const n=kl();n&&L("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=kl();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=kl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new An;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Ro(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(s=>{this.ou=s,this._u=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(s);throw Dn("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this._u=!1,s))));return this.nu=n,n}enqueueAfterDelay(e,n,s){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const r=td.createAndSchedule(this,e,n,s,i=>this.Iu(i));return this.su.push(r),r}lu(){this.ou&&ie()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function lm(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const r=n;for(const i of s)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class _s extends jc{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=function(){return new fC}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Vv(this),this._firestoreClient.terminate()}}function x(t,e){const n=typeof t=="object"?t:eh(),s=typeof t=="string"?t:e||"(default)",r=hc(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=Bg("firestore");i&&dC(r,...i)}return r}function Hc(t){return t._firestoreClient||Vv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Vv(t){var e,n,s;const r=t._freezeSettings(),i=function(a,c,l,h){return new WP(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,xv(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new rC(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wr(Pt.fromBase64String(e))}catch(n){throw new G(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wr(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=/^__.*__$/;class mC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new So(e,this.data,n,this.fieldTransforms)}}class Uv{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ts(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Fv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class zc{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new zc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.mu({path:s,gu:!1});return r.pu(e),r}yu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.mu({path:s,gu:!1});return r.Ru(),r}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return ja(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(Fv(this.Vu)&&pC.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class gC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||$c(e)}Cu(e,n,s,r=!1){return new zc({Vu:e,methodName:n,Du:s,path:ft.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ud(t){const e=t._freezeSettings(),n=$c(t._databaseId);return new gC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _C(t,e,n,s,r,i={}){const o=t.Cu(i.merge||i.mergeFields?2:0,e,n,r);pd("Data must be an object, but it was:",o,s);const a=Bv(s,o);let c,l;if(i.merge)c=new jt(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const f=Du(e,d,n);if(!o.contains(f))throw new G(E.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);qv(h,f)||h.push(f)}c=new jt(h),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new mC(new Vt(a),c,l)}class Kc extends ti{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kc}}function $v(t,e,n){return new zc({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hd extends ti{_toFieldTransform(e){return new qh(e.path,new ao)}isEqual(e){return e instanceof hd}}class dd extends ti{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=$v(this,e,!0),s=this.vu.map(i=>ar(i,n)),r=new Gr(s);return new qh(e.path,r)}isEqual(e){return e instanceof dd&&Lr(this.vu,e.vu)}}class fd extends ti{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=$v(this,e,!0),s=this.vu.map(i=>ar(i,n)),r=new qr(s);return new qh(e.path,r)}isEqual(e){return e instanceof fd&&Lr(this.vu,e.vu)}}function yC(t,e,n,s){const r=t.Cu(1,e,n);pd("Data must be an object, but it was:",r,s);const i=[],o=Vt.empty();ir(s,(c,l)=>{const h=md(e,c,n);l=Be(l);const d=r.yu(h);if(l instanceof Kc)i.push(h);else{const f=ar(l,d);f!=null&&(i.push(h),o.set(h,f))}});const a=new jt(i);return new Uv(o,a,r.fieldTransforms)}function vC(t,e,n,s,r,i){const o=t.Cu(1,e,n),a=[Du(e,s,n)],c=[r];if(i.length%2!=0)throw new G(E.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Du(e,i[f])),c.push(i[f+1]);const l=[],h=Vt.empty();for(let f=a.length-1;f>=0;--f)if(!qv(l,a[f])){const m=a[f];let I=c[f];I=Be(I);const S=o.yu(m);if(I instanceof Kc)l.push(m);else{const T=ar(I,S);T!=null&&(l.push(m),h.set(m,T))}}const d=new jt(l);return new Uv(h,d,o.fieldTransforms)}function IC(t,e,n,s=!1){return ar(n,t.Cu(s?4:3,e))}function ar(t,e){if(Gv(t=Be(t)))return pd("Unsupported field value:",e,t),Bv(t,e);if(t instanceof ti)return function(s,r){if(!Fv(r.Vu))throw r.Su(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Su(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const a of s){let c=ar(a,r.wu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=Be(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return f1(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=tt.fromDate(s);return{timestampValue:Ba(r.serializer,i)}}if(s instanceof tt){const i=new tt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ba(r.serializer,i)}}if(s instanceof ld)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Wr)return{bytesValue:lv(r.serializer,s._byteString)};if(s instanceof Rt){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zh(s.firestore._databaseId||r.databaseId,s._key.path)}}throw r.Su(`Unsupported field value: ${qc(s)}`)}(t,e)}function Bv(t,e){const n={};return Vy(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ir(t,(s,r)=>{const i=ar(r,e.fu(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function Gv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof ld||t instanceof Wr||t instanceof Rt||t instanceof ti)}function pd(t,e,n){if(!Gv(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const s=qc(n);throw s==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+s)}}function Du(t,e,n){if((e=Be(e))instanceof Wc)return e._internalPath;if(typeof e=="string")return md(t,e);throw ja("Field path arguments must be of type string or ",t,!1,void 0,n)}const wC=new RegExp("[~\\*/\\[\\]]");function md(t,e,n){if(e.search(wC)>=0)throw ja(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wc(...e.split("."))._internalPath}catch{throw ja(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ja(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new G(E.INVALID_ARGUMENT,a+t+c)}function qv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class EC extends jv{data(){return super.data()}}function Yc(t,e){return typeof e=="string"?md(t,e):e instanceof Wc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gd{}class _d extends gd{}function Qc(t,e,...n){let s=[];e instanceof gd&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof yd).length,a=i.filter(c=>c instanceof Xc).length;if(o>1||o>0&&a>0)throw new G(E.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class Xc extends _d{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Xc(e,n,s)}_apply(e){const n=this._parse(e);return Wv(e._query,n),new Gn(e.firestore,e.converter,wu(e._query,n))}_parse(e){const n=ud(e.firestore);return function(i,o,a,c,l,h,d){let f;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new G(E.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){hm(d,h);const m=[];for(const I of d)m.push(um(c,i,I));f={arrayValue:{values:m}}}else f=um(c,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||hm(d,h),f=IC(a,o,d,h==="in"||h==="not-in");return Qe.create(l,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Jc(t,e,n){const s=e,r=Yc("where",t);return Xc._create(r,s,n)}class yd extends gd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new yd(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:cn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const a=i.getFlattenedFilters();for(const c of a)Wv(o,c),o=wu(o,c)}(e._query,n),new Gn(e.firestore,e.converter,wu(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vd extends _d{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new vd(e,n)}_apply(e){const n=function(r,i,o){if(r.startAt!==null)throw new G(E.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new G(E.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oo(i,o)}(e._query,this._field,this._direction);return new Gn(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new Jr(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Id(t,e="asc"){const n=e,s=Yc("orderBy",t);return vd._create(s,n)}class wd extends _d{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new wd(e,n,s)}_apply(e){return new Gn(e.firestore,e.converter,Fa(e._query,this._limit,this._limitType))}}function TC(t){return hC("limit",t),wd._create("limit",t,"F")}function um(t,e,n){if(typeof(n=Be(n))=="string"){if(n==="")throw new G(E.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wy(e)&&n.indexOf("/")!==-1)throw new G(E.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Le.fromString(n));if(!Z.isDocumentKey(s))throw new G(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Np(t,new Z(s))}if(n instanceof Rt)return Np(t,n._key);throw new G(E.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qc(n)}.`)}function hm(t,e){if(!Array.isArray(t)||t.length===0)throw new G(E.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Wv(t,e){const n=function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(E.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(E.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class bC{convertValue(e,n="none"){switch(Js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ir(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertGeoPoint(e){return new ld(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Fh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(so(e));default:return null}}convertTimestamp(e){const n=ms(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Le.fromString(e);ke(mv(s));const r=new ro(s.get(1),s.get(3)),i=new Z(s.popFirst(5));return r.isEqual(n)||Dn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zv extends jv{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Yc("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class fa extends zv{data(e={}){return super.data(e)}}class Kv{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new wi(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new fa(this._firestore,this._userDataWriter,s.key,s,new wi(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const c=new fa(r._firestore,r._userDataWriter,a.doc.key,a.doc,new wi(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new fa(r._firestore,r._userDataWriter,a.doc.key,a.doc,new wi(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:RC(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function RC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(t){t=Wt(t,Rt);const e=Wt(t.firestore,_s);return cC(Hc(e),t._key).then(n=>Yv(e,t,n))}class Ed extends bC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}}function ct(t){t=Wt(t,Gn);const e=Wt(t.firestore,_s),n=Hc(e),s=new Ed(e);return Hv(t._query),lC(n,t._query).then(r=>new Kv(e,s,t,r))}function ls(t,e,n){t=Wt(t,Rt);const s=Wt(t.firestore,_s),r=AC(t.converter,e,n);return Td(s,[_C(ud(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,sn.none())])}function ye(t,e,n,...s){t=Wt(t,Rt);const r=Wt(t.firestore,_s),i=ud(r);let o;return o=typeof(e=Be(e))=="string"||e instanceof Wc?vC(i,"updateDoc",t._key,e,n,s):yC(i,"updateDoc",t._key,e),Td(r,[o.toMutation(t._key,sn.exists(!0))])}function Zs(t){return Td(Wt(t.firestore,_s),[new jh(t._key,sn.none())])}function rn(t,...e){var n,s,r;t=Be(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||lm(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(lm(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(s=d.error)===null||s===void 0?void 0:s.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let c,l,h;if(t instanceof Rt)l=Wt(t.firestore,_s),h=Oc(t._key.path),c={next:d=>{e[o]&&e[o](Yv(l,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Wt(t,Gn);l=Wt(d.firestore,_s),h=d._query;const f=new Ed(l);c={next:m=>{e[o]&&e[o](new Kv(l,f,d,m))},error:e[o+1],complete:e[o+2]},Hv(t._query)}return function(f,m,I,S){const T=new cd(S),k=new od(m,T,I);return f.asyncQueue.enqueueAndForget(async()=>sd(await qa(f),k)),()=>{T.Qa(),f.asyncQueue.enqueueAndForget(async()=>rd(await qa(f),k))}}(Hc(l),h,a,c)}function Td(t,e){return function(s,r){const i=new An;return s.asyncQueue.enqueueAndForget(async()=>YD(await aC(s),r,i)),i.promise}(Hc(t),e)}function Yv(t,e,n){const s=n.docs.get(e._key),r=new Ed(t);return new zv(t,r,e._key,s,new wi(n.hasPendingWrites,n.fromCache),e.converter)}function Qv(){return new hd("serverTimestamp")}function Ot(...t){return new dd("arrayUnion",t)}function Cu(...t){return new fd("arrayRemove",t)}(function(e,n=!0){(function(r){Xr=r})(sr),zs(new fs("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new _s(new CP(s.getProvider("auth-internal")),new OP(s.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new G(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ro(l.options.projectId,h)}(o,r),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),En(Sp,"4.5.0",e),En(Sp,"4.5.0","esm2017")})();const SC={apiKey:"AIzaSyDZuLxxtIRgoMd70trqb6uhcUMb-Zovg4E",authDomain:"connecthub-88e58.firebaseapp.com",projectId:"connecthub-88e58",storageBucket:"connecthub-88e58.appspot.com",messagingSenderId:"193205893959",appId:"1:193205893959:web:4ab9112ee5525209ba2a62"},F=Kg(SC);ve(F);const pa=x(F),PC="/assets/check-BK0B6DVF.png",DC={name:"SuccessMessage",data(){return{displayMessage:""}},props:{condition:{type:String,required:!0},group:{type:String},user:{type:String},user_id:{type:String}},mounted(){this.getMessage()},watch:{condition:function(t){this.getMessage()}},methods:{getMessage(){this.condition==="leaveGroup"?this.displayMessage="You have successfully left your group!":this.condition==="joinGroup"?this.displayMessage="You have successfully joined the group!":this.condition==="joinEvent"?this.displayMessage="You have successfully joined the event!":this.condition==="createEvent"?this.displayMessage="You have successfully created the event!":this.condition==="updateProfile"?this.displayMessage="You have successfully updated your profile!":this.condition==="loginSuccess"?this.displayMessage="You have successfully logged in!":this.condition==="registrationSuccess"?this.displayMessage="You have successfully registered!":this.displayMessage="Blah blah blah"},toggleSuccess(){this.showSuccess=!1,this.condition==="leaveGroup"?this.$router.push("/all_groups"):this.condition==="joinGroup"?this.$router.push({name:"SpecificGroupHome",params:{group:this.group,user:this.user}}):this.condition==="joinEvent"?this.$emit("close"):this.condition==="createEvent"?this.$emit("close"):this.condition==="updateProfile"?this.$emit("close"):this.condition==="loginSuccess"?this.$router.push({name:"UserDashboard",params:{user_id:this.user_id}}):this.condition==="registrationSuccess"&&this.$router.push("/login")}}},Xv=t=>(ue("data-v-82eb4e47"),t=t(),he(),t),CC={class:"modal"},kC={class:"model-flexbox"},NC=Xv(()=>u("img",{id:"successImg",src:PC,alt:"successCheck"},null,-1)),MC=Xv(()=>u("p",{id:"successMessage"},"Success!",-1)),OC={id:"message"};function xC(t,e,n,s,r,i){return _(),y("div",CC,[u("div",kC,[u("span",{class:"close",onClick:e[0]||(e[0]=(...o)=>i.toggleSuccess&&i.toggleSuccess(...o))},"×"),NC,MC,u("span",OC,j(r.displayMessage),1)])])}const bs=H(DC,[["render",xC],["__scopeId","data-v-82eb4e47"]]),LC="/assets/close-BO3kGNNg.png",VC={name:"ErrorMessage",data(){return{displayMessage:""}},props:{condition:{type:String,required:!0},user_id:{type:String},error:{type:String}},mounted(){this.getMessage()},watch:{condition:function(t){this.getMessage()}},methods:{getMessage(){this.condition==="errorLogin"&&this.error=="auth/invalid-email"?this.displayMessage="You entered an invalid email! Please try again":this.condition==="errorLogin"&&this.error=="auth/invalid-credential"?this.displayMessage="Incorrect password or email! Please try again":this.condition==="errorRegistration"&&this.error=="Firebase: Error (auth/email-already-in-use)."?this.displayMessage="The email you entered is already in use":this.condition==="errorRegistration"&&this.error=="Postal code invalid. Please try again."?this.displayMessage="Invalid postal code! Please try again.":this.condition==="errorRegistration"&&this.error=="Firebase: Error (auth/invalid-email)."?this.displayMessage="The email entered is invalid! Please try again.":this.condition==="errorRegistration"&&this.error=="Firebase: Error (auth/missing-password)."?this.displayMessage="You forgot to provide a password!":this.condition==="errorRegistration"&&this.error=="Please make sure all fields are filled."?this.displayMessage="You missed out some fields! Please fill them in.":this.condition==="errorRegistration"&&this.error=="Account already exists."?this.displayMessage="The email you entered is already in use":this.displayMessage="Something went wrong! Please try again"},toggleError(){this.condition==="errorLogin"?this.$emit("close"):this.condition==="errorRegistration"&&this.$emit("close")}}},Jv=t=>(ue("data-v-8bf0185e"),t=t(),he(),t),UC={class:"modal"},FC={class:"model-flexbox"},$C=Jv(()=>u("img",{id:"errorImg",src:LC,alt:"ErrorCross"},null,-1)),BC=Jv(()=>u("p",{id:"errorMessage"},"Oops!",-1)),GC={id:"message"};function qC(t,e,n,s,r,i){return _(),y("div",UC,[u("div",FC,[u("span",{class:"close",onClick:e[0]||(e[0]=(...o)=>i.toggleError&&i.toggleError(...o))},"×"),$C,BC,u("span",GC,j(r.displayMessage),1)])])}const Zv=H(VC,[["render",qC],["__scopeId","data-v-8bf0185e"]]),ni=t=>(ue("data-v-c31cb40f"),t=t(),he(),t),jC={class:"login"},HC=ni(()=>u("h2",null,"Welcome Back To ConnectHub!",-1)),WC={class:"loginbox"},zC=ni(()=>u("h3",null,"Login",-1)),KC=ni(()=>u("label",{for:"Email"},"Email",-1)),YC=ni(()=>u("label",{for:"password"},"Password",-1)),QC=ni(()=>u("img",{src:C_,alt:"Email Icon",class:"email-icon"},null,-1)),XC=ni(()=>u("img",{src:k_,alt:"Google Icon",class:"google-icon"},null,-1)),JC={__name:"LoginAuth",setup(t){const e=Kn(""),n=Kn("");let s=Kn(""),r=Kn("");const i=ve();yb();let o=Kn(""),a=Kn(""),c=Kn("");const l=()=>{zR(i,e.value,n.value).then(f=>{console.log("Login Success"),r=f.user.uid,s.value="success",o="loginSuccess"}).catch(f=>{console.log(f.code),s.value="error",o="errorLogin",e.value="",n.value="",a.value=f.code,c.value=!0})},h=async f=>{f.preventDefault(),f.stopPropagation();const m=new mn;try{const S=(await P_(i,m)).user;r.value=S.uid,s.value="success",o="loginSuccess"}catch(I){s.value="error",o="errorLogin",e.value="",n.value="",I.value=I.code,c.value=!0}},d=()=>{c.value=!1};return(f,m)=>(_(),y("div",jC,[HC,u("div",WC,[zC,u("form",{onSubmit:Hs(l,["prevent"])},[u("p",null,[KC,Ce(u("input",{type:"text",placeholder:"Email","onUpdate:modelValue":m[0]||(m[0]=I=>e.value=I)},null,512),[[Fe,e.value]])]),u("p",null,[YC,Ce(u("input",{type:"password",placeholder:"Password","onUpdate:modelValue":m[1]||(m[1]=I=>n.value=I)},null,512),[[Fe,n.value]])]),u("p",null,[u("button",{class:"login-btn",onClick:l},[QC,et("  Login with email ")])]),u("p",null,[u("button",{type:"button",onClick:h,class:"google-login-btn"},[XC,et(" Login with Google ")])]),qt(s)==="success"?(_(),je(bs,{key:0,condition:qt(o),user_id:qt(r)},null,8,["condition","user_id"])):ne("",!0),qt(c)?(_(),je(Zv,{key:1,condition:qt(o),user_id:qt(r),error:qt(a),onClose:d},null,8,["condition","user_id","error"])):ne("",!0)],32)])]))}},ZC=H(JC,[["__scopeId","data-v-c31cb40f"]]),ek={name:"Login",components:{LoginAuth:ZC,CommonHeader:hh}};function tk(t,e,n,s,r,i){const o=ee("CommonHeader"),a=ee("LoginAuth");return _(),y(fe,null,[D(o),D(a)],64)}const nk=H(ek,[["render",tk]]),eI="/assets/marketplace-BR0g9HTo.png",tI="/assets/groups-Cl-qUBZa.png",sk={},rk={class:"container"},ik=ic('<section class="hero"><h1>Welcome to ConnectHub</h1><p> Your neighborhood&#39;s social nexus! ConnectHub is a vibrant online platform designed exclusively for local residents, fostering a sense of community and connection. </p></section><div class="features"><div class="feature"><h3>Marketplace</h3><img src="'+eI+'" alt="Placeholder Image" width="82%" height="82%"><p> Discover and support local businesses, services, and events, enhancing the neighborhood&#39;s economic ecosystem. </p></div><div class="feature"><h3>Community Groups &amp; Events</h3><img src="'+tI+'" alt="Placeholder Image" width="85%" height="85%"><p> Explore and join various groups within your neighborhood, each offering a unique blend of interests and activities where like-minded people can connect. </p></div></div>',2),ok=[ik];function ak(t,e){return _(),y("div",rk,ok)}const ck=H(sk,[["render",ak]]),lk={name:"Landing",components:{CommonHeader:hh,LandingInfo:ck}};function uk(t,e,n,s,r,i){const o=ee("CommonHeader"),a=ee("LandingInfo");return _(),y(fe,null,[D(o),D(a)],64)}const hk=H(lk,[["render",uk]]),dk="/assets/add-icon-CLt_SE5N.png",fk="/assets/approve-BJfjPXD4.png",pk="/assets/buy_icon-BWYa-b_D.png",mk="/assets/calendar-BK7zYm0s.png",gk="/assets/check-BK0B6DVF.png",_k="/assets/close-BO3kGNNg.png",yk="/assets/discussion-DJYMycNg.png",vk="/assets/football_group-BLoeftOn.jpg",Ik="/assets/google_logo-BNc63-Sz.png",wk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMwAAADMCAMAAAAI/LzAAAABSlBMVEX////qQzU0qFNChfT7vAU8gvTx9P5ckvVUj/XJ2fv7uADi6v1yn/Y3gPT/vQD7ugDqPi8tpk4kpEnpNiX//fj7tAD935/3+/jpLhrpOiqt2LjpMh/M5tL85eT++vr8wAAmefP3+f7n8+oWoUGd0Kn2urb1rqrzop3sVUr97+7venLoJg3oHQD4y8nxkYvtaF/62dfY4/yPsvibuvm5zvoAnTNwvILtYVfucWj+89n80Xb92Iz8yFX96b/7wCzpNjf7xUD+9+j8z2gAplh+p/ddtnNGrmCGxZS83sTwh4H6wnDtWh3wdCn0jCDsUTL2oBjtYS7+zQDygCTtZEf6xYb95rDi1Iu8sytptGPouhadsTnYuCB1rURUq0yrxPmLrz/gy26jzcE1ht8zn34/j9A9lLs6m582pWY8lrEtqjM5nZM2o3NAjNk8kcV4+df5AAAKvklEQVR4nO2c6X/aRhrHQYCvGNBhm0NcRtxIQBJzOKmTprE4uk3T7bHZtIl3t2eO5v9/uyOBbWFmpBkxI4l8+L1KL6QvzznPMzQU2mqrrbbaaqtNVTPf06q1haqalm8W/H4lF2pq9dZQaqfTsixLC4E/yum23GjVq73NYCoU8tVZo62qaSkThoqXZPCPw6Nar1kIMFOhma+2wmpb5uEYy0hpVR3We/mm328NUzOv1YfttoQBcqNMWuVn1V7AeAq9ameYTiMcy9ZCcjvcqgWIp1mtd6U0iUmWeaR2Y1br+U1hqldvhd3YZNk+Urej+Z4OtM4wQxQnKGWkRqvqK47WavBrGuVWvBTuVn1D6XUzPA2j3OLwmaHmC0qzq1IzioWn3fA+FTQ7qkQfxVBGbXmbqJvVcJoNiiGZr3mHU9Ba7qsKjvj2yKs8na+HZZYohuRwPe8FS3XE1ixz8ekR+zTd9MAscwHjMHY1bUSl3GOJz7SYulq1waC0oCU12JXQQsc7s8yV4WuMWPKjtrcoYSNJd5iUnF6DYZ1Eq80icDSeUfviSNOl3qxVUcMW9pIblD2tqnoc+halu3Qdre51GrOIdtDUMz7ahTYL3fOkvyw+2kUe0WWp+hgvMuXY19r+sUhduklZ89EutFl6Yd9qJfAxuiz5oUcnMYjSlFlCLe/75BsWynksVKfAws/3f8Y2kCT6aNeXUHW9eDGXY3Jj1Jp1gGat0ZBX1baM9aHUWXqNNRKZ3DaWLlovn2/eKJ/vabXOMK067gmpsxRarg0jqWqrmi/A9q/gbza1Tka1HVfR7pONLsYdCZ+WZo5ziHw9nEZ2SbTrC6iWYTdOxmf4IebKSGuF4Q0sfZZmy0WF4aVGi+CMm+/AVlX0WQo1chZebswIj+sA524yoF4rjUxGHDFS2DlUVqUBnCUW2rUSONmMdKzESyN369VCtWUxDvWcDFQlZZHWWEGAzHbtBiyGZAVSJ5O76yyHClpDYmaXUI2wJ1PXnaE2R4YrMIgXIJWQhcJaaKZSPyMvPpgoLWfSVMandZV+TgbKExkmM6T0DhqTzdLX/yBhGQXndhVE50+K3+CzsN3Ura1HyWjxxbdPPwuW8y+T0Wjx5Xc4NBkmuZSiHkcNFY8xXI0fBpzl2RfJOc3BC0cWPhhXEdE6iS5ULL50gKFRK5nq6NFB9AYnapsG1I7fL+ukiyfJ6K3++Q2aRur6/a6OOjmIWlVEBg6fCXSxNHT+RTK6TPPyOziM7M9dShJdRO8KkaPlju+XkJ109PhglebgxbcrLBkfboWSyqz+KzTRlytZTaoF3jChi1XDmBXn+E5zIwW8JTN0dAKFMVzt+yUaPujlMmS0MggYox14eosje3zx2JWeoVjMrGYJHFY32mjq4hgNEy0mr9uBgB8u57L2ZTCa6CJH83W/3xRDR3Yo88AxaPhG8FMZCBk7L5vjGAfQzMzvF8XRT44wIA18/5QPflcGZB8yN4Hzg9/viaUnkF4Goh/dfPbpDhOdIh+IYRig43MXLPce7O2y0OF9xAOPnEPG0IELltC9w3iMheL7iAfalsxblq9cwkRYqHSGeOAJFszxRaBgrhBR8xVWzBwfBQkm/mAH/kDYwWxFyagbFnYwlwiYIg6Mu5BhBhPbvQd/IJ6XnQQLJgLPzXaHGQuMq/hnBhOJw2HO8WCeBQumBC80eDBJV8nMcxj4ZOYuy5OgwcCr5k84MAdfbgYMasy0DPMoaDDwFmBDYR5uYeYwjwMGE/+sYB58Rm62hdkwmM0smgiYDW1n4NlsQxvNdWACdwSAtzObeTgrXcEfuInHZuTgbBMHGqjD2UaOmpAwmzgEjJQQk/NNHM9GEKOmjRycx/YQQ0DGKw0mMPFDBAzTZZPXg3O8NWDi4F/uYEj3SFgwiG4mhLegTSRe/dsNzOUeqfBgEA0A1uo88frn50KOHOb0/j6pDnFsg9ycOV9qSCZ+efOcEybkMC7w8aIMtdN0vG4CXOwtx3GCXvYAZn8XwzLxXdS22ekiUCL6MzdX1gOYKxwvi1+iMrND2UxE3yxYxEGKPcwDHC8rwQ/NpuyONInX3PMFjOCBafAKUxyZzOyuNSair65RvDHNGQ5LbA8Z/zYXTo2MfMvCCQJr0+xgeVkcedvEEHxCM8/IVokDxgntPk4uQy/OTUEvaQMXe7vMAmgYm+aqhMESiT+0+wzY9XngYtyKRLa1Bi/8YxFk/Te1+sOGxOs3qywcp0xY5oAzLMMgbzQstPKTk8Qvb2EswDZTdiw7u1itTPzS4XPu5LPEKziKkdHYweBFTCRiU2VMLf1MK5F4czfyLY6mM4PBY4nt2SVmQ9b+LPF6JYtZ1a8wYsFzMhAyjp9089NGkJFtSEwaFwcbDO1jOlnMNjGbuv7R6W2PbCMW+XkHe1pgn8tMPV642H+cWVicbHZwRx8YXnbdBbyCVpe7ot/WnGI1ZYbQJ2arHiWNI6Vd6FtsM6FMc4XrY5ES+ihj0flBEcPF2NCcRfBGTBgVc6H/Ioo+nIbm2WYfmyVSwgh/Q+U+AQzoOanR4NslEscJf1MDhYhGoORpZyVsFuReZlUpItNwIpXqefoQs1jODYMV/qYqRKYxOpu1XW3nkIAFMy/PlRoLZDTKILcWzun9PRKW+K7defmupoSm4cRxdo3IKf/vVxIWIsMA05DlACBBnLiNnNRU7//2O0nEIFdMcOU4QkczjOMOJzfhRE756w/8XBYjMgz4tkhzgGkcnbwfyE3GovG9idyfEcy2zH7CBFN5IBLTgLP0mAxnOhgLwvV/+9uvWDROQxnoc8gdzXwlboDrbKmsLgiWh4h/YQVO/BK/xtyo4sI05jspAkbwpKYDRbnzdQniu7hj4Dgf/aGPc+NoC54+4Cmn4KUnlUrlKnq/D/l04f2HPSca+zEmUjnS0mmV0lf0STZXLgOma4G/KOemFV3oK6jv6f3Hv+0XzbFDF05mKOvaNKZEBRCN9cGkMtdgoBuMSJD5l8B9suudUT9lwtCEPD+vIokAyhT4E8a/Lyjv9tBZDb0rdxR5I0BDyoe/UTSlQ9csoNqM1/M0dxI/foJntTjq3g+eXLQ1FCSM30EDB/9IhqARfaERPkACZ42AWSjb94MGdJ4r00C7RTk2jR9hAwLn/afl5oa08Yer4otpQAH90xo4NldLNoPG0kfHdtcM/mul/KIBffSiubG9v0Coyt0G1yua8bwdiKHvYrmQTzkNVLkPwNXQ/68MlzS+1BvjjPPx9zhlFlA9BX9SNAicP2izGMcbP7pOo+1msW0s+9NDj9ncbElNvA8chheosh4fCQRh/ZE8WrmBl8YRx2yvgqUmnmU1QcEewblWduBNOyCKFQ8uUJcrHHvjCIrO8BKYRakcc+N4Y5YFTpZjWXOAWdbbxBGqPIHNV+lIEaZeopg4OhscUWFZW5DK6aJAOXYEkfmdaTTO7bKICgrpsoo2zkQX6DQFoBjr3qUwhMqVAbd+phaV8WCd7Ts1lacVXVyHR1AEPetpMrZTKjed6A6bF7RNRL0yDYJRbpUy7ANd7tmC9IVBNlcOilEsSpXL0wHX7+N5HADpjyvI1WcQlAIWmozBeyrIHGesB/t9DsR7gDksSpVzlcFYNFd/VhnbQEGfAHv4/YYuBKBy2RvlcoGMjq222mqrrbbC0/8Bfz+68Ka6YAgAAAAASUVORK5CYII=",Ek="/assets/groups-Cl-qUBZa.png",Tk="/assets/icon1-C55wAPwE.png",bk="/assets/icon1old-BkHe9yNd.png",Ak="/assets/icon2-Q44kieOD.png",Rk="/assets/icon2old-DSz90K4x.png",Sk="/assets/icon3-CpkeV3nl.png",Pk="/assets/maillogo-CoTVKf5L.png",Dk="/assets/marketplace-BR0g9HTo.png",Ck="/assets/sell_icon-gKPplyWn.png",kk="/assets/settings-Dj2uxkGs.png",Nk="/assets/shopping_cart-BQep3EI0.png",Mk="/assets/unknown-ClRJyugK.png",Ok="/assets/user-DPGe0-is.png",xk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAACMCAYAAAC54tH3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAoaSURBVHgB7Z1dsFZVGcf/G4EcESVMR5MSAT/oSw1KAYUB0czqIsyPrC6q6aLRnPKm6bIbLhyraRq9kCmsLM3QzK+wAgTD8mMacqYUSAMNQo84JsqgcFj9H5/teKS997v3++693/dZ7/Ob+c8+vHtzzllr/c9aa6+PZwGO4ziO4ziO4ziO4zg2SDCEBGACL0dTU6kjqfHU4entN1LtpV6mdjOT9mPIiNYYLPxJvJxAzaDmUHOp06gToaYom3Z+K7xEbecXz/E/beLXj1KbqR389z5ESBTGYIGN4+U46mzqnPR6WvrZeDSDGGaEehJqlIflygzdiQgwbYygTcGV1LnUhdS70V92URupu6kHmbnPwmkHmuEoahm1lhqlwoDqILWRujxoP8ZpAmbuTOoGascAmyFPI9SN1Klw6oGZeS5164DXDmW1l7o9TdNhcKrBTBtHLaAeMlDY3UqamY/CKQcz6xRqFbXPSAH3qt9KmuFkw8yZTC0fIkOM1YvU96ij4LwNM2QxtcVIITapp6mlGHaYCe+ibqEOGCm4NiSd7BWSNxhGmPD51CYjhdUPbaYWYVhgYsdTV1GvGimgfkry6FuInaCvoStDHGMSbeonIdaOKRP2fmqDkYIYRK2WPERLtDKJxgTNgk4szYbTC9upxSy0f6FhxqFhaIrTefkj3BR1cBK1nnn6ATRMo8YIOh2+Bpogpx7eR/0uzdvGaKwpSV19P9wUTSELgpYmulCodhoxBk1xMi/roe52mkMWAi1hIT6Nmqm9KUl7zmvhpmgDyet7QgN5Xasx0nftm6jpcNpCOvW/DDWXZd01xg+oT8BpG+mIyiBYbYt/ajMGf6mv8vIVOP3iS9SXURO1dD5pioXQN5BJcPrJa9SFiW5l6ImejRF0evgJ+ELXQeFv1Hks2D3ogZ6bkoPAT+GmGCTOoFagR3qqMVhbnM/LA/AVz4PGKLRJWYsu6doYNMVk6D7OGbALKzzcx1xcRWc/Bs0P2d54BXSJXeNzSQ2ylZrTa5NSGRrj+gGblq6qrdT8gvSdFeyvQ12ONgm6xH/EUAYdKlk217Gmk2eCLtC1lLaxej20uTWBP+wuQ5mTpWUV0vo5Q+nK0h2hjSaRP2SeoUzJkjQPpftW8iz1jJG0ZUlqjQWoSCUnBY01cR1sIzEsQtmH02d/D7tMpL6DilStYuah4QUiLbAN1RmBbT5VtdaoaoyrYZ8DqM4o7HNNlYdLGyPo9O6n4VhFOtGnl324So3xDeoIOFaRsi5da5QyRtBQQZfCsc5ng0Ys7EjZGuNi6j1wrHM8taTMg2WNUanj4gw0pV4gOhoj6ILTeXBiYXGZ5qRMjbEYtmcZnXcio75f7PRQmQL3V9T4WNRp/qTwZtBY3PPhxMYF0HDauXSqMT5GvRdObEyBlm0unYxReVbOMUNh2XYyxsfhxMrZRTdzjRH0YJfG4zA4fePUULAPqKjGkANffLQzXqTzmdt/LDLGbPj4RczIoqvc/UBFBT8XTux8OO9GkTHOhBM7c/JuFBnDA5/ET+7CnSJjnAQndqbl3cg0RtCVxVPhxM7RQc+g/T/yagwxxVAe1jtkSBlnhqLOM8YUOMPCMVkf5hnDF/0OD5mjn3nGmAhnWKjUx5gAZ1jIPEnJh7ydTPKM8QacYWF/1ofjqjzsRMnrWR/mGeNVOMPC3qwP84yxG86w8HLWh3nGkEhvpYOLGKOb0JOxhquUMn4p60amMRLtfP4XcXICqtPaIXUtszup2PkUdiBOKp2OkE4oxrooelvejSJjNHKk0gAwjYV9UYXnZXNO6YAjxvh33o0iY/wV8XJTmegyQQ/k+SHiZVPejSJjPIF4eeskwtylbbx3Di/rqJmIl8fzbuSuuQgaUfYf0NXEsSIdr1XUndRz0F66LJCVHf6XI+60S1pn0QDPZN0sMoZMx26B712Nleep6TTAvqybuU1JoqflbIETK0/mmULoNLv6KJxY+UvRzU7G+DOcWCks207GeAQ5Y+mOaWTwsrA16GQM6aD8AU5sPMz+xa6iBwqNkejRUBsQPzJpKK+rMhI4DEsO7un0QJmlfT+HGiRG5LgJOftsRqrp0AEtGTL/E+JEAuY/iDrgmMa6ATiQpU69Ejqcaiw7tKhrqdeMpKms6msB+M0uMZTwQrHq2x+qHX11pZW0ldQlqIugexz/YyjxRfoFKhJ0XsVSGvP0Qih5zHqp7QOJLtq5C/aRkb5vozrXImdtpDF+nY5od6TKvhKZfrbeCX08KViDUMBT1GbYRgzxo7IPlzZGopmzCrbpavFRemCedWPcm5ZhKaruRCvtuAGll+bAelNSqewqGSPRd/uNsMux6J7jYJf70GHS7FC62bsqnTerWxg/FLrYyR90+8AZsMt3k4onQXZjDJmVuxc2kUjHS1EdOd/DarC639AUj6EN+Bd0StCjoS29w78pvlb9PVRYssdnj6U2W0nfIRqhZqELugqDQAdu5eX7MEiitcaKkBN7aiypga5HQQTdAWcl0/tPtAkzbTK11chfTpbWh4IV4Lx3FvWIkbRkScpmMrqkp8h8QY9qlBlKq3s7JQSA9JfWQAe+JD9kO6JsMpKV4l1nbJ+RjuYFiW5/6IqeQzbSHLfycgWcQeI2Fuzn0QN1GEPaapnKtfw6FxOysv8jSU5AlLL0HIOLv8ArvHwdHmxlEJAy+FqvphBqCc6W6NjGNxHvSi8rXJPUtBCnzqh9N1M/g9MvfkxTrERN1BovPKjRpCe8EE6bPEBdljbrtVB7IPmgQ8fyi86G0wbbqEUsyGdRI42cMBB0xfVa+JknTSNbHhYmBZFxuqWRyMDp1noJabQTTlNIDXFRE6YQGgsZneiKp8tYe2yHUzfyB/eFROOXNEIjTclYgvY1ViPeyHdt81ZN0WiMtMaNIQTd4SV9jpPh9ILUEJ/Ji4JTJ62cPpC2g/IKuxpOtzxEfbINU7SOzKuM6loIS9PX/dYodXMYhiNEmMirqT1GCqafkjy6KsQdJO6dMLHnUU8ZKaB+aBM1D8MIEz4xaDDWA0YKqw1JXtwSco6kGiqYCYupLUYKrknJcrwlcN6GGXIkdV3Qlc2WCrMOyYr75cHuUsLmYebMpO6kDhop1F4NcUfQKMxOGZhZc6m7jRRwN7o/TWP8r6F1w0w7jFpA3RbieL2VMYnbJU1w6iFoE3MD9bwRE4zVLurG4E1GczBzJ1GXUhvSv8BBNYP0kdZRy6gpMEYrk2hNwQw/kZfzqYuh1fM09BeJoiybl9ZRv2LmvgijmDbGWIIOG4tJZLJODqH5IDSmRVNpPEC9AN3HK6G1ZfZ4TaKfmycaYxwKjXI4L8dDNyTL0PKZ0BplOnUMyqed3+rNmkDib8saCDkSTE5/EkPsLBvszBrRGqMIlvQEXqZC2/4joMPPE9LbsllHTj6SApemYE/iR5o7juM4juM4juM4juMMLP8Dlji5fb0sLtkAAAAASUVORK5CYII=",Lk={props:{isVisible:Boolean,userId:String,registrationStatus:String},methods:{close(){this.$emit("close"),this.registrationStatus==="success"&&this.$router.push(`/user_dashboard/${this.userId}`)}}},Vk={key:0,class:"modal-overlay"};function Uk(t,e,n,s,r,i){return n.isVisible?(_(),y("div",Vk,[u("div",{class:"modal-content",onClick:e[1]||(e[1]=Hs(()=>{},["stop"]))},[rE(t.$slots,"default"),u("p",null,[u("button",{class:"close-button",onClick:e[0]||(e[0]=(...o)=>i.close&&i.close(...o))},"Close")])])])):ne("",!0)}const Fk=H(Lk,[["render",Uk]]),Zc="/assets/icon1-C55wAPwE.png",bd="/assets/icon2-Q44kieOD.png",Ad="/assets/icon3-CpkeV3nl.png",$k={data(){return{selectedIconPath:null}},props:{isVisible:Boolean},methods:{selectIcon(t){this.selectedIconPath=t},submitIconSelection(){this.$emit("iconSelected",this.selectedIconPath),this.$emit("close")}}},Bk={key:0,class:"icon-selection-popup"},Gk=u("p",{class:"icon-selection-title"},"Choose your icon",-1),qk={class:"icon-container"},jk=u("img",{src:Zc,alt:"Icon 1"},null,-1),Hk=[jk],Wk=u("img",{src:bd,alt:"Icon 2"},null,-1),zk=[Wk],Kk=u("img",{src:Ad,alt:"Icon 3"},null,-1),Yk=[Kk];function Qk(t,e,n,s,r,i){return n.isVisible?(_(),y("div",Bk,[Gk,u("div",qk,[u("div",{class:"icon-option",onClick:e[0]||(e[0]=o=>i.selectIcon("icon1.png"))},Hk),u("div",{class:"icon-option",onClick:e[1]||(e[1]=o=>i.selectIcon("icon2.png"))},zk),u("div",{class:"icon-option",onClick:e[2]||(e[2]=o=>i.selectIcon("icon3.png"))},Yk)]),u("button",{type:"button",onClick:e[3]||(e[3]=(...o)=>i.submitIconSelection&&i.submitIconSelection(...o))},"Confirm")])):ne("",!0)}const nI=H($k,[["render",Qk]]),sI="/assets/add-icon-CLt_SE5N.png",Xk={components:{IconSelectionPopup:nI,SuccessMessage:bs},data(){return{username:"",address:"",postalCode:"",dateOfBirth:"",gender:"",telegramHandle:"",showIconSelection:!1,selectedIcon:""}},methods:{submit(){this.$emit("submit",{username:this.username,address:this.address,postalCode:this.postalCode,dateOfBirth:this.dateOfBirth,gender:this.gender,telegramHandle:this.telegramHandle,selectedIcon:this.selectedIcon})},iconSelected(t){this.selectedIcon=t,console.log(this.selectedIcon)},handleCancel(){this.$emit("close")}}},Je=t=>(ue("data-v-95f06724"),t=t(),he(),t),Jk={class:"popup-container"},Zk={class:"popup"},eN=Je(()=>u("h3",null,"Complete Your Profile",-1)),tN={class:"profile-icon-container"},nN={key:0,class:"selected-icon"},sN=Je(()=>u("img",{src:Zc,alt:"Selected Icon"},null,-1)),rN=[sN],iN={key:1,class:"selected-icon"},oN=Je(()=>u("img",{src:bd,alt:"Selected Icon"},null,-1)),aN=[oN],cN={key:2,class:"selected-icon"},lN=Je(()=>u("img",{src:Ad,alt:"Selected Icon"},null,-1)),uN=[lN],hN={key:3,class:"image-placeholder"},dN=Je(()=>u("img",{src:sI,alt:"Profile Icon Placeholder"},null,-1)),fN=[dN],pN={class:"registerbox"},mN={class:"registerbox-content"},gN=Je(()=>u("label",{for:"username"},"Username",-1)),_N=Je(()=>u("br",null,null,-1)),yN=Je(()=>u("label",{for:"address"},"Address",-1)),vN=Je(()=>u("br",null,null,-1)),IN=Je(()=>u("label",{for:"postalCode"},"Postal Code",-1)),wN=Je(()=>u("br",null,null,-1)),EN=Je(()=>u("label",{for:"dateOfBirth"},"Date of Birth",-1)),TN=Je(()=>u("br",null,null,-1)),bN=Je(()=>u("label",{for:"gender"},"Gender",-1)),AN=Je(()=>u("option",{value:"male"},"Male",-1)),RN=Je(()=>u("option",{value:"female"},"Female",-1)),SN=[AN,RN],PN=Je(()=>u("br",null,null,-1)),DN=Je(()=>u("label",{for:"telegramHandle"},"Telegram Handle",-1)),CN=Je(()=>u("br",null,null,-1)),kN=Je(()=>u("button",{class:"button",type:"submit"},"Submit",-1));function NN(t,e,n,s,r,i){const o=ee("IconSelectionPopup");return _(),y("div",Jk,[u("div",Zk,[u("span",{class:"close",onClick:e[0]||(e[0]=(...a)=>i.handleCancel&&i.handleCancel(...a))},"×"),eN,u("form",{onSubmit:e[9]||(e[9]=Hs((...a)=>i.submit&&i.submit(...a),["prevent"]))},[u("div",tN,[r.selectedIcon==="icon1.png"?(_(),y("div",nN,rN)):r.selectedIcon==="icon2.png"?(_(),y("div",iN,aN)):r.selectedIcon==="icon3.png"?(_(),y("div",cN,uN)):(_(),y("div",hN,fN)),u("button",{class:"iconbutton",type:"button",onClick:e[1]||(e[1]=a=>r.showIconSelection=!0)}," Choose Profile Icon ")]),u("div",pN,[u("div",mN,[gN,Ce(u("input",{type:"text",placeholder:"Username","onUpdate:modelValue":e[2]||(e[2]=a=>r.username=a)},null,512),[[Fe,r.username]]),_N,yN,Ce(u("input",{type:"text",placeholder:"Address","onUpdate:modelValue":e[3]||(e[3]=a=>r.address=a)},null,512),[[Fe,r.address]]),vN,IN,Ce(u("input",{type:"text",placeholder:"Postal Code","onUpdate:modelValue":e[4]||(e[4]=a=>r.postalCode=a)},null,512),[[Fe,r.postalCode]]),wN,EN,Ce(u("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=a=>r.dateOfBirth=a)},null,512),[[Fe,r.dateOfBirth]]),TN,bN,Ce(u("select",{placeholder:"Gender","onUpdate:modelValue":e[6]||(e[6]=a=>r.gender=a)},SN,512),[[Qu,r.gender]]),PN,DN,Ce(u("input",{type:"text",placeholder:"Telegram Handle","onUpdate:modelValue":e[7]||(e[7]=a=>r.telegramHandle=a)},null,512),[[Fe,r.telegramHandle]]),CN,D(o,{isVisible:r.showIconSelection,onIconSelected:i.iconSelected,onClose:e[8]||(e[8]=a=>r.showIconSelection=!1)},null,8,["isVisible","onIconSelected"])]),kN])],32)])])}const MN=H(Xk,[["render",NN],["__scopeId","data-v-95f06724"]]),ON={components:{AuthPopup:Fk,GoogleAdditionalInfoPopup:MN,IconSelectionPopup:nI,SuccessMessage:bs,ErrorMessage:Zv},data(){return{email:"",password:"",username:"",address:"",postalCode:"",dateOfBirth:"",gender:"",telegramHandle:"",user_id:"",auth:ve(),showIconSelection:!1,selectedIcon:null,isLoading:!1,showPopup:!1,registrationStatus:"",errorMessage:"",showError:!1,message_passed:""}},methods:{async isPostalCodeValid(t){if(/^\d{6}$/.test(t)){const n=`https://www.onemap.gov.sg/api/common/elastic/search?searchVal=${t}&returnGeom=Y&getAddrDetails=Y&pageNum=1`;try{const r=await(await fetch(n)).json();if(r.found>0){for(const i of r.results)if(i.POSTAL===t)return!0}else return!1}catch(s){return console.error("Error fetching data: "+s.message),!1}}else return!1},async register(){let t=!1;try{const{user:e}=await WR(this.auth,this.email,this.password);if(t=!0,!await this.isPostalCodeValid(this.postalCode))throw this.registrationStatus="error",new Error("Postal code invalid. Please try again.");if(!this.email||!this.password||!this.username||!this.address||!this.postalCode||!this.dateOfBirth||!this.gender||!this.telegramHandle||!this.selectedIcon)throw this.registrationStatus="error",new Error("Please make sure all fields are filled.");const s={uid:e.uid,username:this.username,email:e.email,address:this.address,postalCode:this.postalCode,dateOfBirth:this.dateOfBirth,gender:this.gender,telegramHandle:this.telegramHandle,selectedIcon:this.selectedIcon,events:[],groups:[],receivedRequestforItem:[],sentRequestforItem:[],listedItem:[]};this.user_Id=e.uid,this.userId=e.uid;const r=C(pa,"users",e.uid);await ls(r,s),console.log("Registration Success"),this.registrationStatus="success",this.message_passed="registrationSuccess"}catch(e){if(console.error("Error during registration:",e),this.registrationStatus="error",this.showError=!0,this.message_passed="errorRegistration",this.errorMessage=e.message,console.log("hereeee -->",this.errorMessage,"lol"),t){const n=this.auth.currentUser;n&&await XR(n).catch(s=>{console.error("Error deleting user:",s)})}}},async registerWithGoogle(t){this.email="",this.password="",this.username="",this.address="",this.postalCode="",this.dateOfBirth="",this.gender="",this.telegramHandle="",this.selectedIcon=null,t.preventDefault(),t.stopPropagation();const e=new mn;try{const s=(await P_(this.auth,e)).user;this.showPopup=!0,this.user_Id=s.uid;const r=C(pa,"users",s.uid);if((await K(r)).exists())throw this.registrationStatus="error",new Error("Account already exists.");const o={uid:s.uid,email:s.email};await ls(r,o)}catch(n){console.error("Error during registration:",n),this.registrationStatus="error",this.errorMessage=n.message,this.showError=!0,this.showPopup=!1,this.message_passed="errorRegistration",console.log("hereeee -->",this.errorMessage,"lol")}},async handlePopupSubmit(t){if(this.isLoading)return;this.isLoading=!0;const e=this.auth.currentUser,n=C(pa,"users",e.uid);try{const s=await this.isPostalCodeValid(t.postalCode);if(console.log(s),!s)throw this.registrationStatus="error",new Error("Postal code invalid. Please try again.");if(!t.username||!t.address||!t.postalCode||!t.dateOfBirth||!t.gender||!t.telegramHandle||!t.selectedIcon)throw this.registrationStatus="error",new Error("Please make sure all fields are filled.");await ls(n,{uid:e.uid,email:e.email,username:t.username,address:t.address,postalCode:t.postalCode,dateOfBirth:t.dateOfBirth,gender:t.gender,telegramHandle:t.telegramHandle,selectedIcon:t.selectedIcon,events:[],groups:[],receivedRequestforItem:[],sentRequestforItem:[],listedItem:[]},{merge:!0}),this.registrationStatus="success",console.log("Additional information saved successfully"),this.message_passed="registrationSuccess",this.showPopup=!1}catch(s){console.error("Error saving registration information",s),this.registrationStatus="error",this.errorMessage=s.message,this.message_passed="errorRegistration",this.showError=!0}finally{this.isLoading=!1}},iconSelected(t){this.selectedIcon=t,console.log(this.selectedIcon)},closeGooglePopUp(){this.showPopup=!1,console.log("working")},closeErrorMessage(){this.showError=!1},async cancelGoogleAuth(){try{await this.auth.currentUser.delete(),console.log("User account deleted successfully"),this.showPopup=!1}catch(t){console.error("Error deleting user account:",t)}}},computed:{imageSrc(){return console.log(`@/assets/${this.selectedIcon}`),new URL(Object.assign({"/src/assets/add-icon.png":dk,"/src/assets/approve.png":fk,"/src/assets/buy_icon.png":pk,"/src/assets/calendar.png":mk,"/src/assets/check.png":gk,"/src/assets/close.png":_k,"/src/assets/discussion.png":yk,"/src/assets/football_group.jpg":vk,"/src/assets/google_logo.png":Ik,"/src/assets/googlelogo.png":wk,"/src/assets/groups.png":Ek,"/src/assets/icon1.png":Tk,"/src/assets/icon1old.png":bk,"/src/assets/icon2.png":Ak,"/src/assets/icon2old.png":Rk,"/src/assets/icon3.png":Sk,"/src/assets/maillogo.png":Pk,"/src/assets/marketplace.png":Dk,"/src/assets/sell_icon.png":Ck,"/src/assets/settings.png":kk,"/src/assets/shopping_cart.png":Nk,"/src/assets/unknown.png":Mk,"/src/assets/user.png":Ok,"/src/assets/warn.png":xk})[`@/assets/${this.selectedIcon}`],import.meta.url).href}}},_t=t=>(ue("data-v-a1da6a77"),t=t(),he(),t),xN={class:"register"},LN={class:"registerbox"},VN=_t(()=>u("h3",null,"Sign Up",-1)),UN={class:"form"},FN={class:"formcol"},$N=_t(()=>u("label",{for:"username"},"Username",-1)),BN=_t(()=>u("label",{for:"address"},"Address",-1)),GN=_t(()=>u("label",{for:"postalCode"},"Postal Code",-1)),qN=_t(()=>u("label",{for:"dateOfBirth"},"Date of Birth",-1)),jN=_t(()=>u("label",{for:"gender"},"Gender",-1)),HN=_t(()=>u("option",{value:"male"},"Male",-1)),WN=_t(()=>u("option",{value:"female"},"Female",-1)),zN=[HN,WN],KN=_t(()=>u("label",{for:"telegramHandle"},"Telegram Handle",-1)),YN={class:"formcol"},QN={class:"profile-icon-container"},XN={key:0,class:"selected-icon"},JN=_t(()=>u("img",{src:Zc,alt:"Selected Icon"},null,-1)),ZN=[JN],eM={key:1,class:"selected-icon"},tM=_t(()=>u("img",{src:bd,alt:"Selected Icon"},null,-1)),nM=[tM],sM={key:2,class:"selected-icon"},rM=_t(()=>u("img",{src:Ad,alt:"Selected Icon"},null,-1)),iM=[rM],oM={key:3,class:"image-placeholder"},aM=_t(()=>u("img",{src:sI,alt:"Profile Icon Placeholder"},null,-1)),cM=[aM],lM={class:"emailpwgroup"},uM=_t(()=>u("label",{for:"Email"},"Email",-1)),hM=_t(()=>u("label",{for:"password"},"Password",-1)),dM=_t(()=>u("p",null,[u("button",{type:"submit",class:"register-btn"},[u("img",{src:C_,alt:"Email Icon",class:"email-icon"}),et(" Sign Up With Email ")])],-1)),fM=_t(()=>u("img",{src:k_,alt:"Google Icon",class:"google-icon"},null,-1)),pM={key:0,class:"backdrop"};function mM(t,e,n,s,r,i){const o=ee("IconSelectionPopup"),a=ee("GoogleAdditionalInfoPopup"),c=ee("SuccessMessage"),l=ee("ErrorMessage");return _(),y("div",xN,[u("div",LN,[VN,u("form",{onSubmit:e[11]||(e[11]=Hs((...h)=>i.register&&i.register(...h),["prevent"]))},[u("div",UN,[u("div",FN,[u("p",null,[$N,Ce(u("input",{type:"text",placeholder:"Username","onUpdate:modelValue":e[0]||(e[0]=h=>r.username=h)},null,512),[[Fe,r.username]])]),u("p",null,[BN,Ce(u("input",{type:"text",placeholder:"Address","onUpdate:modelValue":e[1]||(e[1]=h=>r.address=h)},null,512),[[Fe,r.address]])]),u("p",null,[GN,Ce(u("input",{type:"text",placeholder:"Postal Code","onUpdate:modelValue":e[2]||(e[2]=h=>r.postalCode=h)},null,512),[[Fe,r.postalCode]])]),u("p",null,[qN,Ce(u("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=h=>r.dateOfBirth=h)},null,512),[[Fe,r.dateOfBirth]])]),u("p",null,[jN,Ce(u("select",{placeholder:"Gender","onUpdate:modelValue":e[4]||(e[4]=h=>r.gender=h)},zN,512),[[Qu,r.gender]])]),u("p",null,[KN,Ce(u("input",{type:"text",placeholder:"Telegram Handle","onUpdate:modelValue":e[5]||(e[5]=h=>r.telegramHandle=h)},null,512),[[Fe,r.telegramHandle]])])]),u("div",YN,[u("div",QN,[r.selectedIcon==="icon1.png"?(_(),y("div",XN,ZN)):r.selectedIcon==="icon2.png"?(_(),y("div",eM,nM)):r.selectedIcon==="icon3.png"?(_(),y("div",sM,iM)):(_(),y("div",oM,cM)),u("button",{class:"iconbutton",type:"button",onClick:e[6]||(e[6]=h=>r.showIconSelection=!0)}," Choose Profile Icon ")]),u("div",lM,[u("p",null,[uM,Ce(u("input",{type:"text",placeholder:"Email","onUpdate:modelValue":e[7]||(e[7]=h=>r.email=h)},null,512),[[Fe,r.email]])]),u("p",null,[hM,Ce(u("input",{type:"password",placeholder:"Password","onUpdate:modelValue":e[8]||(e[8]=h=>r.password=h)},null,512),[[Fe,r.password]])])])])]),dM,u("p",null,[u("button",{type:"button",onClick:e[9]||(e[9]=(...h)=>i.registerWithGoogle&&i.registerWithGoogle(...h)),class:"google-login-btn"},[fM,et(" Sign Up With Google ")])]),D(o,{isVisible:r.showIconSelection,onIconSelected:i.iconSelected,onClose:e[10]||(e[10]=h=>r.showIconSelection=!1)},null,8,["isVisible","onIconSelected"]),r.showPopup?(_(),y("div",pM,[r.showPopup?(_(),je(a,{key:0,onSubmit:i.handlePopupSubmit,onClose:i.cancelGoogleAuth},null,8,["onSubmit","onClose"])):ne("",!0)])):ne("",!0),r.registrationStatus==="success"?(_(),je(c,{key:1,condition:r.message_passed,user_id:r.user_id},null,8,["condition","user_id"])):ne("",!0),r.showError?(_(),je(l,{key:2,condition:r.message_passed,user_id:r.user_id,error:r.errorMessage,onClose:i.closeErrorMessage},null,8,["condition","user_id","error","onClose"])):ne("",!0)],32)])])}const gM=H(ON,[["render",mM],["__scopeId","data-v-a1da6a77"]]),_M={name:"Register",components:{RegisterAuth:gM,CommonHeader:hh}};function yM(t,e,n,s,r,i){const o=ee("CommonHeader"),a=ee("RegisterAuth");return _(),y(fe,null,[D(o),D(a)],64)}const vM=H(_M,[["render",yM]]),dm=x(F),IM={data(){return{user_events:[],user:ve().currentUser.uid}},props:{user:String},created(){this.fetchUserEvents()},methods:{formatDate(t){const e={year:"numeric",month:"long",day:"numeric"},n={hour:"2-digit",minute:"2-digit",hour12:!0},s=new Date(t),r=s.toLocaleDateString(void 0,e),i=s.toLocaleTimeString(void 0,n);return`${r}
Time: ${i}`},async fetchUserEvents(){const t=C(dm,"users",this.user);try{const e=await K(t);if(e.exists()){const n=e.data().events;for(const s of n){const r=C(dm,"Events",s),i=await K(r);i.exists()?this.user_events.push(i.data()):console.log(`Event with ID ${s} does not exist`)}}else console.log("Document does not exist")}catch(e){console.error("Error accessing field: ",e)}},async fetchSingleDocument(t,e,n){try{const s=x(),r=C(s,e,n);return(await K(r)).data()}catch(s){console.error("Error Fetching Documents: ",s)}}}},rI=t=>(ue("data-v-8ff56507"),t=t(),he(),t),wM={class:"events-container"},EM=rI(()=>u("h2",null,"My Events",-1)),TM=rI(()=>u("hr",null,null,-1)),bM={class:"event-date"},AM=["innerHTML"],RM={class:"event-location"};function SM(t,e,n,s,r,i){return _(),y("div",wM,[EM,TM,(_(!0),y(fe,null,Dt(r.user_events,o=>(_(),y("div",{key:o.EventId,class:"event-card"},[u("h3",null,j(o.EventName),1),u("p",bM,[et(" Date: "),u("span",{innerHTML:i.formatDate(o.EventTime).replace(/\n/g,"<br>")},null,8,AM)]),u("p",RM,"Location: "+j(o.EventLocation),1)]))),128))])}const fm=H(IM,[["render",SM],["__scopeId","data-v-8ff56507"]]),PM={data(){return{}},methods:{goMarketPlace(){console.log("goMarketplace"),this.$router.push("/marketviewitems")},goGroups(){console.log("goGroups"),this.$router.push("/all_groups")}}},cr=t=>(ue("data-v-d9460823"),t=t(),he(),t),DM={id:"Dashboard"},CM=cr(()=>u("h2",null,"Dashboard",-1)),kM={class:"features"},NM=cr(()=>u("img",{src:eI,alt:"Marketplace"},null,-1)),MM=cr(()=>u("p",null,"Discover and support local businesses, services, and events, enhancing the neighborhood's economic ecosystem.",-1)),OM=cr(()=>u("h3",null,"Marketplace",-1)),xM=[NM,MM,OM],LM=cr(()=>u("img",{src:tI,alt:"Groups"},null,-1)),VM=cr(()=>u("p",null,"Explore and join various groups within your neighborhood, each offering a unique blend of interests and activities where like-minded people can connect.",-1)),UM=cr(()=>u("h3",null,"Groups and Events",-1)),FM=[LM,VM,UM];function $M(t,e,n,s,r,i){return _(),y("div",DM,[CM,u("div",kM,[u("div",{id:"Marketplace",onClick:e[0]||(e[0]=(...o)=>i.goMarketPlace&&i.goMarketPlace(...o)),class:"feature"},xM),u("div",{id:"Groups",onClick:e[1]||(e[1]=(...o)=>i.goGroups&&i.goGroups(...o)),class:"feature"},FM)])])}const pm=H(PM,[["render",$M],["__scopeId","data-v-d9460823"]]),BM="/assets/user-DPGe0-is.png",GM={name:"Navbar_global",data(){return{showPopup:!1,user:String,showDropdown:!1}},methods:{toggle(){this.showPopup=!this.showPopup},signOut(){const t=ve();QR(t).then(()=>{console.log("User signed out successfully"),this.$router.push("/")}).catch(e=>{console.error("Error signing out:",e)})},goUserDashboard(){this.$router.push(`/user_dashboard/${this.user}`)},goMarketplace(){this.$router.push("/marketviewitems")},goAllGroups(){this.$router.push("/all_groups")},goMyGroups(){this.$router.push("/my_groups")},goUpdateProfile(){this.$router.push({name:"UpdateProfile"})},toggleDropdown(){this.showDropdown=!0},hideDropdown(){this.showDropdown=!1}}},As=t=>(ue("data-v-97899058"),t=t(),he(),t),qM={class:"common-header-container"},jM=As(()=>u("h1",{class:"header"},"ConnectHub",-1)),HM={class:"topnav"},WM=As(()=>u("span",null,"Home",-1)),zM=[WM],KM=As(()=>u("span",null,"Marketplace",-1)),YM=[KM],QM=As(()=>u("span",null,"Groups",-1)),XM={key:0,class:"dropdown-content"},JM=As(()=>u("div",{class:"profile-container"},[et("Profile"),u("img",{id:"user_logo",src:BM,alt:"user logo"})],-1)),ZM=[JM],eO=As(()=>u("span",null,"Log Out",-1)),tO=[eO],nO={key:0,class:"modal"},sO={class:"modal-content"},rO=As(()=>u("br",null,null,-1)),iO=As(()=>u("div",{class:"modal-header"},[u("div",{class:"modal-title"},[u("h3",null,"Are you sure you want to log out?")])],-1));function oO(t,e,n,s,r,i){return _(),y(fe,null,[u("div",qM,[jM,u("div",HM,[u("ul",null,[u("li",{onClick:e[0]||(e[0]=(...o)=>i.goUserDashboard&&i.goUserDashboard(...o))},zM),u("li",{onClick:e[1]||(e[1]=(...o)=>i.goMarketplace&&i.goMarketplace(...o))},YM),u("li",{class:"dropdown",onMouseover:e[4]||(e[4]=(...o)=>i.toggleDropdown&&i.toggleDropdown(...o)),onMouseleave:e[5]||(e[5]=(...o)=>i.hideDropdown&&i.hideDropdown(...o))},[QM,r.showDropdown?(_(),y("div",XM,[u("ul",null,[u("li",{onClick:e[2]||(e[2]=(...o)=>i.goAllGroups&&i.goAllGroups(...o))},"All Groups"),u("li",{onClick:e[3]||(e[3]=(...o)=>i.goMyGroups&&i.goMyGroups(...o))},"My Groups")])])):ne("",!0)],32),u("li",{onClick:e[6]||(e[6]=(...o)=>i.goUpdateProfile&&i.goUpdateProfile(...o))},ZM),u("li",{class:"logout-text",onClick:e[7]||(e[7]=(...o)=>i.toggle&&i.toggle(...o))},tO)])])]),r.showPopup?(_(),y("div",nO,[u("div",sO,[u("span",{class:"close",onClick:e[8]||(e[8]=(...o)=>i.toggle&&i.toggle(...o))},"×"),rO,iO,u("button",{class:"sign-out-button",onClick:e[9]||(e[9]=(...o)=>i.signOut&&i.signOut(...o))},"Log Out")])])):ne("",!0)],64)}const st=H(GM,[["render",oO],["__scopeId","data-v-97899058"]]),aO={name:"Login",components:{MyEvents:fm,Dashboard:pm,NavBar:st},data(){return{user_id:this.$route.params.userId}},mounted(){console.log(this.$route.params.userId)},components:{NavBar:st,MyEvents:fm,Dashboard:pm}};function cO(t,e,n,s,r,i){const o=ee("NavBar"),a=ee("Dashboard"),c=ee("MyEvents");return _(),y(fe,null,[D(o,{user:this.user_id},null,8,["user"]),D(a,{user:this.user_id},null,8,["user"]),D(c,{user:this.user_id},null,8,["user"])],64)}const lO=H(aO,[["render",cO]]);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="firebasestorage.googleapis.com",oI="storageBucket",uO=2*60*1e3,hO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze extends kn{constructor(e,n,s=0){super(Ml(e),`Firebase Storage: ${n} (${Ml(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ze.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ml(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var We;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(We||(We={}));function Ml(t){return"storage/"+t}function Rd(){const t="An unknown error occurred, please check the error payload for server response.";return new ze(We.UNKNOWN,t)}function dO(t){return new ze(We.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function fO(t){return new ze(We.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ze(We.UNAUTHENTICATED,t)}function mO(){return new ze(We.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function gO(t){return new ze(We.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function _O(){return new ze(We.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yO(){return new ze(We.CANCELED,"User canceled the upload/download.")}function vO(t){return new ze(We.INVALID_URL,"Invalid URL '"+t+"'.")}function IO(t){return new ze(We.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function wO(){return new ze(We.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+oI+"' property when initializing the app?")}function EO(){return new ze(We.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function TO(){return new ze(We.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function bO(t){return new ze(We.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ku(t){return new ze(We.INVALID_ARGUMENT,t)}function aI(){return new ze(We.APP_DELETED,"The Firebase app was deleted.")}function AO(t){return new ze(We.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Li(t,e){return new ze(We.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function di(t){throw new ze(We.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Ht.makeFromUrl(e,n)}catch{return new Ht(e,"")}if(s.path==="")return s;throw IO(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function l(Y){Y.path_=decodeURIComponent(Y.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${r}/o${f}`,"i"),I={bucket:1,path:3},S=n===iI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",k=new RegExp(`^https?://${S}/${r}/${T}`,"i"),q=[{regex:a,indices:c,postModify:i},{regex:m,indices:I,postModify:l},{regex:k,indices:{bucket:1,path:2},postModify:l}];for(let Y=0;Y<q.length;Y++){const Ie=q[Y],X=Ie.regex.exec(e);if(X){const Me=X[Ie.indices.bucket];let Ze=X[Ie.indices.path];Ze||(Ze=""),s=new Ht(Me,Ze),Ie.postModify(s);break}}if(s==null)throw vO(e);return s}}class RO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t,e,n){let s=1,r=null,i=null,o=!1,a=0;function c(){return a===2}let l=!1;function h(...T){l||(l=!0,e.apply(null,T))}function d(T){r=setTimeout(()=>{r=null,t(m,c())},T)}function f(){i&&clearTimeout(i)}function m(T,...k){if(l){f();return}if(T){f(),h.call(null,T,...k);return}if(c()||o){f(),h.call(null,T,...k);return}s<64&&(s*=2);let q;a===1?(a=2,q=0):q=(s+Math.random())*1e3,d(q)}let I=!1;function S(T){I||(I=!0,f(),!l&&(r!==null?(T||(a=2),clearTimeout(r),d(0)):T||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,S(!0)},n),S}function PO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(t){return t!==void 0}function CO(t){return typeof t=="object"&&!Array.isArray(t)}function Sd(t){return typeof t=="string"||t instanceof String}function mm(t){return Pd()&&t instanceof Blob}function Pd(){return typeof Blob<"u"}function gm(t,e,n,s){if(s<e)throw ku(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw ku(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function cI(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var js;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(js||(js={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,n,s,r,i,o,a,c,l,h,d,f=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,I)=>{this.resolve_=m,this.reject_=I,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new Xo(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===js.NO_ERROR,c=i.getStatus();if(!a||kO(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===js.ABORT;s(!1,new Xo(!1,null,h));return}const l=this.successCodes_.indexOf(c)!==-1;s(!0,new Xo(l,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());DO(c)?i(c):i()}catch(c){o(c)}else if(a!==null){const c=Rd();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(r.canceled){const c=this.appDelete_?aI():yO();o(c)}else{const c=_O();o(c)}};this.canceled_?n(!1,new Xo(!1,null,!0)):this.backoffId_=SO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&PO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xo{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function MO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function OO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function xO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function LO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function VO(t,e,n,s,r,i,o=!0){const a=cI(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return xO(l,e),MO(l,n),OO(l,i),LO(l,s),new NO(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function FO(...t){const e=UO();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(Pd())return new Blob(t);throw new ze(We.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $O(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(t){if(typeof atob>"u")throw bO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ol{constructor(e,n){this.data=e,this.contentType=n||null}}function GO(t,e){switch(t){case In.RAW:return new Ol(lI(e));case In.BASE64:case In.BASE64URL:return new Ol(uI(t,e));case In.DATA_URL:return new Ol(jO(e),HO(e))}throw Rd()}function lI(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=s,o=t.charCodeAt(++n);s=65536|(i&1023)<<10|o&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function qO(t){let e;try{e=decodeURIComponent(t)}catch{throw Li(In.DATA_URL,"Malformed data URL.")}return lI(e)}function uI(t,e){switch(t){case In.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw Li(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case In.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw Li(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=BO(e)}catch(r){throw r.message.includes("polyfill")?r:Li(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class hI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Li(In.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=WO(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function jO(t){const e=new hI(t);return e.base64?uI(In.BASE64,e.rest):qO(e.rest)}function HO(t){return new hI(t).contentType}function WO(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n){let s=0,r="";mm(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(mm(this.data_)){const s=this.data_,r=$O(s,e,n);return r===null?null:new ns(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new ns(s,!0)}}static getBlob(...e){if(Pd()){const n=e.map(s=>s instanceof ns?s.data_:s);return new ns(FO.apply(null,n))}else{const n=e.map(o=>Sd(o)?GO(In.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[i++]=o[a]}),new ns(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(t){let e;try{e=JSON.parse(t)}catch{return null}return CO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function KO(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function fI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t,e){return e}class kt{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||YO}}let Jo=null;function QO(t){return!Sd(t)||t.length<2?t:fI(t)}function pI(){if(Jo)return Jo;const t=[];t.push(new kt("bucket")),t.push(new kt("generation")),t.push(new kt("metageneration")),t.push(new kt("name","fullPath",!0));function e(i,o){return QO(o)}const n=new kt("name");n.xform=e,t.push(n);function s(i,o){return o!==void 0?Number(o):o}const r=new kt("size");return r.xform=s,t.push(r),t.push(new kt("timeCreated")),t.push(new kt("updated")),t.push(new kt("md5Hash",null,!0)),t.push(new kt("cacheControl",null,!0)),t.push(new kt("contentDisposition",null,!0)),t.push(new kt("contentEncoding",null,!0)),t.push(new kt("contentLanguage",null,!0)),t.push(new kt("contentType",null,!0)),t.push(new kt("metadata","customMetadata",!0)),Jo=t,Jo}function XO(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new Ht(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function JO(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const o=n[i];s[o.local]=o.xform(s,e[o.server])}return XO(s,t),s}function mI(t,e,n){const s=dI(e);return s===null?null:JO(t,s,n)}function ZO(t,e,n,s){const r=dI(e);if(r===null||!Sd(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(l=>{const h=t.bucket,d=t.fullPath,f="/b/"+o(h)+"/o/"+o(d),m=el(f,n,s),I=cI({alt:"media",token:l});return m+I})[0]}function ex(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Dd{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t){if(!t)throw Rd()}function tx(t,e){function n(s,r){const i=mI(t,r,e);return gI(i!==null),i}return n}function nx(t,e){function n(s,r){const i=mI(t,r,e);return gI(i!==null),ZO(i,r,t.host,t._protocol)}return n}function _I(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=mO():r=pO():n.getStatus()===402?r=fO(t.bucket):n.getStatus()===403?r=gO(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function yI(t){const e=_I(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=dO(t.path)),i.serverResponse=r.serverResponse,i}return n}function sx(t,e,n){const s=e.fullServerUrl(),r=el(s,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Dd(r,i,nx(t,n),o);return a.errorHandler=yI(e),a}function rx(t,e){const n=e.fullServerUrl(),s=el(n,t.host,t._protocol),r="DELETE",i=t.maxOperationRetryTime;function o(c,l){}const a=new Dd(s,r,o,i);return a.successCodes=[200,204],a.errorHandler=yI(e),a}function ix(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function ox(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=ix(null,e)),s}function ax(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let q="";for(let Y=0;Y<2;Y++)q=q+Math.random().toString().slice(2);return q}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const l=ox(e,s,r),h=ex(l,n),d="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,f=`\r
--`+c+"--",m=ns.getBlob(d,s,f);if(m===null)throw EO();const I={name:l.fullPath},S=el(i,t.host,t._protocol),T="POST",k=t.maxUploadRetryTime,U=new Dd(S,T,tx(t,n),k);return U.urlParams=I,U.headers=o,U.body=m.uploadData(),U.errorHandler=_I(e),U}class cx{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=js.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=js.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=js.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r){if(this.sent_)throw di("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw di("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw di("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw di("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw di("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class lx extends cx{initXhr(){this.xhr_.responseType="text"}}function Cd(){return new lx}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n){this._service=e,n instanceof Ht?this._location=n:this._location=Ht.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new er(e,n)}get root(){const e=new Ht(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fI(this._location.path)}get storage(){return this._service}get parent(){const e=zO(this._location.path);if(e===null)return null;const n=new Ht(this._location.bucket,e);return new er(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw AO(e)}}function ux(t,e,n){t._throwIfRoot("uploadBytes");const s=ax(t.storage,t._location,pI(),new ns(e,!0),n);return t.storage.makeRequestWithTokens(s,Cd).then(r=>({metadata:r,ref:t}))}function hx(t){t._throwIfRoot("getDownloadURL");const e=sx(t.storage,t._location,pI());return t.storage.makeRequestWithTokens(e,Cd).then(n=>{if(n===null)throw TO();return n})}function dx(t){t._throwIfRoot("deleteObject");const e=rx(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Cd)}function fx(t,e){const n=KO(t._location.path,e),s=new Ht(t._location.bucket,n);return new er(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t){return/^[A-Za-z]+:\/\//.test(t)}function mx(t,e){return new er(t,e)}function vI(t,e){if(t instanceof kd){const n=t;if(n._bucket==null)throw wO();const s=new er(n,n._bucket);return e!=null?vI(s,e):s}else return e!==void 0?fx(t,e):t}function gx(t,e){if(e&&px(e)){if(t instanceof kd)return mx(t,e);throw ku("To use ref(service, url), the first argument must be a Storage instance.")}else return vI(t,e)}function _m(t,e){const n=e==null?void 0:e[oI];return n==null?null:Ht.makeFromBucketSpec(n,t)}function _x(t,e,n,s={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=s;r&&(t._overrideAuthToken=typeof r=="string"?r:jg(r,t.app.options.projectId))}class kd{constructor(e,n,s,r,i){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=iI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uO,this._maxUploadRetryTime=hO,this._requests=new Set,r!=null?this._bucket=Ht.makeFromBucketSpec(r,this._host):this._bucket=_m(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ht.makeFromBucketSpec(this._url,e):this._bucket=_m(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new er(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new RO(aI());{const o=VO(e,this._appId,s,r,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const ym="@firebase/storage",vm="0.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="storage";function ko(t,e,n){return t=Be(t),ux(t,e,n)}function Xt(t){return t=Be(t),hx(t)}function wI(t){return t=Be(t),dx(t)}function St(t,e){return t=Be(t),gx(t,e)}function $t(t=eh(),e){t=Be(t);const s=hc(t,II).getImmediate({identifier:e}),r=Bg("storage");return r&&yx(s,...r),s}function yx(t,e,n,s={}){_x(t,e,n,s)}function vx(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new kd(n,s,r,e,sr)}function Ix(){zs(new fs(II,vx,"PUBLIC").setMultipleInstances(!0)),En(ym,vm,""),En(ym,vm,"esm2017")}Ix();const wx={components:{SuccessMessage:bs},props:{group:{type:Object,required:!0},distance:{type:String,required:!0}},data(){return{showPopup:!1,user:ve().currentUser.uid,showSuccess:!1,fileURL:null,fileID:this.group.GroupId,isMember:!1,message_passed:"joinGroup",groupAdminName:""}},methods:{viewGroup(){this.$router.push({name:"SpecificGroupHome",params:{group:this.fileID,user:this.user}})},toggle(){this.showPopup=!this.showPopup},joinGroup(){let t=this.group.id,e=this.user;this.updateUserDBJoin(e,t),this.updateGroupDBJoin(t,e),this.showSuccess=!0},async updateUserDBJoin(t,e){const n=x(F);try{const s=C(n,"users",t);(await K(s)).exists()?await ye(s,{groups:Ot(e)}):console.log("Document does not exist.")}catch(s){console.error("Error updating document: ",s)}},async updateGroupDBJoin(t,e){const n=x(F);try{const s=C(n,"group",t);(await K(s)).exists()?await ye(s,{GroupMembers:Ot(e)}):console.log("Document does not exist.")}catch(s){console.error("Error updating document: ",s)}},async getImage(t){try{let e=$t(),n="gs://connecthub-88e58.appspot.com/"+t,s=St(e,n),r=await Xt(s);this.fileURL=r}catch{console.log("No Image Found")}},async checkMember(t){let e=x(F),n=this.user,s=C(e,"users",n);(await K(s)).data().groups.includes(t)?this.isMember=!0:this.isMember=!1},async getAdminName(t){const e=x(F);try{const n=await ct($e(e,"users"));for(const s of n.docs)if(s.data().uid==t){const r=s.data().username;console.log("Username retrieved successfully:",r),this.groupAdminName=r}}catch(n){console.error("Error retrieving username:",n)}}},mounted(){try{this.getImage(this.group.GroupId),this.checkMember(this.group.GroupId)}catch{this.fileURL=null}this.getAdminName(this.group.GroupAdmin[0])}},Nd=t=>(ue("data-v-523de3b7"),t=t(),he(),t),Ex={class:"group-list-item"},Tx={class:"group-image"},bx=["src"],Ax={class:"group-details"},Rx={key:0},Sx={key:1},Px={key:0,class:"modal"},Dx={class:"modal-content"},Cx={class:"modal-header"},kx={class:"modal-image"},Nx=["src"],Mx={class:"modal-title"},Ox={class:"distance"},xx={class:"modal-body"},Lx={class:"description"},Vx={class:"group-stats"},Ux=Nd(()=>u("strong",null,"Total members:",-1)),Fx=Nd(()=>u("p",null,[u("strong",null,"Last event:"),et(" 12/5/2023")],-1)),$x=Nd(()=>u("strong",null,"Admin:",-1)),Bx={key:0,class:"join"},Gx={key:1,class:"view"};function qx(t,e,n,s,r,i){const o=ee("SuccessMessage");return _(),y(fe,null,[u("div",Ex,[u("div",Tx,[u("img",{src:r.fileURL,alt:"No Group Logo"},null,8,bx)]),u("div",Ax,[u("h3",null,j(n.group.GroupName),1),u("p",null,"Postal Code: "+j(n.group.GroupLocation),1),r.isMember?(_(),y("div",Sx,[u("button",{class:"view-btn-default",onClick:e[2]||(e[2]=(...a)=>i.viewGroup&&i.viewGroup(...a))},"View Group"),u("button",{class:"info-btn",onClick:e[3]||(e[3]=(...a)=>i.toggle&&i.toggle(...a))},"More Info")])):(_(),y("div",Rx,[u("button",{class:"join-btn-default",onClick:e[0]||(e[0]=(...a)=>i.joinGroup&&i.joinGroup(...a))},"Join Group"),u("button",{class:"info-btn",onClick:e[1]||(e[1]=(...a)=>i.toggle&&i.toggle(...a))},"More Info")]))])]),r.showPopup?(_(),y("div",Px,[u("div",Dx,[u("span",{class:"close",onClick:e[4]||(e[4]=(...a)=>i.toggle&&i.toggle(...a))},"×"),u("div",Cx,[u("div",kx,[u("img",{src:r.fileURL,alt:"Group Logo"},null,8,Nx)]),u("div",Mx,[u("h3",null,j(n.group.GroupName),1),u("p",Ox,j(n.distance)+" km away from you",1)])]),u("div",xx,[u("p",Lx,"Group Description: "+j(n.group.GroupDescription),1),u("div",Vx,[u("p",null,[Ux,et(" "+j(n.group.GroupMembers.length),1)]),Fx,u("p",null,[$x,et(" "+j(r.groupAdminName),1)])]),r.isMember?(_(),y("div",Gx,[u("button",{class:"view-btn",onClick:e[6]||(e[6]=(...a)=>i.viewGroup&&i.viewGroup(...a))},"View Group")])):(_(),y("div",Bx,[u("button",{class:"join-btn",onClick:e[5]||(e[5]=(...a)=>i.joinGroup&&i.joinGroup(...a))},"Join")]))])])])):ne("",!0),r.showSuccess?(_(),je(o,{key:1,condition:r.message_passed,group:this.fileID,user:this.user},null,8,["condition","group","user"])):ne("",!0)],64)}const EI=H(wx,[["render",qx],["__scopeId","data-v-523de3b7"]]),jx={data(){return{imageUrl:"",formData:{},imageFile:null,user:ve().currentUser.uid}},methods:{generateGroupID(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";for(let n=0;n<10;n++){const s=Math.floor(Math.random()*t.length);e+=t[s]}return"GRP"+e},openFileInput(){this.$refs.fileInput.click()},handleImageChange(t){let e=t.target.files[0];e&&(this.formData.image=e,this.imageFile=e,this.imageUrl=URL.createObjectURL(e))},deleteImage(){this.imageUrl&&(console.log("deleting image..."),this.imageUrl="",this.imageFile=null)},async updateUserDBJoin(t,e){const n=x(F);try{const s=C(n,"users",t);(await K(s)).exists()?await ye(s,{groups:Ot(e)}):console.log("Document does not exist.")}catch(s){console.error("Error updating document: ",s)}},async addPic(t,e){let n=$t(),s=St(n,e);await ko(s,t)},async createGroup(){console.log("called");const t=x(F);let e=document.getElementById("groupName").value,n=document.getElementById("groupLocation").value,s=document.getElementById("groupDescription").value,r="Check firebase storage",i=this.generateGroupID();if(!this.imageFile||!e||!n||!s){alert("Please ensure all forms are filled");return}const o={GroupName:e,GroupLocation:n,GroupDescription:s,GroupImage:r,GroupMembers:[this.user],GroupAdmin:[this.user],GroupEvents:[],GroupDiscussion:[],GroupId:i};console.log(i);try{this.addPic(this.imageFile,i),await ls(C(t,"group",i),o),console.log("Document written with ID:",i),this.updateUserDBJoin(this.user,i),document.getElementById("myform").reset(),this.$emit("added"),this.$router.push({name:"SpecificGroupHome",params:{group:i,user:this.user}})}catch(a){console.log("Error when adding document: ",a)}}}},Hx=t=>(ue("data-v-72da3432"),t=t(),he(),t),Wx={class:"container"},zx={id:"myform",class:"form-layout"},Kx={class:"image-section"},Yx=Hx(()=>u("span",null,"Upload Image",-1)),Qx={key:1,class:"image-preview"},Xx=["src"],Jx={class:"fields-section"},Zx=ic('<div class="form-group" data-v-72da3432><label for="groupName" data-v-72da3432>Group Name:</label><textarea class="textHolder" id="groupName" required placeholder="Enter Group Name" data-v-72da3432></textarea></div><div class="form-group" data-v-72da3432><label for="groupLocation" data-v-72da3432>Group Location:</label><textarea class="textHolder" id="groupLocation" required placeholder="Enter Group Location" data-v-72da3432></textarea></div><div class="form-group" data-v-72da3432><label for="groupDescription" data-v-72da3432>Group Description:</label><textarea class="textHolder" id="groupDescription" required placeholder="Enter Group Description" data-v-72da3432></textarea></div>',3),eL={class:"save"};function tL(t,e,n,s,r,i){return _(),y("div",Wx,[u("form",zx,[u("div",Kx,[r.imageUrl?(_(),y("div",Qx,[u("img",{src:r.imageUrl,alt:"Uploaded Image"},null,8,Xx),u("button",{class:"delete-button",onClick:e[2]||(e[2]=(...o)=>i.deleteImage&&i.deleteImage(...o))},"Delete Image")])):(_(),y("div",{key:0,class:"upload-box",onClick:e[1]||(e[1]=(...o)=>i.openFileInput&&i.openFileInput(...o))},[u("input",{type:"file",accept:"image/*",ref:"fileInput",onChange:e[0]||(e[0]=(...o)=>i.handleImageChange&&i.handleImageChange(...o)),class:"file-input"},null,544),Yx]))]),u("div",Jx,[Zx,u("div",eL,[u("button",{id:"savebutton",type:"button",onClick:e[3]||(e[3]=(...o)=>i.createGroup&&i.createGroup(...o))},"Create Group")])])])])}const nL=H(jx,[["render",tL],["__scopeId","data-v-72da3432"]]),Md=t=>(ue("data-v-2b56b83e"),t=t(),he(),t),sL=Md(()=>u("h1",null,"All Groups Near Me",-1)),rL={class:"btn-container"},iL={class:"dropdown"},oL=Md(()=>u("i",{class:"fa fa-caret-down"},null,-1)),aL=Md(()=>u("br",null,null,-1)),cL={key:0,class:"modal"},lL={class:"modal-content"},xl=x(F),uL={components:{GroupListComponent:EI},data(){return{groups:[],user:ve().currentUser.uid,isOpen:!1,filteredGroups:[],groupDistances:[],postalCode:"",isDropdownOpen:!1}},created(){this.fetchGroups(),this.getGroup(),this.getUserPostalCode(),this.filterDistance(999999)},methods:{fetchGroups(){rn($e(xl,"group"),t=>{this.groups=t.docs.map(e=>({id:e.id,...e.data()}))})},async getGroup(){const t=C(xl,"users",this.user),e=await K(t);this.group=e},async getUserPostalCode(){const t=C(xl,"users",this.user),e=await K(t);e.exists()?this.postalCode=e.data().postalCode:console.error("User document does not exist.")},toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen},closeDropdown(){this.isDropdownOpen=!1},async filterDistance(t){this.filteredGroups=[],this.groupDistances=[];var e=0;console.log(this.postalCode);const n=await this.convertPostalcode(this.postalCode),s=n.latitude,r=n.longitude;for(const i of this.groups){const o=await this.convertPostalcode(i.GroupLocation),a=o.latitude,c=o.longitude;a==0&&c==0?e=99999999:e=this.calculateDistance(s,r,a,c),console.log(e),e<=t&&(this.filteredGroups.push(i),this.groupDistances.push(e))}console.log(this.filteredGroups)},async convertPostalcode(t){const e=`https://www.onemap.gov.sg/api/common/elastic/search?searchVal=${t}&returnGeom=Y&getAddrDetails=Y&pageNum=1`;try{const s=await(await fetch(e)).json();if(s.found>0&&s.results.length>0){const r=s.results[0],i=r.LATITUDE,o=r.LONGITUDE;return{latitude:i,longitude:o}}else return{latitude:0,longitude:0}}catch(n){throw new Error("Error fetching data: "+n.message)}},calculateDistance(t,e,n,s){const i=this.degreesToRadians(n-t),o=this.degreesToRadians(s-e),a=Math.sin(i/2)*Math.sin(i/2)+Math.cos(this.degreesToRadians(t))*Math.cos(this.degreesToRadians(n))*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))},degreesToRadians(t){return t*(Math.PI/180)}}},hL=Object.assign(uL,{__name:"GroupList",setup(t){return(e,n)=>(_(),y("div",null,[sL,u("div",rL,[u("div",iL,[u("button",{class:"filter-distance-btn",onClick:n[0]||(n[0]=(...s)=>e.toggleDropdown&&e.toggleDropdown(...s))},[et(" Filter Distance "),oL]),e.isDropdownOpen?(_(),y("div",{key:0,class:"dropdown-menu",onMouseleave:n[7]||(n[7]=(...s)=>e.closeDropdown&&e.closeDropdown(...s))},[u("button",{class:"dropdown-option",onClick:n[1]||(n[1]=s=>e.filterDistance(999999))},"reset"),u("button",{class:"dropdown-option",onClick:n[2]||(n[2]=s=>e.filterDistance(.5))},"0.5 km"),u("button",{class:"dropdown-option",onClick:n[3]||(n[3]=s=>e.filterDistance(1))},"1 km"),u("button",{class:"dropdown-option",onClick:n[4]||(n[4]=s=>e.filterDistance(2))},"2 km"),u("button",{class:"dropdown-option",onClick:n[5]||(n[5]=s=>e.filterDistance(5))},"5 km"),u("button",{class:"dropdown-option",onClick:n[6]||(n[6]=s=>e.filterDistance(10))},"10 km")],32)):ne("",!0)]),u("button",{class:"create-group-btn",onClick:n[8]||(n[8]=s=>e.isOpen=!0)},"Create Group")]),aL,e.isOpen?(_(),y("div",cL,[u("div",lL,[u("button",{class:"close-btn",onClick:n[9]||(n[9]=s=>e.isOpen=!1)},"Close"),D(nL)])])):ne("",!0),(_(!0),y(fe,null,Dt(e.filteredGroups,(s,r)=>(_(),y("div",{key:s.id,class:"group"},[D(EI,{group:s,distance:this.groupDistances[r].toFixed(2)},null,8,["group","distance"])]))),128))]))}}),dL=H(hL,[["__scopeId","data-v-2b56b83e"]]),fL={name:"Login",components:{GroupList:dL,Navbar_global:st},data(){return{user_id:ve().currentUser.uid}}};function pL(t,e,n,s,r,i){const o=ee("Navbar_global"),a=ee("GroupList");return _(),y(fe,null,[D(o),D(a)],64)}const mL=H(fL,[["render",pL]]),Im=x(F),gL={components:{SuccessMessage:bs},data(){return{user:ve().currentUser.uid,imgURL:"",message_passed:"updateProfile",showSuccess:!1,isOpen:!1,formData:{username:"",address:"",postalCode:"",dateOfBirth:"",gender:"",telegramHandle:""},userData:{username:"",address:"",postalCode:"",dateOfBirth:"",gender:"",telegramHandle:""}}},created(){this.getUserData()},methods:{async submitForm(){let t=C(Im,"users",this.user);try{const n=(await K(t)).data();Object.keys(this.formData).forEach(async s=>{if(this.formData[s]&&this.formData[s]!==n[s])try{await ye(t,{[s]:this.formData[s]}),console.log(`Updated ${s} successfully`)}catch(r){console.error(`Error updating ${s}: ${r.message}`)}}),await this.getUserData(),this.isOpen=!1,this.showSuccess=!0}catch(e){alert("Error updating profile: "+e.message)}},getPic(t){return console.log("@/assets/"+t),"@/assets/"+t},async getUserData(){let t=C(Im,"users",this.user);try{K(t).then(e=>{if(e.exists()){const n=e.data();this.userData={username:n.username||"",address:n.address||"",postalCode:n.postalCode||"",dateOfBirth:n.dateOfBirth||"",gender:n.gender||"",telegramHandle:n.telegramHandle||""}}else console.log("No such document!")}).catch(e=>{console.log("Error getting document:",e)})}catch(e){console.error("Error fetching user data:",e)}},editProfile(){this.formData={username:"",address:"",postalCode:"",dateOfBirth:"",gender:"",telegramHandle:""},this.isOpen=!0},closeSuccessMessage(){this.showSuccess=!1}}},qe=t=>(ue("data-v-91a423b5"),t=t(),he(),t),_L=qe(()=>u("div",{class:"headingContainer"},[u("h1",null,"My Profile")],-1)),yL={class:"displayProfile"},vL=qe(()=>u("div",{class:"profileImageContainer"},[u("img",{src:Zc,alt:"no image"})],-1)),IL={class:"usernameContainer"},wL={class:"username"},EL={class:"userInfoContainer"},TL={class:"userInfoTable"},bL=qe(()=>u("td",null,[u("strong",null,"Address:")],-1)),AL=qe(()=>u("td",null,[u("strong",null,"Postal Code:")],-1)),RL=qe(()=>u("td",null,[u("strong",null,"Date of Birth:")],-1)),SL=qe(()=>u("td",null,[u("strong",null,"Gender:")],-1)),PL=qe(()=>u("td",null,[u("strong",null,"Telegram Handle:")],-1)),DL={key:0,class:"modal"},CL={class:"registerbox"},kL=qe(()=>u("h2",null,"Update Profile Page",-1)),NL={class:"registerbox-content"},ML=qe(()=>u("label",{for:"username"},"Username",-1)),OL=qe(()=>u("br",null,null,-1)),xL=qe(()=>u("label",{for:"address"},"Address",-1)),LL=qe(()=>u("br",null,null,-1)),VL=qe(()=>u("label",{for:"postalCode"},"Postal Code",-1)),UL=qe(()=>u("br",null,null,-1)),FL=qe(()=>u("label",{for:"dateOfBirth"},"Date of Birth",-1)),$L=qe(()=>u("br",null,null,-1)),BL=qe(()=>u("label",{for:"gender"},"Gender",-1)),GL=qe(()=>u("br",null,null,-1)),qL=qe(()=>u("option",{value:"male"},"Male",-1)),jL=qe(()=>u("option",{value:"female"},"Female",-1)),HL=[GL,qL,jL],WL=qe(()=>u("br",null,null,-1)),zL=qe(()=>u("label",{for:"telegramHandle"},"Telegram Handle",-1)),KL=qe(()=>u("br",null,null,-1));function YL(t,e,n,s,r,i){const o=ee("SuccessMessage");return _(),y(fe,null,[_L,u("div",yL,[vL,u("div",IL,[u("p",wL,j(r.userData.username),1)]),u("div",EL,[u("table",TL,[u("tr",null,[bL,u("td",null,j(r.userData.address),1)]),u("tr",null,[AL,u("td",null,j(r.userData.postalCode),1)]),u("tr",null,[RL,u("td",null,j(r.userData.dateOfBirth),1)]),u("tr",null,[SL,u("td",null,j(r.userData.gender),1)]),u("tr",null,[PL,u("td",null,j(r.userData.telegramHandle),1)])])]),u("button",{class:"editProfileButton",onClick:e[0]||(e[0]=(...a)=>i.editProfile&&i.editProfile(...a))},"Edit Profile")]),r.isOpen?(_(),y("div",DL,[u("div",CL,[u("button",{class:"close-btn",onClick:e[1]||(e[1]=a=>r.isOpen=!1)},"Close"),kL,u("div",NL,[ML,Ce(u("input",{type:"text",placeholder:"Username","onUpdate:modelValue":e[2]||(e[2]=a=>r.formData.username=a)},null,512),[[Fe,r.formData.username]]),OL,xL,Ce(u("input",{type:"text",placeholder:"Address","onUpdate:modelValue":e[3]||(e[3]=a=>r.formData.address=a)},null,512),[[Fe,r.formData.address]]),LL,VL,Ce(u("input",{type:"text",placeholder:"Postal Code","onUpdate:modelValue":e[4]||(e[4]=a=>r.formData.postalCode=a)},null,512),[[Fe,r.formData.postalCode]]),UL,FL,Ce(u("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=a=>r.formData.dateOfBirth=a)},null,512),[[Fe,r.formData.dateOfBirth]]),$L,BL,Ce(u("select",{placeholder:"Gender","onUpdate:modelValue":e[6]||(e[6]=a=>r.formData.gender=a)},HL,512),[[Qu,r.formData.gender]]),WL,zL,Ce(u("input",{type:"text",placeholder:"Telegram Handle","onUpdate:modelValue":e[7]||(e[7]=a=>r.formData.telegramHandle=a)},null,512),[[Fe,r.formData.telegramHandle]]),KL]),u("button",{class:"registerButton",onClick:e[8]||(e[8]=(...a)=>i.submitForm&&i.submitForm(...a))},"Submit")])])):ne("",!0),r.showSuccess?(_(),je(o,{key:1,condition:r.message_passed,onClose:i.closeSuccessMessage},null,8,["condition","onClose"])):ne("",!0)],64)}const wm=H(gL,[["render",YL],["__scopeId","data-v-91a423b5"]]),QL={name:"Register",components:{Navbar:st,ProfileForm:wm},data(){return{}},components:{Navbar:st,ProfileForm:wm}};function XL(t,e,n,s,r,i){const o=ee("Navbar"),a=ee("ProfileForm");return _(),y(fe,null,[D(o),D(a)],64)}const JL=H(QL,[["render",XL]]),ZL={name:"Marketplace",components:{Navbar_global:st},data(){return{user_id:ve().currentUser.uid}}},eV=u("h1",null,"Marketplace",-1);function tV(t,e,n,s,r,i){const o=ee("Navbar_global");return _(),y(fe,null,[D(o),eV],64)}const nV=H(ZL,[["render",tV]]),sV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAACMCAYAAAC54tH3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAoaSURBVHgB7Z1dsFZVGcf/G4EcESVMR5MSAT/oSw1KAYUB0czqIsyPrC6q6aLRnPKm6bIbLhyraRq9kCmsLM3QzK+wAgTD8mMacqYUSAMNQo84JsqgcFj9H5/teKS997v3++693/dZ7/Ob+c8+vHtzzllr/c9aa6+PZwGO4ziO4ziO4ziO4zg2SDCEBGACL0dTU6kjqfHU4entN1LtpV6mdjOT9mPIiNYYLPxJvJxAzaDmUHOp06gToaYom3Z+K7xEbecXz/E/beLXj1KbqR389z5ESBTGYIGN4+U46mzqnPR6WvrZeDSDGGaEehJqlIflygzdiQgwbYygTcGV1LnUhdS70V92URupu6kHmbnPwmkHmuEoahm1lhqlwoDqILWRujxoP8ZpAmbuTOoGascAmyFPI9SN1Klw6oGZeS5164DXDmW1l7o9TdNhcKrBTBtHLaAeMlDY3UqamY/CKQcz6xRqFbXPSAH3qt9KmuFkw8yZTC0fIkOM1YvU96ij4LwNM2QxtcVIITapp6mlGHaYCe+ibqEOGCm4NiSd7BWSNxhGmPD51CYjhdUPbaYWYVhgYsdTV1GvGimgfkry6FuInaCvoStDHGMSbeonIdaOKRP2fmqDkYIYRK2WPERLtDKJxgTNgk4szYbTC9upxSy0f6FhxqFhaIrTefkj3BR1cBK1nnn6ATRMo8YIOh2+Bpogpx7eR/0uzdvGaKwpSV19P9wUTSELgpYmulCodhoxBk1xMi/roe52mkMWAi1hIT6Nmqm9KUl7zmvhpmgDyet7QgN5Xasx0nftm6jpcNpCOvW/DDWXZd01xg+oT8BpG+mIyiBYbYt/ajMGf6mv8vIVOP3iS9SXURO1dD5pioXQN5BJcPrJa9SFiW5l6ImejRF0evgJ+ELXQeFv1Hks2D3ogZ6bkoPAT+GmGCTOoFagR3qqMVhbnM/LA/AVz4PGKLRJWYsu6doYNMVk6D7OGbALKzzcx1xcRWc/Bs0P2d54BXSJXeNzSQ2ylZrTa5NSGRrj+gGblq6qrdT8gvSdFeyvQ12ONgm6xH/EUAYdKlk217Gmk2eCLtC1lLaxej20uTWBP+wuQ5mTpWUV0vo5Q+nK0h2hjSaRP2SeoUzJkjQPpftW8iz1jJG0ZUlqjQWoSCUnBY01cR1sIzEsQtmH02d/D7tMpL6DilStYuah4QUiLbAN1RmBbT5VtdaoaoyrYZ8DqM4o7HNNlYdLGyPo9O6n4VhFOtGnl324So3xDeoIOFaRsi5da5QyRtBQQZfCsc5ng0Ys7EjZGuNi6j1wrHM8taTMg2WNUanj4gw0pV4gOhoj6ILTeXBiYXGZ5qRMjbEYtmcZnXcio75f7PRQmQL3V9T4WNRp/qTwZtBY3PPhxMYF0HDauXSqMT5GvRdObEyBlm0unYxReVbOMUNh2XYyxsfhxMrZRTdzjRH0YJfG4zA4fePUULAPqKjGkANffLQzXqTzmdt/LDLGbPj4RczIoqvc/UBFBT8XTux8OO9GkTHOhBM7c/JuFBnDA5/ET+7CnSJjnAQndqbl3cg0RtCVxVPhxM7RQc+g/T/yagwxxVAe1jtkSBlnhqLOM8YUOMPCMVkf5hnDF/0OD5mjn3nGmAhnWKjUx5gAZ1jIPEnJh7ydTPKM8QacYWF/1ofjqjzsRMnrWR/mGeNVOMPC3qwP84yxG86w8HLWh3nGkEhvpYOLGKOb0JOxhquUMn4p60amMRLtfP4XcXICqtPaIXUtszup2PkUdiBOKp2OkE4oxrooelvejSJjNHKk0gAwjYV9UYXnZXNO6YAjxvh33o0iY/wV8XJTmegyQQ/k+SHiZVPejSJjPIF4eeskwtylbbx3Di/rqJmIl8fzbuSuuQgaUfYf0NXEsSIdr1XUndRz0F66LJCVHf6XI+60S1pn0QDPZN0sMoZMx26B712Nleep6TTAvqybuU1JoqflbIETK0/mmULoNLv6KJxY+UvRzU7G+DOcWCks207GeAQ5Y+mOaWTwsrA16GQM6aD8AU5sPMz+xa6iBwqNkejRUBsQPzJpKK+rMhI4DEsO7un0QJmlfT+HGiRG5LgJOftsRqrp0AEtGTL/E+JEAuY/iDrgmMa6ATiQpU69Ejqcaiw7tKhrqdeMpKms6msB+M0uMZTwQrHq2x+qHX11pZW0ldQlqIugexz/YyjxRfoFKhJ0XsVSGvP0Qih5zHqp7QOJLtq5C/aRkb5vozrXImdtpDF+nY5od6TKvhKZfrbeCX08KViDUMBT1GbYRgzxo7IPlzZGopmzCrbpavFRemCedWPcm5ZhKaruRCvtuAGll+bAelNSqewqGSPRd/uNsMux6J7jYJf70GHS7FC62bsqnTerWxg/FLrYyR90+8AZsMt3k4onQXZjDJmVuxc2kUjHS1EdOd/DarC639AUj6EN+Bd0StCjoS29w78pvlb9PVRYssdnj6U2W0nfIRqhZqELugqDQAdu5eX7MEiitcaKkBN7aiypga5HQQTdAWcl0/tPtAkzbTK11chfTpbWh4IV4Lx3FvWIkbRkScpmMrqkp8h8QY9qlBlKq3s7JQSA9JfWQAe+JD9kO6JsMpKV4l1nbJ+RjuYFiW5/6IqeQzbSHLfycgWcQeI2Fuzn0QN1GEPaapnKtfw6FxOysv8jSU5AlLL0HIOLv8ArvHwdHmxlEJAy+FqvphBqCc6W6NjGNxHvSi8rXJPUtBCnzqh9N1M/g9MvfkxTrERN1BovPKjRpCe8EE6bPEBdljbrtVB7IPmgQ8fyi86G0wbbqEUsyGdRI42cMBB0xfVa+JknTSNbHhYmBZFxuqWRyMDp1noJabQTTlNIDXFRE6YQGgsZneiKp8tYe2yHUzfyB/eFROOXNEIjTclYgvY1ViPeyHdt81ZN0WiMtMaNIQTd4SV9jpPh9ILUEJ/Ji4JTJ62cPpC2g/IKuxpOtzxEfbINU7SOzKuM6loIS9PX/dYodXMYhiNEmMirqT1GCqafkjy6KsQdJO6dMLHnUU8ZKaB+aBM1D8MIEz4xaDDWA0YKqw1JXtwSco6kGiqYCYupLUYKrknJcrwlcN6GGXIkdV3Qlc2WCrMOyYr75cHuUsLmYebMpO6kDhop1F4NcUfQKMxOGZhZc6m7jRRwN7o/TWP8r6F1w0w7jFpA3RbieL2VMYnbJU1w6iFoE3MD9bwRE4zVLurG4E1GczBzJ1GXUhvSv8BBNYP0kdZRy6gpMEYrk2hNwQw/kZfzqYuh1fM09BeJoiybl9ZRv2LmvgijmDbGWIIOG4tJZLJODqH5IDSmRVNpPEC9AN3HK6G1ZfZ4TaKfmycaYxwKjXI4L8dDNyTL0PKZ0BplOnUMyqed3+rNmkDib8saCDkSTE5/EkPsLBvszBrRGqMIlvQEXqZC2/4joMPPE9LbsllHTj6SApemYE/iR5o7juM4juM4juM4juMMLP8Dlji5fb0sLtkAAAAASUVORK5CYII=",rV={name:"WarningMessage",data(){return{displayMessage:""}},props:{condition:{type:String,required:!0},memberid:{type:String},discussionid:{type:String},replyid:{type:String}},mounted(){this.getMessage()},watch:{condition:function(t){this.getMessage()}},methods:{getMessage(){this.condition==="deleteMemberFromGroup"?this.displayMessage="Warning! You are about to remove user from group":this.condition==="deleteGroup"?this.displayMessage="Warning! You are about to delete group!":this.condition==="deleteDiscussion"?this.displayMessage="Warning! Deleting Discussion will delete all message threads":this.condition==="deleteReply"?this.displayMessage="Warning! Members will no longer be able to view deleted reply":this.condition==="deleteEvent"&&(this.displayMessage="Warning! Deleting Event will remove all joined members from Event")},handleConfirm(){this.condition==="deleteMemberFromGroup"?this.$emit("confirm",this.memberid):this.condition==="deleteGroup"?this.$emit("confirm"):this.condition==="deleteDiscussion"?this.$emit("confirm",this.discussionid):this.condition==="deleteReply"?this.displayMessage=this.$emit("confirm",this.replyid):this.condition==="deleteEvent"&&(this.displayMessage=this.$emit("confirm"))},handleCancel(){this.$emit("cancel")}}},iV=t=>(ue("data-v-71037a99"),t=t(),he(),t),oV={class:"modal"},aV={class:"model-flexbox"},cV=iV(()=>u("img",{id:"warnImg",src:sV,alt:"warnCheck"},null,-1)),lV={id:"message"};function uV(t,e,n,s,r,i){return _(),y("div",oV,[u("div",aV,[u("span",{class:"close",onClick:e[0]||(e[0]=(...o)=>i.handleCancel&&i.handleCancel(...o))},"×"),cV,u("span",lV,j(r.displayMessage),1),u("button",{id:"button",onClick:e[1]||(e[1]=(...o)=>i.handleConfirm&&i.handleConfirm(...o))},"Confirm")])])}const No=H(rV,[["render",uV],["__scopeId","data-v-71037a99"]]),hV={components:{SuccessMessage:bs,WarningMessage:No},props:{group:{type:String,required:!0}},data(){return{user:ve().currentUser.uid,showSuccess:!1,fileURL:null,fileID:this.group.GroupId,message_passed:"leaveGroup",groupAdmin:"",isAdmin:!1,showWarningMessage:!1,condition:""}},methods:{async getImage(t){console.log(t);let e=$t(),n="gs://connecthub-88e58.appspot.com/"+t,s=St(e,n),r=await Xt(s);this.fileURL=r,console.log("url is here",r)},async deleteGroupFromUser(t,e){const n=x(F);let s=C(n,"users",t),r=await K(s);if(r.exists()){let o=r.data().groups.filter(a=>a!==e);await ye(s,{groups:o})}},async deleteUserFromGroup(t,e){const n=x(F);let s=C(n,"group",e),r=await K(s);if(r.exists()){let o=r.data().GroupMembers.filter(a=>a!==t);await ye(s,{GroupMembers:o})}},async deleteGroupFromFirestore(t){const e=x(F),n=C(e,"group",t);await Zs(n)},async deleteMembersfromGroup(t){const e=x(F),n=C(e,"group",t),i=(await K(n)).data().GroupMembers||[];for(const o of i)await this.deleteGroupFromUser(o,t)},leaveGroup(){let t=this.user,e=this.group.GroupId;this.deleteGroupFromUser(t,e),this.deleteUserFromGroup(t,e),this.showSuccess=!0},deleteGroup(){let t=this.group.GroupId;this.deleteMembersfromGroup(t),this.deleteGroupFromFirestore(t),this.hideWarning(),this.showSuccess=!0},async getGroupAdmin(){const t=x(F);try{(await ct($e(t,"group"))).forEach(n=>{n.data().GroupId==this.group.GroupId&&(this.groupAdmin=n.data().GroupAdmin[0],console.log("Group admin retrieved successfully:",this.groupAdmin))}),this.groupAdmin==this.user&&(this.isAdmin=!0)}catch(e){console.error("Error retrieving group admin:",e)}},showWarning(){this.condition="deleteGroup",this.showWarningMessage=!0},hideWarning(){this.showWarningMessage=!1}},mounted(){try{this.getImage(this.group.GroupId)}catch{this.fileURL=null}this.getGroupAdmin()}},dV={class:"group-list-item"},fV={class:"group-image"},pV=["src"],mV={class:"group-details"},gV={id:"groupName"},_V={id:"groupDescription"};function yV(t,e,n,s,r,i){const o=ee("router-link"),a=ee("SuccessMessage"),c=ee("WarningMessage");return _(),y(fe,null,[u("div",dV,[u("div",fV,[u("img",{src:r.fileURL,alt:"No Group Logo"},null,8,pV)]),u("div",mV,[D(o,{to:{name:"SpecificGroupHome",params:{group:n.group.GroupId,user:r.user}}},{default:_n(()=>[u("h3",gV,j(n.group.GroupName),1)]),_:1},8,["to"]),u("p",_V,j(n.group.GroupDescription),1),u("button",{class:"leave-group-btn",onClick:e[0]||(e[0]=(...l)=>i.leaveGroup&&i.leaveGroup(...l))},"Leave Group"),r.isAdmin?(_(),y("button",{key:0,class:"delete-group-btn",onClick:e[1]||(e[1]=(...l)=>i.showWarning&&i.showWarning(...l))}," Delete Group ")):ne("",!0)])]),r.showSuccess?(_(),je(a,{key:0,condition:r.message_passed},null,8,["condition"])):ne("",!0),r.showWarningMessage?(_(),je(c,{key:1,condition:r.condition,onConfirm:i.deleteGroup,onCancel:i.hideWarning},null,8,["condition","onConfirm","onCancel"])):ne("",!0)],64)}const TI=H(hV,[["render",yV],["__scopeId","data-v-a94fe276"]]),bI=t=>(ue("data-v-0c7e1928"),t=t(),he(),t),vV=bI(()=>u("h1",null,"My Groups",-1)),IV=bI(()=>u("br",null,null,-1)),wV={class:"groupFlexbox"},EV={components:{MyGroupListComponent:TI},data(){return{groups:[],user:ve().currentUser.uid,isOpen:!1,group_list:[]}},methods:{async fetchGroups(){const t=x(F),e=C(t,"users",this.user);let s=(await K(e)).data().groups;this.fetchGroupObject(s)},async fetchGroupObject(t){for(const e of t){const n=x(F),s=C(n,"group",e),r=await K(s);r.exists()&&this.group_list.push(r.data())}}},mounted(){this.fetchGroups()}},TV=Object.assign(EV,{__name:"MyGroupList",setup(t){return(e,n)=>(_(),y("div",null,[vV,IV,u("div",wV,[(_(!0),y(fe,null,Dt(e.group_list,s=>(_(),y("div",{key:s.id,class:"group"},[D(TI,{group:s},null,8,["group"])]))),128))])]))}}),bV=H(TV,[["__scopeId","data-v-0c7e1928"]]),AV={name:"Login",components:{MyGroupList:bV,Navbar_global:st},data(){return{user_id:ve().currentUser.uid}}};function RV(t,e,n,s,r,i){const o=ee("Navbar_global"),a=ee("MyGroupList");return _(),y(fe,null,[D(o),D(a)],64)}const SV=H(AV,[["render",RV]]),PV="/assets/discussion-DJYMycNg.png",DV="/assets/calendar-BK7zYm0s.png",CV="/assets/settings-Dj2uxkGs.png",kV=x(F),NV={name:"Navbar_groups",data(){return{user:ve().currentUser.uid,fileURL:null,fileID:this.group.GroupId,groupAdmin:"",isAdmin:!1}},props:{group:{type:String,required:!0}},methods:{async getImage(t){console.log(t.GroupId),console.log(t);let e=$t(),n="gs://connecthub-88e58.appspot.com/"+t,s=St(e,n),r=await Xt(s);this.fileURL=r},async getGroupAdmin(){try{(await ct($e(kV,"group"))).forEach(e=>{e.data().GroupId==this.group&&(this.groupAdmin=e.data().GroupAdmin[0],console.log("Group admin retrieved successfully:",this.groupAdmin))}),this.groupAdmin==this.user&&(this.isAdmin=!0)}catch(t){console.error("Error retrieving group admin:",t)}}},created(){try{let t=String(this.$route.params.group);this.getImage(t)}catch{this.fileURL=null}this.getGroupAdmin()}},Od=t=>(ue("data-v-fc6507c5"),t=t(),he(),t),MV={class:"vertnav"},OV=["src"],xV=Od(()=>u("img",{src:PV,alt:"Discussions"},null,-1)),LV=Od(()=>u("img",{src:DV,alt:"Calender"},null,-1)),VV={key:0},UV=Od(()=>u("img",{src:CV,alt:"Setting"},null,-1));function FV(t,e,n,s,r,i){const o=ee("router-link");return _(),y("ul",MV,[u("li",null,[D(o,{to:{name:"SpecificGroupHome",params:{group:n.group.GroupId,user:r.user}}},{default:_n(()=>[u("img",{id:"group_pfp",src:r.fileURL,alt:"No Group Logo"},null,8,OV)]),_:1},8,["to"])]),u("li",null,[D(o,{to:{name:"AllDiscussion",params:{group:n.group.GroupId,user:r.user}}},{default:_n(()=>[xV]),_:1},8,["to"])]),u("li",null,[D(o,{to:{name:"Events",params:{group:n.group.GroupName,user:r.user}}},{default:_n(()=>[LV]),_:1},8,["to"])]),r.isAdmin?(_(),y("li",VV,[D(o,{to:{name:"GroupSetting",params:{group:n.group.GroupId,user:r.user}}},{default:_n(()=>[UV]),_:1},8,["to"])])):ne("",!0)])}const Mo=H(NV,[["render",FV],["__scopeId","data-v-fc6507c5"]]),$V=x(F),BV={name:"About",data(){return{about_description:""}},props:{group:{type:String,required:!0}},async mounted(){try{console.log("trying to get group description"),(await ct($e($V,"group"))).forEach(e=>{const n=e.data();n.GroupId==this.group&&(this.about_description=n.GroupDescription,console.log("group description retrieve success!"))})}catch(t){console.error("Error retrieving group description:",t)}}},AI=t=>(ue("data-v-8b2d3283"),t=t(),he(),t),GV={class:"about-container"},qV={class:"about-content"},jV=AI(()=>u("h2",null,"About",-1)),HV=AI(()=>u("hr",null,null,-1)),WV={id:"group_description"};function zV(t,e,n,s,r,i){return _(),y("div",GV,[u("div",qV,[jV,HV,u("span",WV,j(r.about_description),1)])])}const KV=H(BV,[["render",zV],["__scopeId","data-v-8b2d3283"]]),Em=x(F),YV={name:"Recent_events",data(){return{group_events:[],user:ve().currentUser.uid,groupId:this.$route.params.group}},mounted(){this.fetchGroupEvents()},methods:{formatDate(t){const e={year:"numeric",month:"long",day:"numeric"},n={hour:"2-digit",minute:"2-digit",hour12:!0},s=new Date(t),r=s.toLocaleDateString(void 0,e),i=s.toLocaleTimeString(void 0,n);return`${r}
Time: ${i}`},async fetchGroupEvents(){const t=C(Em,"group",this.groupId);try{const e=await K(t);if(e.exists()){const n=e.data().GroupEvents;for(const s of n){const r=C(Em,"Events",s),i=await K(r);i.exists()?this.group_events.push(i.data()):console.log(`Event with ID ${s} does not exist`)}}else console.log("Document does not exist")}catch(e){console.error("Error accessing field: ",e)}},async fetchSingleDocument(t,e,n){try{const s=x(),r=C(s,e,n);return(await K(r)).data()}catch(s){console.error("Error Fetching Documents: ",s)}}}},RI=t=>(ue("data-v-1a5192ae"),t=t(),he(),t),QV={class:"events-container"},XV=RI(()=>u("h2",null,"Recent Events",-1)),JV=RI(()=>u("hr",null,null,-1)),ZV={class:"events-content"},eU={key:0,class:"event-image-container"},tU=["src"],nU={class:"event-details"},sU={class:"event-date"},rU=["innerHTML"],iU={class:"event-location"};function oU(t,e,n,s,r,i){return _(),y("div",QV,[XV,JV,u("div",ZV,[(_(!0),y(fe,null,Dt(r.group_events,o=>(_(),y("div",{key:o.EventId,class:"event-card"},[o.ImageUrl?(_(),y("div",eU,[u("img",{src:o.ImageUrl,alt:"Event Image",class:"event-image"},null,8,tU)])):ne("",!0),u("div",nU,[u("h3",null,j(o.EventName),1),u("p",sU,[et(" Date: "),u("span",{innerHTML:i.formatDate(o.EventTime).replace(/\n/g,"<br>")},null,8,rU)]),u("p",iU,"Location: "+j(o.EventLocation),1)])]))),128))])])}const aU=H(YV,[["render",oU],["__scopeId","data-v-1a5192ae"]]),Tm=x(F),cU={name:"Recent_discussions",data(){return{discussions:[],isPopupVisible:!1,noDiscussion:!1}},created(){try{this.user=this.$route.params.user,this.group=this.$route.params.group,console.log(this.group),console.log("group name retrieved")}catch(t){console.error("Error:",t)}this.getDiscussions()},methods:{async getDiscussions(){const t=await Qc($e(Tm,"Discussions"),Jc("GroupID","==",this.group),Id("Timestamp","desc"),TC(5));rn(t,async e=>{const n=e.docs.map(async s=>{const r=s.data(),i=await this.getUsername(r.CreatedBy);return{id:r.DiscussionID,userid:r.CreatedBy,ts:r.Timestamp,title:r.DiscussionTitle,username:i}});this.discussions=await Promise.all(n),this.discussions.length==0&&(this.noDiscussion=!0)})},async getUsername(t){try{const e=await ct($e(Tm,"users"));for(const n of e.docs)if(n.data().uid==t){const s=n.data().username;return console.log("Username retrieved successfully:",s),s}}catch(e){console.error("Error retrieving username:",e)}},formatDate(t){if(t){const e=t.toDate().toLocaleDateString("en-US"),n=t.toDate().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return`${e} ${n}`}},togglePopup(){this.isPopupVisible=!this.isPopupVisible},navigate(t,e,n){console.log(t),t?this.$router.push({name:"ViewDiscussion",params:{discussionID:t,user:e,group:n}}):console.error("Missing DiscussionID")}}},xd=t=>(ue("data-v-93b26e22"),t=t(),he(),t),lU={class:"Discussions-container"},uU=xd(()=>u("h2",null,"Recent Discussions",-1)),hU=xd(()=>u("hr",null,null,-1)),dU=xd(()=>u("img",{src:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png",alt:"Profile Image"},null,-1)),fU={class:"discussion-content"},pU={class:"discussion-title"},mU={class:"discussion-info"},gU=["onClick"];function _U(t,e,n,s,r,i){return _(),y("div",lU,[uU,hU,(_(!0),y(fe,null,Dt(r.discussions,o=>(_(),y("div",{key:o.id,class:"discussion-item"},[dU,u("div",fU,[u("div",pU,j(o.title),1),u("div",mU,[u("div",null,"Posted By: "+j(o.username),1),u("div",null,j(i.formatDate(o.ts)),1)])]),u("button",{onClick:a=>i.navigate(o.id,this.user,this.group)},"View Discussion",8,gU)]))),128))])}const yU=H(cU,[["render",_U],["__scopeId","data-v-93b26e22"]]),bm=x(F),vU={name:"Membership",props:{group:{type:String,required:!0}},data(){return{num_members:0,members:[],membersNames:[]}},async mounted(){this.setupRealtimeListeners()},methods:{setupRealtimeListeners(){const t=$e(bm,"group");rn(t,n=>{n.docChanges().forEach(s=>{s.doc.data().GroupId==this.group&&(this.num_members=s.doc.data().GroupMembers.length,this.members=s.doc.data().GroupMembers)})});const e=$e(bm,"users");rn(e,n=>{this.membersNames=[],n.forEach(s=>{const r=s.data();this.members.includes(r.uid)&&this.membersNames.push(r.username)})})}}},SI=t=>(ue("data-v-ced4193e"),t=t(),he(),t),IU={class:"Members-container"},wU={class:"Membership_title"},EU=SI(()=>u("h2",null,"Membership",-1)),TU=SI(()=>u("hr",null,null,-1)),bU={class:"Members-content"},AU={class:"eachMember"};function RU(t,e,n,s,r,i){return _(),y("div",IU,[u("div",wU,[EU,u("h5",null,j(r.num_members)+" members",1)]),TU,u("div",bU,[(_(!0),y(fe,null,Dt(r.membersNames,o=>(_(),y("ol",AU,j(o),1))),256))])])}const SU=H(vU,[["render",RU],["__scopeId","data-v-ced4193e"]]),PU=t=>(ue("data-v-05ea27e5"),t=t(),he(),t),DU={class:"flexbox"},CU={class:"events"},kU={class:"about"},NU={class:"discussions"},MU={class:"membership"},OU=PU(()=>u("hr",null,null,-1)),xU=x(F),LU={name:"SpecificGroupHome",data(){return{user:"",group:"",groupName:""}},created(){try{this.user=this.$route.params.user,this.group=this.$route.params.group,console.log(this.group),this.getGroupName()}catch(t){console.error("Error:",t)}},methods:{async getGroupName(){try{(await ct($e(xU,"group"))).forEach(e=>{e.data().GroupId==this.group&&(this.groupName=e.data().GroupName,console.log("Group name retrieved successfully:",this.groupName))})}catch(t){console.error("Error retrieving group name:",t)}}}},VU=Object.assign(LU,{setup(t){return(e,n)=>(_(),y("body",null,[D(st),u("h1",null,j(e.groupName)+" Dashboard",1),D(Mo,{group:e.group},null,8,["group"]),u("div",DU,[u("div",CU,[D(aU,{group:e.group},null,8,["group"])]),u("div",kU,[D(KV,{group:e.group},null,8,["group"])]),u("div",NU,[D(yU,{group:e.group},null,8,["group"])]),u("div",MU,[D(SU,{group:e.group},null,8,["group"])])]),OU]))}}),UU=H(VU,[["__scopeId","data-v-05ea27e5"]]),FU={name:"AddDiscussionButton"};function $U(t,e,n,s,r,i){return _(),y("button",{onClick:e[0]||(e[0]=o=>t.$emit("show-add-discussion"))},"+ Discussion")}const BU=H(FU,[["render",$U]]),GU=x(F),qU={props:{group:{type:String,required:!0},user:{type:String,required:!0}},data(){return{title:"",description:"",isVisible:!0}},methods:{async postNewDiscussion(){if(!this.title){alert("Please enter a title for the discussion.");return}try{async function t(){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";for(let i=0;i<10;i++){const o=Math.floor(Math.random()*s.length);r+=s[o]}return"DISC"+r}const e=await t(),n=await ls(C(GU,"Discussions",e),{DiscussionID:e,GroupID:this.group,CreatedBy:this.user,DiscussionTitle:this.title,DiscussionText:this.description,Timestamp:Qv()});console.log("New discussion written"),document.getElementById("newDiscussion").reset(),this.closePopup()}catch(t){console.error("Error creating new discussion: ",t),alert("There was an error in creating the discussion. Please try again.")}},handleSubmit(){console.log("Discussion form submitted.")},closePopup(){this.isVisible=!1,this.$emit("discussionAdded")}}},Ld=t=>(ue("data-v-8e42a2df"),t=t(),he(),t),jU={class:"modal-overlay"},HU={class:"modal-header"},WU=Ld(()=>u("h2",null,"New Discussion",-1)),zU={class:"newDiscussionForm"},KU=Ld(()=>u("label",{for:"discussionTitle"},"Title: ",-1)),YU=Ld(()=>u("label",{for:"discussionDesc"},"Description: ",-1));function QU(t,e,n,s,r,i){return Ce((_(),y("div",jU,[u("form",{id:"newDiscussion",onSubmit:e[4]||(e[4]=Hs((...o)=>i.handleSubmit&&i.handleSubmit(...o),["prevent"]))},[u("div",HU,[WU,u("button",{class:"closeButton",onClick:e[0]||(e[0]=(...o)=>i.closePopup&&i.closePopup(...o))},"X")]),u("div",zU,[KU,Ce(u("input",{type:"text",id:"discussionTitle","onUpdate:modelValue":e[1]||(e[1]=o=>r.title=o),placeholder:"Enter a title for your discussion."},null,512),[[Fe,r.title]]),YU,Ce(u("textarea",{id:"discussionDesc","onUpdate:modelValue":e[2]||(e[2]=o=>r.description=o),placeholder:"Enter your description here. (Optional)"},null,512),[[Fe,r.description]]),u("button",{onClick:e[3]||(e[3]=(...o)=>i.postNewDiscussion&&i.postNewDiscussion(...o))},"Post Discussion")])],32)],512)),[[GE,r.isVisible]])}const XU=H(qU,[["render",QU],["__scopeId","data-v-8e42a2df"]]),fi=x(F),JU={props:{group:{type:String,required:!0},user:{type:String,required:!0}},components:{AddDiscussion:XU,AddDiscussionButton:BU,WarningMessage:No},data(){return{discussions:[],isPopupVisible:!1,noDiscussion:!1,isAdmin:!1,groupAdmin:"",showWarningMessage:!1,condition:"",selectedDiscussionId:""}},created(){this.getDiscussions(),this.getUsername(),this.getGroupAdmin()},methods:{async getDiscussions(){const t=await Qc($e(fi,"Discussions"),Jc("GroupID","==",this.group),Id("Timestamp","desc"));rn(t,async e=>{const n=e.docs.map(async s=>{const r=s.data(),i=await this.getUsername(r.CreatedBy);return{id:r.DiscussionID,userid:r.CreatedBy,ts:r.Timestamp,title:r.DiscussionTitle,username:i}});this.discussions=await Promise.all(n),this.discussions.length==0&&(this.noDiscussion=!0)})},async getUsername(t){try{const e=await ct($e(fi,"users"));for(const n of e.docs)if(n.data().uid==t){const s=n.data().username;return console.log("Username retrieved successfully:",s),s}}catch(e){console.error("Error retrieving username:",e)}},formatDate(t){if(t){const e=t.toDate().toLocaleDateString("en-US"),n=t.toDate().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return`${e} ${n}`}},togglePopup(){this.isPopupVisible=!this.isPopupVisible},navigate(t,e,n){console.log(t),t?this.$router.push({name:"ViewDiscussion",params:{discussionID:t,user:e,group:n}}):console.error("Missing DiscussionID")},async getGroupAdmin(){try{(await ct($e(fi,"group"))).forEach(e=>{e.data().GroupId==this.group&&(this.groupAdmin=e.data().GroupAdmin[0],console.log("Group admin retrieved successfully:",this.groupAdmin))}),this.groupAdmin==this.user&&(this.isAdmin=!0)}catch(t){console.error("Error retrieving group admin:",t)}},async deleteRepliesInDiscussion(t){const e=await ct($e(fi,"Replies"));for(const n of e.docs)n.data().DiscussionId===t&&(await Zs(n.ref),console.log("Reply deleted successfully"))},async deleteDiscussion(t){const e=C(fi,"Discussions",t);this.deleteRepliesInDiscussion(t),await Zs(e),this.hideWarning()},showWarning(t){this.selectedDiscussionId=t,this.condition="deleteDiscussion",this.showWarningMessage=!0},hideWarning(){this.showWarningMessage=!1}}},PI=t=>(ue("data-v-bf36fde0"),t=t(),he(),t),ZU={class:"discussions-container"},e2={class:"discussionList"},t2={id:"addDiscussionPopup"},n2={key:1},s2=PI(()=>u("p",null,"There is currently no discussion.",-1)),r2=[s2],i2=PI(()=>u("img",{src:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png",alt:"Profile Image"},null,-1)),o2={class:"discussion-content"},a2={class:"discussion-title"},c2={class:"discussion-info"},l2=["onClick"],u2=["onClick"];function h2(t,e,n,s,r,i){const o=ee("AddDiscussionButton"),a=ee("AddDiscussion"),c=ee("WarningMessage");return _(),y("div",ZU,[u("div",e2,[u("div",t2,[D(o,{onShowAddDiscussion:i.togglePopup},null,8,["onShowAddDiscussion"])]),r.isPopupVisible?(_(),je(a,{key:0,group:n.group,user:n.user,onDiscussionAdded:i.togglePopup},null,8,["group","user","onDiscussionAdded"])):ne("",!0),r.noDiscussion?(_(),y("div",n2,r2)):ne("",!0),(_(!0),y(fe,null,Dt(r.discussions,l=>(_(),y("div",{key:l.id,class:"discussion-item"},[i2,u("div",o2,[u("div",a2,j(l.title),1),u("div",c2,[u("div",null,"Posted By: "+j(l.username),1),u("div",null,j(i.formatDate(l.ts)),1)])]),u("button",{class:"view-discussion-button",onClick:h=>i.navigate(l.id,this.user,this.group)}," View Discussion ",8,l2),r.isAdmin?(_(),y("button",{key:0,class:"delete-discussion-button",onClick:h=>i.showWarning(l.id)}," Delete Discussion ",8,u2)):ne("",!0)]))),128))]),r.showWarningMessage?(_(),je(c,{key:0,condition:r.condition,discussionid:r.selectedDiscussionId,onConfirm:i.deleteDiscussion,onCancel:i.hideWarning},null,8,["condition","discussionid","onConfirm","onCancel"])):ne("",!0)])}const d2=H(JU,[["render",h2],["__scopeId","data-v-bf36fde0"]]),f2=x(F),p2={name:"App",components:{DiscussionList:d2,Navbar_global:st,Navbar_groups:Mo},data(){return{user:"",group:"",groupName:""}},created(){try{this.user=this.$route.params.user,this.group=this.$route.params.group}catch(t){console.error("Error:",t)}this.getGroupName()},methods:{async getGroupName(){try{(await ct($e(f2,"group"))).forEach(e=>{e.data().GroupId==this.group&&(this.groupName=e.data().GroupName,console.log("Group name retrieved successfully:",this.groupName))})}catch(t){console.error("Error retrieving group name:",t)}}}},m2={class:"header"},g2={class:"flexbox"};function _2(t,e,n,s,r,i){const o=ee("Navbar_global"),a=ee("Navbar_groups"),c=ee("DiscussionList");return _(),y("body",null,[u("div",m2,[D(o),u("h1",null,j(this.groupName)+" Discussion",1),D(a,{group:r.group,user:r.user},null,8,["group","user"])]),D(a,{group:r.group,user:r.user},null,8,["group","user"]),u("div",g2,[D(c,{user:r.user,group:r.group},null,8,["user","group"])])])}const y2=H(p2,[["render",_2],["__scopeId","data-v-b8412bc8"]]),mr=x(F),v2={props:{discussionID:{type:String,required:!0},user:{type:String,required:!0},group:{type:String,required:!0}},components:{WarningMessage:No},data(){return{newReply:"",replies:[],discussion:{},createdByUsername:"",groupAdmin:"",isAdmin:!1,showWarningMessage:!1,condition:"",selectedReplyId:""}},created(){this.fetchDiscussionData(),this.getReplies(),this.getGroupAdmin()},methods:{async fetchDiscussionData(){const t=await C(mr,"Discussions",this.discussionID),e=await K(t);e.exists()?(this.discussion=e.data(),this.createdByUsername=await this.getUsername(this.discussion.CreatedBy)):console.log("Discussion cannot be found!")},async submitReply(){if(!this.newReply){alert("Please type a reply before submitting.");return}try{async function t(){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";for(let i=0;i<10;i++){const o=Math.floor(Math.random()*s.length);r+=s[o]}return"REP"+r}const e=await t(),n=await ls(C(mr,"Replies",e),{ReplyID:e,GroupID:this.group,DiscussionID:this.discussionID,CreatedBy:this.user,ReplyText:this.newReply,Timestamp:Qv()});console.log("New reply written"),this.newReply=""}catch(t){console.error("Error posting reply: ",t),alert("There was an error in posting your reply. Please try again.")}},async getReplies(){const t=await Qc($e(mr,"Replies"),Jc("DiscussionID","==",this.discussionID),Id("Timestamp","asc"));rn(t,async e=>{const n=e.docs.map(async s=>{const r=s.data(),i=await this.getUsername(r.CreatedBy);return{id:r.ReplyID,userid:r.CreatedBy,ts:r.Timestamp,replyText:r.ReplyText,username:i}});this.replies=await Promise.all(n)})},async getUsername(t){try{const e=await ct($e(mr,"users"));for(const n of e.docs)if(n.data().uid==t){const s=n.data().username;return console.log("Username retrieved successfully:",s),s}}catch(e){console.error("Error retrieving username:",e)}},formatDate(t){if(t){const e=t.toDate().toLocaleDateString("en-US"),n=t.toDate().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return`${e} ${n}`}},async getGroupAdmin(){try{(await ct($e(mr,"group"))).forEach(e=>{e.data().GroupId==this.group&&(this.groupAdmin=e.data().GroupAdmin[0],console.log("Group admin retrieved successfully:",this.groupAdmin))}),this.groupAdmin==this.user&&(this.isAdmin=!0)}catch(t){console.error("Error retrieving group admin:",t)}},async deleteReply(t){const e=C(mr,"Replies",t);this.hideWarning(),await Zs(e)},showWarning(t){this.selectedReplyId=t,this.condition="deleteReply",this.showWarningMessage=!0},hideWarning(){this.showWarningMessage=!1}}},Vd=t=>(ue("data-v-fc3d55f5"),t=t(),he(),t),I2={class:"discussionItem"},w2={class:"discussionHeader"},E2={class:"discussionInfo"},T2=Vd(()=>u("strong",null,"Posted By:",-1)),b2=Vd(()=>u("strong",null,"Posted On:",-1)),A2={class:"discussionReplies"},R2={class:"reply-metadata"},S2=Vd(()=>u("img",{src:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png",alt:"Profile Image"},null,-1)),P2={class:"reply-username"},D2={class:"replyContent"},C2={class:"reply-text"},k2={class:"reply-dt"},N2=["onClick"],M2={id:"replyForm"};function O2(t,e,n,s,r,i){const o=ee("WarningMessage");return _(),y("div",I2,[u("div",w2,[u("h1",null,j(r.discussion.DiscussionTitle),1),u("p",null,j(r.discussion.DiscussionText),1),u("div",E2,[u("p",null,[T2,et(" "+j(this.createdByUsername),1)]),u("p",null,[b2,et(" "+j(i.formatDate(r.discussion.Timestamp)),1)])])]),u("div",A2,[(_(!0),y(fe,null,Dt(r.replies,a=>(_(),y("div",{key:a.id,class:"replyItem"},[u("div",R2,[S2,u("div",P2,[u("strong",null,j(a.username),1)])]),u("div",D2,[u("div",C2,j(a.replyText),1),u("div",k2,j(i.formatDate(a.ts)),1)]),r.isAdmin?(_(),y("button",{key:0,class:"delete-reply-button",onClick:c=>i.showWarning(a.id)}," Delete Reply ",8,N2)):ne("",!0)]))),128))]),u("div",M2,[Ce(u("textarea",{id:"replyBox","onUpdate:modelValue":e[0]||(e[0]=a=>r.newReply=a),placeholder:"Write your reply..."},null,512),[[Fe,r.newReply]]),u("button",{class:"post-reply-button",onClick:e[1]||(e[1]=(...a)=>i.submitReply&&i.submitReply(...a))},"Post Reply")]),r.showWarningMessage?(_(),je(o,{key:0,condition:r.condition,replyid:r.selectedReplyId,onConfirm:i.deleteReply,onCancel:i.hideWarning},null,8,["condition","replyid","onConfirm","onCancel"])):ne("",!0)])}const x2=H(v2,[["render",O2],["__scopeId","data-v-fc3d55f5"]]),L2=x(F),V2={name:"App",components:{DiscussionItem:x2,Navbar_global:st,Navbar_groups:Mo},data(){return{user:"",discussionID:"",group:"",groupName:""}},created(){try{this.user=this.$route.params.user,this.discussionID=this.$route.params.discussionID,this.group=this.$route.params.group,console.log("Discussion retrieved")}catch(t){console.error("Error:",t)}this.getGroupName()},methods:{async getGroupName(){try{(await ct($e(L2,"group"))).forEach(e=>{e.data().GroupId==this.group&&(this.groupName=e.data().GroupName,console.log("Group name retrieved successfully:",this.groupName))})}catch(t){console.error("Error retrieving group name:",t)}}}},U2={class:"header"},F2={class:"flexbox"};function $2(t,e,n,s,r,i){const o=ee("Navbar_global"),a=ee("Navbar_groups"),c=ee("DiscussionItem");return _(),y("body",null,[u("div",U2,[D(o),u("h1",null,j(r.groupName)+" Discussion",1),D(a,{group:r.group,user:r.user},null,8,["group","user"])]),u("div",F2,[D(c,{discussionID:this.discussionID,user:this.user,group:r.group},null,8,["discussionID","user","group"])])])}const B2=H(V2,[["render",$2],["__scopeId","data-v-cd10bb4a"]]),Ds=x(F),Ll=$t(),G2={components:{WarningMessage:No},props:{group:{type:String,required:!0},user:{type:String,required:!0}},data(){return{groupDoc:{},groupMemberNames:[],groupName:"",groupDescription:"",showMessage:!1,message:"",imageUrl:"",selectedFile:null,showWarningMessage:!1,selectedMemberId:"",condition:""}},methods:{fetchGroupData(){const t=C(Ds,"group",this.group);rn(t,e=>{if(e.exists()){this.groupDoc=e.data(),this.groupName=this.groupDoc.GroupName,this.groupDescription=this.groupDoc.GroupDescription,this.getImage(this.group).then(n=>{this.imageUrl=n}),this.groupMemberNames=[];for(const n of this.groupDoc.GroupMembers)this.groupDoc.GroupAdmin.includes(n)||this.getUsername(n).then(s=>{this.groupMemberNames.push({name:s,id:n})})}else console.log("Group cannot be found!")},e=>{console.error("Error fetching group data:",e)})},async updateGroup(){try{const t=C(Ds,"group",this.group);await ye(t,{GroupName:this.groupName,GroupDescription:this.groupDescription}),await this.updateImage(),console.log("Group info updated:",this.group),this.message="Group updated successfully!",this.showMessage=!0}catch(t){console.log("Error updating group",t),this.message="Error updating group!",this.showMessage=!0}},async removeMemberFromGroup(t){try{const e=C(Ds,"group",this.group);await ye(e,{GroupMembers:Cu(t)}),console.log("User has been kicked out:",t),await this.removeGroupFromUser(t),this.showWarningMessage=!1,this.selectedMemberId=""}catch(e){console.log("Error in kicking member out",e)}},async removeGroupFromUser(t){try{const e=C(Ds,"users",t);await ye(e,{groups:Cu(this.group)}),console.log("Group has been removed from user:",this.group)}catch(e){console.log("Error in removing group from user",e)}},async getUsername(t){try{const e=await ct($e(Ds,"users"));for(const n of e.docs)if(n.data().uid==t){const s=n.data().username;return console.log("Username retrieved successfully:",s),s}}catch(e){console.error("Error retrieving username:",e)}},closeMessage(){this.showMessage=!1,this.$router.push({name:"SpecificGroupHome",params:{user:this.user,group:this.group}})},async getImage(t){console.log(t);let e="gs://connecthub-88e58.appspot.com/"+t,n=St(Ll,e),s=await Xt(n);return console.log("url is here",s),s},openFileInput(){this.$refs.fileInput.click()},handleImageChange(t){this.selectedFile=t.target.files[0],this.selectedFile&&(this.imageUrl=URL.createObjectURL(this.selectedFile),console.log("Selected file",this.selectedFile))},async updateImage(){if(!this.selectedFile){alert("Please select a file first.");return}const t=this.group;try{const e=St(Ll,`gs://connecthub-88e58.appspot.com/${t}`);e&&await wI(e);const n=St(Ll,t),s=await ko(n,this.selectedFile),r=await Xt(s.ref);this.imageUrl=r,console.log("Image updated successfully:",r)}catch(e){console.error("Failed to update image:",e)}},async deleteGroupFromFirestore(t){const e=C(Ds,"group",t);await Zs(e)},async deleteMembersfromGroup(t){const e=C(Ds,"group",t),r=(await K(e)).data().GroupMembers||[];for(const i of r)await this.removeGroupFromUser(i)},async deleteGroup(){await this.deleteMembersfromGroup(this.group),await this.deleteGroupFromFirestore(this.group),this.$router.push({name:"MyGroups"})},showWarning(t=null){t instanceof Event?this.condition="deleteGroup":(this.selectedMemberId=t,this.condition="deleteMemberFromGroup"),this.showWarningMessage=!0},hideWarning(){this.showWarningMessage=!1}},created(){this.fetchGroupData()}},si=t=>(ue("data-v-0549decc"),t=t(),he(),t),q2={class:"edit-group"},j2={class:"header"},H2=si(()=>u("h2",null,"Edit Group",-1)),W2={class:"delete-group"},z2={class:"change-image"},K2=si(()=>u("span",null,[u("strong",null,"Group Image:")],-1)),Y2={class:"image-container"},Q2=["src"],X2={class:"form-group"},J2=si(()=>u("label",{for:"groupName"},"Group Name:",-1)),Z2={class:"form-group"},eF=si(()=>u("label",{for:"groupDescription"},"Description:",-1)),tF=si(()=>u("button",{type:"submit",class:"update-btn"},"Update Group",-1)),nF={class:"modal-content"},sF={class:"members-section"},rF=si(()=>u("h2",null,"Members",-1)),iF={class:"members-list"},oF=["onClick"];function aF(t,e,n,s,r,i){const o=ee("WarningMessage");return _(),y("div",q2,[u("div",j2,[H2,u("div",W2,[u("button",{class:"deleteGroupButton",onClick:e[0]||(e[0]=(...a)=>i.showWarning&&i.showWarning(...a))}," Delete Group ")])]),u("form",{onSubmit:e[5]||(e[5]=Hs((...a)=>i.updateGroup&&i.updateGroup(...a),["prevent"])),class:"group-form"},[u("div",z2,[K2,u("div",Y2,[u("img",{onClick:e[1]||(e[1]=(...a)=>i.openFileInput&&i.openFileInput(...a)),src:r.imageUrl,alt:"Current Image"},null,8,Q2)]),u("input",{type:"file",accept:"image/*",ref:"fileInput",onChange:e[2]||(e[2]=(...a)=>i.handleImageChange&&i.handleImageChange(...a)),class:"file-input"},null,544)]),u("div",X2,[J2,Ce(u("input",{type:"text",id:"groupName","onUpdate:modelValue":e[3]||(e[3]=a=>r.groupName=a),placeholder:"Enter a new group name."},null,512),[[Fe,r.groupName]])]),u("div",Z2,[eF,Ce(u("textarea",{id:"groupDescription","onUpdate:modelValue":e[4]||(e[4]=a=>r.groupDescription=a),placeholder:"Enter a new group description."},null,512),[[Fe,r.groupDescription]])]),tF],32),r.showMessage?(_(),y("div",{key:0,class:"modal-overlay",onClick:e[6]||(e[6]=Hs((...a)=>i.closeMessage&&i.closeMessage(...a),["self"]))},[u("div",nF,[u("p",null,j(r.message),1)])])):ne("",!0),u("div",sF,[rF,u("ul",iF,[(_(!0),y(fe,null,Dt(r.groupMemberNames,a=>(_(),y("li",{key:a.id,class:"member-item"},[et(j(a.name)+" ",1),u("button",{onClick:c=>i.showWarning(a.id),class:"kick-btn"}," Kick Out ",8,oF)]))),128))])]),r.showWarningMessage?(_(),je(o,{key:1,condition:r.condition,memberid:r.selectedMemberId,onConfirm:i.removeMemberFromGroup,onCancel:i.hideWarning},null,8,["condition","memberid","onConfirm","onCancel"])):ne("",!0),r.showWarningMessage?(_(),je(o,{key:2,condition:r.condition,onConfirm:i.deleteGroup,onCancel:i.hideWarning},null,8,["condition","onConfirm","onCancel"])):ne("",!0)])}const cF=H(G2,[["render",aF],["__scopeId","data-v-0549decc"]]),lF=x(F),uF={name:"App",components:{Navbar_global:st,Navbar_groups:Mo,EditGroupInfo:cF},data(){return{user:"",group:"",groupName:""}},created(){try{this.user=this.$route.params.user,this.group=this.$route.params.group}catch(t){console.error("Error:",t)}this.getGroupName()},methods:{async getGroupName(){try{(await ct($e(lF,"group"))).forEach(e=>{e.data().GroupId==this.group&&(this.groupName=e.data().GroupName,console.log("Group name retrieved successfully:",this.groupName))})}catch(t){console.error("Error retrieving group name:",t)}}}},hF={class:"header"},dF={class:"flexbox"};function fF(t,e,n,s,r,i){const o=ee("Navbar_global"),a=ee("Navbar_groups"),c=ee("EditGroupInfo");return _(),y("body",null,[u("div",hF,[D(o),u("h1",null,j(this.groupName)+" Setting",1),D(a,{group:r.group,user:r.user},null,8,["group","user"])]),D(a,{group:r.group,user:r.user},null,8,["group","user"]),u("div",dF,[D(c,{user:r.user,group:r.group},null,8,["user","group"])])])}const pF=H(uF,[["render",fF],["__scopeId","data-v-53c82ef3"]]),mF={name:"Test"},Ud=t=>(ue("data-v-c4003e2a"),t=t(),he(),t),gF=Ud(()=>u("h3",null,"This is the test page for global navbar",-1)),_F=Ud(()=>u("h2",null,"test page for global navbar",-1)),yF=Ud(()=>u("h3",null,"TEST1 TEST1 TEST1 TEST1 TEST1 TEST1 TEST1 TEST1 TEST1 TEST1 TEST1 TEST1 TEST1 TEST1 TEST1 TEST1",-1));function vF(t,e,n,s,r,i){return _(),y(fe,null,[gF,_F,yF],64)}const IF=H(mF,[["render",vF],["__scopeId","data-v-c4003e2a"]]),wF={props:{participants:Array},methods:{close(){this.$emit("close")}}},EF=t=>(ue("data-v-76c8fb5d"),t=t(),he(),t),TF={class:"modal"},bF={class:"modal-content"},AF=EF(()=>u("h3",null,"Participants",-1));function RF(t,e,n,s,r,i){return _(),y("div",TF,[u("div",bF,[u("span",{class:"close",onClick:e[0]||(e[0]=(...o)=>i.close&&i.close(...o))},"×"),AF,u("ol",null,[(_(!0),y(fe,null,Dt(n.participants,o=>(_(),y("li",{key:o.id},j(o),1))),128))])])])}const SF=H(wF,[["render",RF],["__scopeId","data-v-76c8fb5d"]]),gr=x(F),PF={data(){return{group_events:[],user:ve().currentUser.uid,groupId:this.$route.params.group,message_passed:"joinEvent",showSuccess:!1,eventobj:{},isMember:!1,showParticipants:!1,participants:[],showWarningMessage:!1,condition:"",groupAdmin:"",isAdmin:!1}},components:{SuccessMessage:bs,EventParticipants:SF,WarningMessage:No},props:{event:String,group:String},mounted(){this.unsubscribe=this.fetchEvent(this.event),this.checkMember(this.event),this.getGroupAdmin()},beforeDestroy(){this.unsubscribe&&this.unsubscribe()},methods:{viewEvent(){console.log("show participants"),this.showParticipants=!0},formatDate(t){const e={year:"numeric",month:"long",day:"numeric"},n={hour:"2-digit",minute:"2-digit",hour12:!0},s=new Date(t),r=s.toLocaleDateString(void 0,e),i=s.toLocaleTimeString(void 0,n);return`${r}
Time: ${i}`},checkMember(t){let e=x(F),n=this.user,s=C(e,"users",n);rn(s,r=>{if(r.exists()){let i=r.data();this.isMember=i.events&&i.events.includes(t)}},r=>{console.error("Error fetching user data:",r)})},fetchEvent(t){const e=C(gr,"Events",t);return rn(e,async s=>{if(s.exists()){console.log("Event data:",s.data()),this.eventobj=s.data();const r=this.eventobj.EventParticipants.map(i=>new Promise(o=>{const a=C(gr,"users",i);rn(a,c=>{c.exists()?o(c.data().username):(console.log(`No user found for ID: ${i}`),o(null))},c=>{console.error("Error fetching user data:",c),o(null)})}));this.participants=await Promise.all(r),console.log("Participants loaded:",this.participants)}else console.log("No such event!")},s=>{console.error("Error fetching event:",s)})},async getGroupAdmin(){const t=x(F);try{(await ct($e(t,"group"))).forEach(n=>{n.data().GroupId==this.group&&(this.groupAdmin=n.data().GroupAdmin[0],console.log("Group admin retrieved successfully:",this.groupAdmin))}),this.groupAdmin==this.user&&(this.isAdmin=!0)}catch(e){console.error("Error retrieving group admin:",e)}},joinEvent(t){let e=this.user;this.updateUserDBJoin(e,t),this.updateEventDBJoin(t,e),this.showSuccess=!0},async updateUserDBJoin(t,e){const n=x(F);try{const s=C(n,"users",t);(await K(s)).exists()?await ye(s,{events:Ot(e)}):console.log("Document does not exist.")}catch(s){console.error("Error updating document: ",s)}},async updateEventDBJoin(t,e){const n=x(F);try{const s=C(n,"Events",t);(await K(s)).exists()?await ye(s,{EventParticipants:Ot(e)}):console.log("Document does not exist.")}catch(s){console.error("Error updating document: ",s)}},closeSuccessMessage(){this.showSuccess=!1},closeEventParticipants(){this.showParticipants=!1},leaveEvent(){this.deleteEventFromUser(this.user,this.eventobj.EventId),this.deleteUserFromEvent(this.user,this.eventobj.EventId)},async deleteEventFromUser(t,e){let n=C(gr,"users",t),s=await K(n);if(console.log(e),s.exists()){let r=s.data();if(r.events){let i=r.events.filter(o=>o!==e);await ye(n,{events:i})}else console.log("No events to update for this user.")}},async deleteUserFromEvent(t,e){let n=C(gr,"Events",e),s=await K(n);if(s.exists()){let i=s.data().EventParticipants.filter(o=>o!==t);await ye(n,{EventParticipants:i})}},async deleteEvent(){let t=this.eventobj.EventParticipants;for(let r of t)await this.deleteEventFromUser(r,this.eventobj.EventId);let e=C(gr,"group",this.groupId),n=await K(e);if(n.exists()){let i=n.data().GroupEvents.filter(o=>this.eventobj.EventId!==o);await ye(e,{GroupEvents:i})}let s=C(gr,"Events",this.eventobj.EventId);await Zs(s)},showWarning(){this.condition="deleteEvent",this.showWarningMessage=!0},hideWarning(){this.showWarningMessage=!1}}},DF={class:"event-list-item"},CF={class:"event-card"},kF={class:"event-content"},NF={key:0,class:"event-image-container"},MF=["src"],OF={class:"event-details"},xF={class:"event-date"},LF=["innerHTML"],VF={class:"event-location"},UF={key:0},FF={key:1},$F={key:0};function BF(t,e,n,s,r,i){const o=ee("EventParticipants"),a=ee("SuccessMessage"),c=ee("WarningMessage");return _(),y(fe,null,[u("div",DF,[u("div",CF,[u("div",kF,[r.eventobj.ImageUrl?(_(),y("div",NF,[u("img",{src:r.eventobj.ImageUrl,alt:"Event Image",class:"event-image"},null,8,MF)])):ne("",!0),u("div",OF,[u("h3",null,j(r.eventobj.EventName),1),u("p",xF,[et(" Date: "),u("span",{innerHTML:i.formatDate(r.eventobj.EventTime).replace(/\n/g,"<br>")},null,8,LF)]),u("p",VF,"Location: "+j(r.eventobj.EventLocation),1),r.isMember?(_(),y("div",FF,[r.isAdmin?(_(),y("button",{key:0,class:"view-btn-default",onClick:e[3]||(e[3]=(...l)=>i.viewEvent&&i.viewEvent(...l))}," View Participants ")):ne("",!0),u("button",{class:"leave-event-btn",onClick:e[4]||(e[4]=(...l)=>i.leaveEvent&&i.leaveEvent(...l))}," Leave Event "),r.isAdmin?(_(),y("button",{key:1,class:"delete-event-btn",onClick:e[5]||(e[5]=(...l)=>i.showWarning&&i.showWarning(...l))}," Delete Event ")):ne("",!0)])):(_(),y("div",UF,[r.isAdmin?(_(),y("button",{key:0,class:"view-btn-default",onClick:e[0]||(e[0]=(...l)=>i.viewEvent&&i.viewEvent(...l))}," View Participants ")):ne("",!0),u("button",{class:"join-btn-default",onClick:e[1]||(e[1]=l=>i.joinEvent(r.eventobj.EventId))}," Join Event "),r.isAdmin?(_(),y("button",{key:1,class:"delete-event-btn",onClick:e[2]||(e[2]=(...l)=>i.showWarning&&i.showWarning(...l))}," Delete Event ")):ne("",!0)]))])])])]),this.showParticipants?(_(),y("div",$F,[D(o,{participants:this.participants,onClose:i.closeEventParticipants},null,8,["participants","onClose"])])):ne("",!0),r.showSuccess?(_(),je(a,{key:1,condition:r.message_passed,onClose:i.closeSuccessMessage},null,8,["condition","onClose"])):ne("",!0),r.showWarningMessage?(_(),je(c,{key:2,condition:r.condition,onConfirm:i.deleteEvent,onCancel:i.hideWarning},null,8,["condition","onConfirm","onCancel"])):ne("",!0)],64)}const DI=H(PF,[["render",BF],["__scopeId","data-v-f3a8d5e7"]]),GF={components:{SuccessMessage:bs},data(){return{formData:{},user:ve().currentUser.uid,groupId:this.$route.params.group,showSuccess:!1,message_passed:"createEvent",imageUrl:"",imageFile:null}},methods:{async uploadImage(t){console.log("Uploading Image...");const e=$t(),n=St(e,"eventImages/"+t.name);try{return await ko(n,t),console.log("Uploaded a blob or file!"),await Xt(n)}catch(s){return console.error("Upload failed:",s),null}},openFileInput(){this.$refs.fileInput.click()},handleImageChange(t){let e=t.target.files[0];e&&(this.formData.image=e,this.imageFile=e,this.imageUrl=URL.createObjectURL(e))},deleteImage(){this.imageUrl&&(console.log("deleting image..."),this.imageUrl="",this.imageFile=null)},async createEvent(){console.log("Creating event...");const t=x(F);let e=await this.generateEventID(),n=document.getElementById("eventName").value,s=document.getElementById("eventTime").value,r=document.getElementById("eventLocation").value,i=document.getElementById("eventDescription").value,o="";this.imageFile&&(o=await this.uploadImage(this.imageFile));const a={EventId:e,EventName:n,EventLocation:r,EventDescription:i,EventTime:s,EventGroup:this.groupId,CreatedBy:this.user,EventParticipants:[this.user],ImageUrl:o};try{const h=C(pa,"Events",e);await ls(h,a),document.getElementById("myform").reset(),this.$emit("added"),this.showSuccess=!0}catch(h){console.log("Error when adding Event: ",h)}let c=C(t,"users",this.user);try{console.log(e),await ye(c,{events:Ot(e)})}catch(h){console.error("Error adding value to array: ",h)}let l=C(t,"group",this.groupId);try{await ye(l,{GroupEvents:Ot(e)}),console.log("Event added to group successfully"),this.showSuccess=!0}catch(h){console.error("Error adding event to group: ",h)}this.$emit("eventCreated")},async generateEventID(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";for(let n=0;n<10;n++){const s=Math.floor(Math.random()*t.length);e+=t[s]}return"EV"+e},closeSuccessMessage(){this.showSuccess=!1}}},qF=t=>(ue("data-v-9868b791"),t=t(),he(),t),jF={class:"container"},HF={id:"myform",class:"form-layout"},WF={class:"image-section"},zF=qF(()=>u("span",null,"Upload Image",-1)),KF={key:1,class:"image-preview"},YF=["src"],QF={class:"right-section"},XF=ic('<div class="form-event" data-v-9868b791><label for="eventName" data-v-9868b791>Event Name:</label><input class="textHolder" type="text" id="eventName" required placeholder="Enter Event Name" data-v-9868b791></div><div class="form-event" data-v-9868b791><label for="eventTime" data-v-9868b791>Event Time:</label><input class="textHolder" type="datetime-local" id="eventTime" required placeholder="Enter Event Time" data-v-9868b791></div><div class="form-event" data-v-9868b791><label for="eventLocation" data-v-9868b791>Event Location:</label><input class="textHolder" type="text" id="eventLocation" required placeholder="Enter Event Location" data-v-9868b791></div><div class="form-event" data-v-9868b791><label for="eventDescription" data-v-9868b791>Event Description:</label><input class="textHolder" type="text" id="eventDescription" required placeholder="Enter Event Description" data-v-9868b791></div>',4),JF={class:"save"};function ZF(t,e,n,s,r,i){const o=ee("SuccessMessage");return _(),y(fe,null,[u("div",jF,[u("form",HF,[u("div",WF,[r.imageUrl?(_(),y("div",KF,[u("img",{src:r.imageUrl,alt:"Uploaded Image"},null,8,YF),u("button",{class:"delete-button",onClick:e[2]||(e[2]=(...a)=>i.deleteImage&&i.deleteImage(...a))},"Delete Image")])):(_(),y("div",{key:0,class:"upload-box",onClick:e[1]||(e[1]=(...a)=>i.openFileInput&&i.openFileInput(...a))},[u("input",{type:"file",accept:"image/*",ref:"fileInput",onChange:e[0]||(e[0]=(...a)=>i.handleImageChange&&i.handleImageChange(...a)),class:"file-input"},null,544),zF]))]),u("div",QF,[XF,u("div",JF,[u("button",{id:"savebutton",type:"button",onClick:e[3]||(e[3]=(...a)=>i.createEvent&&i.createEvent(...a))}," Create Event ")])])])]),r.showSuccess?(_(),je(o,{key:0,condition:r.message_passed,onClose:i.closeSuccessMessage},null,8,["condition","onClose"])):ne("",!0)],64)}const CI=H(GF,[["render",ZF],["__scopeId","data-v-9868b791"]]),kI=t=>(ue("data-v-25e83bd5"),t=t(),he(),t),e$={class:"event-header"},t$=kI(()=>u("h1",null,"Events",-1)),n$=kI(()=>u("br",null,null,-1)),s$={key:0,class:"modal"},r$={class:"modal-content"},Am=x(F),i$={components:{GroupEventListComponent:DI,CreateEventForm:CI},mounted(){this.fetchEvents()},data(){return{events:[],groupId:this.$route.params.group,user:ve().currentUser.uid,isOpen:!1,isAdmin:!1,groupAdmin:""}},methods:{fetchEvents(){const t=C(Am,"group",this.groupId);this.getGroupAdmin(),rn(t,e=>{e.exists()?(this.events=e.data().GroupEvents,console.log(this.events)):console.log("No such document!")},e=>{console.error("Error fetching document:",e)})},async getGroupAdmin(){try{(await ct($e(Am,"group"))).forEach(e=>{e.data().GroupId==this.groupId&&(this.groupAdmin=e.data().GroupAdmin[0],console.log("Group admin retrieved successfully:",this.groupAdmin))}),this.groupAdmin==this.user&&(this.isAdmin=!0)}catch(t){console.error("Error retrieving group admin:",t)}},closeModal(){this.isOpen=!1}}},o$=Object.assign(i$,{__name:"GroupEventsList",setup(t){return(e,n)=>(_(),y("div",null,[u("div",e$,[t$,e.isAdmin?(_(),y("button",{key:0,class:"create-event-btn",onClick:n[0]||(n[0]=s=>e.isOpen=!0)},"Create Event")):ne("",!0)]),n$,e.isOpen?(_(),y("div",s$,[u("div",r$,[u("button",{class:"close-btn",onClick:n[1]||(n[1]=s=>e.isOpen=!1)},"Close"),D(CI,{onEventCreated:e.closeModal},null,8,["onEventCreated"])])])):ne("",!0),(_(!0),y(fe,null,Dt(this.events,s=>(_(),y("div",{key:this.events,class:"group"},[D(DI,{event:s,group:e.groupId},null,8,["event","group"])]))),128))]))}}),a$=H(o$,[["__scopeId","data-v-25e83bd5"]]),c$={name:"GroupEvents",components:{Navbar_global:st,Navbar_groups:Mo,GroupEventsList:a$},data(){return{user:"",group:"",groupName:"",user_id:ve().currentUser.uid}},async created(){try{this.user=this.$route.params.user,this.group=this.$route.params.group;const t=x(),e=C(t,"group",this.group),n=await K(e);n.exists()?(this.groupName=n.data().GroupName,console.log(this.groupName),console.log("Group name retrieved")):console.log("No such document!")}catch(t){console.error("Error:",t)}}},l$={class:"flexbox"};function u$(t,e,n,s,r,i){const o=ee("Navbar_global"),a=ee("Navbar_groups"),c=ee("GroupEventsList");return _(),y("body",null,[D(o),u("h1",null,j(r.groupName)+" Dashboard",1),D(a,{group:r.group,user:r.user},null,8,["group","user"]),u("div",l$,[D(c)])])}const h$=H(c$,[["render",u$],["__scopeId","data-v-c2e47eda"]]),d$="/assets/buy_icon-BWYa-b_D.png",f$="/assets/shopping_cart-BQep3EI0.png",p$="/assets/sell_icon-gKPplyWn.png",m$="/assets/approve-BJfjPXD4.png",g$={name:"Navbar_groups",data(){return{user:ve().currentUser.uid}}},tl=t=>(ue("data-v-daa4cc7e"),t=t(),he(),t),_$={class:"vertnav"},y$=tl(()=>u("img",{src:d$,alt:"football icon"},null,-1)),v$=tl(()=>u("img",{src:f$,alt:"Discussions"},null,-1)),I$=tl(()=>u("img",{src:p$,alt:"Calender"},null,-1)),w$=tl(()=>u("img",{src:m$,alt:"Setting"},null,-1));function E$(t,e,n,s,r,i){const o=ee("router-link");return _(),y("ul",_$,[u("li",null,[D(o,{to:{name:"MarketplaceViewItems"}},{default:_n(()=>[y$]),_:1})]),u("li",null,[D(o,{to:{name:"MarketplaceSentReq"}},{default:_n(()=>[v$]),_:1})]),u("li",null,[D(o,{to:{name:"MarketplaceMyList"}},{default:_n(()=>[I$]),_:1})]),u("li",null,[D(o,{to:{name:"MarketplaceDealReq"}},{default:_n(()=>[w$]),_:1})])])}const lr=H(g$,[["render",E$],["__scopeId","data-v-daa4cc7e"]]);x(F);const T$={name:"SpecificGroupHome",data(){},created(){},methods:{}},b$=Object.assign(T$,{setup(t){return(e,n)=>(_(),y("body",null,[D(st),D(lr)]))}}),A$=H(b$,[["__scopeId","data-v-8488ff10"]]),R$={props:{item:{type:Object,required:!0},showPopup:{type:Boolean,default:!1}},data(){return{user:ve().currentUser.uid,fileURL:null,fileID:this.item.id,isDealDone:!1}},methods:{async emitMsg(){const t=x(F),e=C(t,"Items",this.fileID),r=(await K(e)).data().sellerID;this.$emit("openPopup",r)},async goDealReq(){this.$router.push({name:"MarketApprove",params:{itemID:this.fileID}})},async getImage(t){try{let e=$t(),n=`gs://connecthub-88e58.appspot.com/${t}`,s=St(e,n),r=await Xt(s);this.fileURL=r}catch{console.log("No Image Found")}},async checkIsDealDone(){const t=x(F),e=C(t,"users",this.user),s=(await K(e)).data();this.isDealDone=s.dealFinishItem.includes(this.fileID)}},mounted(){try{this.getImage(this.fileID),this.checkIsDealDone()}catch{this.fileURL=null}}},S$={class:"group-image"},P$=["src"],D$={class:"group-details"},C$={key:0,class:"done-deal"},k$={key:1,class:"buy-request"};function N$(t,e,n,s,r,i){return _(),y("div",{class:Ya(["group-list-item",{"popup-open":n.showPopup}])},[u("div",S$,[u("img",{src:r.fileURL,alt:"No Group Logo"},null,8,P$)]),u("div",D$,[u("h3",null,j(n.item.Name),1),r.isDealDone?(_(),y("div",C$,[u("button",{onClick:e[0]||(e[0]=(...o)=>i.emitMsg&&i.emitMsg(...o))},"View Contact Details")])):(_(),y("div",k$,[u("button",{onClick:e[1]||(e[1]=(...o)=>i.goDealReq&&i.goDealReq(...o))},"View Buy Request")]))])],2)}const NI=H(R$,[["render",N$],["__scopeId","data-v-753fde3c"]]),M$={props:{userId:{type:String,required:!0}},data(){return{name:"",telegram:"",address:""}},methods:{async getUser(){const t=x(F),e=C(t,"users",this.userId),s=(await K(e)).data();this.name=s.username,this.telegram=s.telegramHandle,this.address=s.address}},mounted(){this.getUser()}},nl=t=>(ue("data-v-34c48825"),t=t(),he(),t),O$={class:"contact-popup"},x$={class:"popup-content"},L$=nl(()=>u("h2",null,"Contact Information",-1)),V$=nl(()=>u("strong",null,"User ID:",-1)),U$=nl(()=>u("strong",null,"Telegram Handle:",-1)),F$=nl(()=>u("strong",null,"Location:",-1));function $$(t,e,n,s,r,i){return _(),y("div",O$,[u("div",x$,[L$,u("p",null,[V$,et(" "+j(r.name),1)]),u("p",null,[U$,et(" "+j(r.telegram),1)]),u("p",null,[F$,et(" "+j(r.address),1)]),u("button",{onClick:e[0]||(e[0]=o=>t.$emit("closePopup"))},"Close")])])}const sl=H(M$,[["render",$$],["__scopeId","data-v-34c48825"]]),MI=t=>(ue("data-v-4d8c6217"),t=t(),he(),t),B$=MI(()=>u("br",null,null,-1)),G$={class:"groupFlexbox"},q$={key:0,class:"no-item-msg"},j$=MI(()=>u("h1",null," No Pending Deal Requests ",-1)),H$=[j$],W$={components:{DealReqListingComponent:NI,ContactPopup:sl},data(){return{items:[],user:ve().currentUser.uid,isOpen:!1,item_list:[],showPopup:!1,current_item:null}},methods:{runClose(){this.showPopup=!1},runOpen(t){this.current_user=t,this.showPopup=!0},async fetchItems(){const t=x(F),e=C(t,"users",this.user);let s=(await K(e)).data().receivedRequestforItem;this.fetchItemObject(s)},async fetchItemObject(t){for(const e of t){const n=x(F),s=C(n,"Items",e),r=await K(s);r.exists()&&this.item_list.push(r.data())}}},created(){this.fetchItems()}},z$=Object.assign(W$,{__name:"DealReqListings",setup(t){return(e,n)=>(_(),y("div",null,[e.showPopup?(_(),je(sl,{key:0,userId:e.current_user,onClosePopup:e.runClose},null,8,["userId","onClosePopup"])):ne("",!0),B$,u("div",G$,[e.item_list.length===0?(_(),y("div",q$,H$)):ne("",!0),(_(!0),y(fe,null,Dt(e.item_list,s=>(_(),y("div",{key:s.id,class:"group"},[D(NI,{item:s,onOpenPopup:e.runOpen,showPopup:e.showPopup},null,8,["item","onOpenPopup","showPopup"])]))),128))])]))}}),K$=H(z$,[["__scopeId","data-v-4d8c6217"]]),Y$=t=>(ue("data-v-b1f5fbd4"),t=t(),he(),t),Q$={class:"global-nav"},X$={class:"nav"},J$={class:"container"},Z$={class:"list"},e4=Y$(()=>u("div",{class:"list-header"},[u("div",{class:"create-btn-container"},[u("h1",null,"View Deal Requests")])],-1)),t4={data(){return{isOpen:!1}}},n4=Object.assign(t4,{__name:"MarketDealReq",setup(t){return(e,n)=>(_(),y("body",null,[u("div",Q$,[D(st)]),u("div",X$,[D(lr)]),u("div",J$,[u("div",Z$,[e4,D(K$)])])]))}}),s4=H(n4,[["__scopeId","data-v-b1f5fbd4"]]),r4={data(){return{imageUrl:"",formData:{},imageFile:null,user:ve().currentUser.uid}},methods:{generateItemID(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";for(let n=0;n<10;n++){const s=Math.floor(Math.random()*t.length);e+=t[s]}return"ITEM"+e},openFileInput(){this.$refs.fileInput.click()},handleImageChange(t){let e=t.target.files[0];e&&(this.formData.image=e,this.imageFile=e,this.imageUrl=URL.createObjectURL(e))},deleteImage(){this.imageUrl&&(console.log("deleting image..."),this.imageUrl="",this.imageFile=null)},async updateUserDBItem(t,e){const n=x(F);try{const s=C(n,"users",t);(await K(s)).exists()?await ye(s,{listedItem:Ot(e)}):console.log("Document does not exist.")}catch(s){console.error("Error updating document: ",s)}},async addPic(t,e){let n=$t(),s=St(n,e);await ko(s,t)},async createItem(){const t=x(F);let e=document.getElementById("ItemName").value,n=document.getElementById("ItemLocation").value,s=document.getElementById("ItemDescription").value,r=document.getElementById("ItemPrice").value,i=this.generateItemID();if(!this.imageFile||!e||!n||!s){alert("Please ensure all forms are filled");return}const o={sellerID:this.user,Description:s,Location:n,Name:e,Price:r,id:i,sold:!1,buyerID:[],hasBuyRequest:!1,soldTo:""};try{this.addPic(this.imageFile,i),await ls(C(t,"Items",i),o),this.updateUserDBItem(this.user,i),document.getElementById("myform").reset(),this.$emit("added"),this.$router.push({name:"MarketplaceViewItems"})}catch(a){console.log("Error when adding document: ",a)}}}},i4=t=>(ue("data-v-c5594a62"),t=t(),he(),t),o4={class:"container-inner"},a4={id:"myform",class:"form-layout"},c4={class:"image-section"},l4=i4(()=>u("span",null,"Upload Image",-1)),u4={key:1,class:"image-preview"},h4=["src"],d4={class:"fields-section"},f4=ic('<div class="form-group" data-v-c5594a62><label for="ItemName" data-v-c5594a62>Item Name:</label><textarea class="textHolder" id="ItemName" required placeholder="Enter Item Name" data-v-c5594a62></textarea></div><div class="form-group" data-v-c5594a62><label for="ItemLocation" data-v-c5594a62>Item Location:</label><textarea class="textHolder" id="ItemLocation" required placeholder="Enter Item Location" data-v-c5594a62></textarea></div><div class="form-group" data-v-c5594a62><label for="ItemDescription" data-v-c5594a62>Item Description:</label><textarea class="textHolder" id="ItemDescription" required placeholder="Enter Item Description" data-v-c5594a62></textarea></div><div class="form-group" data-v-c5594a62><label for="ItemPrice" data-v-c5594a62>Item Price:</label><textarea class="textHolder" id="ItemPrice" required placeholder="Enter Item Price" data-v-c5594a62></textarea></div>',4),p4={class:"save"};function m4(t,e,n,s,r,i){return _(),y("div",o4,[u("form",a4,[u("div",c4,[r.imageUrl?(_(),y("div",u4,[u("img",{src:r.imageUrl,alt:"Uploaded Image"},null,8,h4),u("button",{class:"delete-button",onClick:e[2]||(e[2]=(...o)=>i.deleteImage&&i.deleteImage(...o))},"Delete Image")])):(_(),y("div",{key:0,class:"upload-box",onClick:e[1]||(e[1]=(...o)=>i.openFileInput&&i.openFileInput(...o))},[u("input",{type:"file",accept:"image/*",ref:"fileInput",onChange:e[0]||(e[0]=(...o)=>i.handleImageChange&&i.handleImageChange(...o)),class:"file-input"},null,544),l4]))]),u("div",d4,[f4,u("div",p4,[u("button",{id:"savebutton",type:"button",onClick:e[3]||(e[3]=(...o)=>i.createItem&&i.createItem(...o))},"Create")])])])])}const g4=H(r4,[["render",m4],["__scopeId","data-v-c5594a62"]]),_4={props:{item:{type:Object,required:!0}},data(){return{showPopup:!1,user:ve().currentUser.uid,showSuccess:!1,fileURL:null,fileID:this.item.id,isMember:!1,hasBuyRequest:!1,isOpen:!1,refreshKey:0}},methods:{toggle(){this.showPopup=!this.showPopup},toggleSuccess(){this.showSuccess=!1,this.$router.push({name:"SpecificGroupHome",params:{group:this.fileID,user:this.user}})},async removeListing(){const t=x(F),e=C(t,"Items",this.fileID),r=(await K(e)).data().sellerID,i=C(t,"users",r),c=(await K(i)).data().listedItem.filter(l=>l!==this.fileID);await ye(i,{listedItem:c}),await Zs(e),this.$router.push({name:"MarketplaceViewItems"})},async updateUserDBJoin(t,e){const n=x(F);try{const s=C(n,"users",t);(await K(s)).exists()?await ye(s,{groups:Ot(e)}):console.log("Document does not exist.")}catch(s){console.error("Error updating document: ",s)}},async getImage(t){try{let e=$t(),n="gs://connecthub-88e58.appspot.com/"+t,s=St(e,n),r=await Xt(s);this.fileURL=r}catch{console.log("No Image Found")}},async checkBuyRequest(t){const e=x(F),n=C(e,"Items",t),r=(await K(n)).data();this.hasBuyRequest=r.hasBuyRequest},async editListing(){this.fileID}},created(){try{this.getImage(this.fileID),this.checkBuyRequest(this.fileID)}catch{this.fileURL=null}}},y4=t=>(ue("data-v-54bbcc61"),t=t(),he(),t),v4={class:"group-list-item"},I4={class:"group-image"},w4=["src"],E4={class:"group-details"},T4={key:0},b4={class:"button-container"},A4={key:0},R4=y4(()=>u("p",null,"Pending Buy Request",-1)),S4=[R4],P4={key:1};function D4(t,e,n,s,r,i){return _(),y("div",v4,[u("div",I4,[u("img",{src:r.fileURL,alt:"No Group Logo"},null,8,w4)]),u("div",E4,[u("h3",null,j(n.item.Name),1),u("p",null,"Location: "+j(n.item.Location),1),r.hasBuyRequest?ne("",!0):(_(),y("div",T4,[u("button",{class:"edit-button",onClick:e[0]||(e[0]=o=>t.$emit("openPopup",this.fileID))},"Edit Listing ")])),u("div",b4,[r.hasBuyRequest?(_(),y("div",A4,S4)):(_(),y("div",P4,[u("button",{class:"remove-button",onClick:e[1]||(e[1]=(...o)=>i.removeListing&&i.removeListing(...o))},"Delete Listing")]))])])])}const OI=H(_4,[["render",D4],["__scopeId","data-v-54bbcc61"]]),C4={props:{itemID:String},data(){return{imageUrl:"",formData:{},imageFile:null,user:ve().currentUser.uid,itemData:null,itemName:null,itemDescription:null,itemPrice:null,itemLocation:null}},methods:{generateItemID(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";for(let n=0;n<10;n++){const s=Math.floor(Math.random()*t.length);e+=t[s]}return"ITEM"+e},openFileInput(){this.$refs.fileInput.click()},handleImageChange(t){let e=t.target.files[0];e&&(this.formData.image=e,this.imageFile=e,this.imageUrl=URL.createObjectURL(e))},deleteImage(){this.imageUrl&&(console.log("deleting image..."),this.imageUrl="",this.imageFile=null)},async updateUserDBItem(t,e){const n=x(F);try{const s=C(n,"users",t);(await K(s)).exists()?await ye(s,{listedItem:Ot(e)}):console.log("Document does not exist.")}catch(s){console.error("Error updating document: ",s)}},async replacePic(t,e){let n=$t(),s=St(n,e);await wI(s),await ko(s,t)},async fetchItemData(){const t=x(F),e=C(t,"Items",this.itemID),n=await K(e);this.itemData=n.data(),this.itemName=n.data().Name,this.itemPrice=n.data().Price,this.itemDescription=n.data().Description,this.itemLocation=n.data().Location,console.log(n.data().Location)},async editItem(){const t=x(F);let e=document.getElementById("ItemName").value,n=document.getElementById("ItemLocation").value,s=document.getElementById("ItemDescription").value,r=document.getElementById("ItemPrice").value,i=this.itemID;if(!e||!n||!s){alert("Please ensure all forms are filled");return}const o={sellerID:this.user,Description:s,Location:n,Name:e,Price:r};try{this.imageFile&&this.replacePic(this.imageFile,i),await ye(C(t,"Items",i),o),document.getElementById("myform").reset(),this.$emit("added"),this.$router.push({name:"MarketplaceViewItems"})}catch(a){console.log("Error when adding document: ",a)}}},mounted(){this.fetchItemData()}},Oo=t=>(ue("data-v-f2134050"),t=t(),he(),t),k4={class:"container"},N4={id:"myform",class:"form-layout"},M4={class:"image-section"},O4=Oo(()=>u("span",null,"Upload Image",-1)),x4={key:1,class:"image-preview"},L4=["src"],V4={class:"fields-section"},U4={class:"form-group"},F4=Oo(()=>u("label",{for:"ItemName"},"Item Name:",-1)),$4={class:"textHolder",id:"ItemName",required:"",placeholder:"Enter Item Name"},B4={class:"form-group"},G4=Oo(()=>u("label",{for:"ItemLocation"},"Item Location:",-1)),q4={class:"textHolder",id:"ItemLocation",required:"",placeholder:"Enter Item Location"},j4={class:"form-group"},H4=Oo(()=>u("label",{for:"ItemDescription"},"Item Description:",-1)),W4={class:"textHolder",id:"ItemDescription",required:"",placeholder:"Enter Item Description"},z4={class:"form-group"},K4=Oo(()=>u("label",{for:"ItemPrice"},"Item Price:",-1)),Y4={class:"textHolder",id:"ItemPrice",required:"",placeholder:"Enter Item Price"},Q4={class:"save"};function X4(t,e,n,s,r,i){return _(),y("div",k4,[u("form",N4,[u("button",{onClick:e[0]||(e[0]=o=>t.$emit("closePopup")),class:"close-button"}," Close "),u("div",M4,[r.imageUrl?(_(),y("div",x4,[u("img",{src:r.imageUrl,alt:"Uploaded Image"},null,8,L4),u("button",{class:"delete-button",onClick:e[3]||(e[3]=(...o)=>i.deleteImage&&i.deleteImage(...o))},"Delete Image")])):(_(),y("div",{key:0,class:"upload-box",onClick:e[2]||(e[2]=(...o)=>i.openFileInput&&i.openFileInput(...o))},[u("input",{type:"file",accept:"image/*",ref:"fileInput",onChange:e[1]||(e[1]=(...o)=>i.handleImageChange&&i.handleImageChange(...o)),class:"file-input"},null,544),O4]))]),u("div",V4,[u("div",U4,[F4,u("textarea",$4,j(this.itemName),1)]),u("div",B4,[G4,u("textarea",q4,j(this.itemLocation),1)]),u("div",j4,[H4,u("textarea",W4,j(this.itemDescription),1)]),u("div",z4,[K4,u("textarea",Y4,j(this.itemPrice),1)]),u("div",Q4,[u("button",{id:"savebutton",type:"button",onClick:e[4]||(e[4]=(...o)=>i.editItem&&i.editItem(...o))},"Edit")])])])])}const xI=H(C4,[["render",X4],["__scopeId","data-v-f2134050"]]),LI=t=>(ue("data-v-ae3a8c39"),t=t(),he(),t),J4=LI(()=>u("br",null,null,-1)),Z4={class:"groupFlexbox"},eB={key:0,class:"no-item-msg"},tB=LI(()=>u("h1",null," You have no active listings ",-1)),nB=[tB],sB={key:0,class:"overlay"},rB={components:{MyListingComponent:OI,EditListing:xI},data(){return{items:[],user:ve().currentUser.uid,isOpen:!1,item_list:[],showPopup:!1,currentItem:null}},methods:{async fetchItems(){const t=x(F),e=C(t,"users",this.user);let s=(await K(e)).data().listedItem;this.fetchItemObject(s)},async fetchItemObject(t){for(const e of t){const n=x(F),s=C(n,"Items",e),r=await K(s);r.exists()&&this.item_list.push(r.data())}},togglePopup(t){this.showPopup=!0,this.currentItem=t},closePopup(){this.showPopup=!1}},mounted(){this.fetchItems()}},iB=Object.assign(rB,{__name:"MyListing",setup(t){return(e,n)=>(_(),y("div",null,[J4,u("div",Z4,[e.item_list.length===0?(_(),y("div",eB,nB)):ne("",!0),(_(!0),y(fe,null,Dt(e.item_list,s=>(_(),y("div",{key:s.id,class:"group"},[D(OI,{item:s,onOpenPopup:e.togglePopup},null,8,["item","onOpenPopup"])]))),128))]),e.showPopup?(_(),y("div",sB,[D(xI,{onClosePopup:e.closePopup,itemID:e.currentItem},null,8,["onClosePopup","itemID"])])):ne("",!0)]))}}),oB=H(iB,[["__scopeId","data-v-ae3a8c39"]]),Fd=t=>(ue("data-v-7ca2863f"),t=t(),he(),t),aB={class:"navbar-global"},cB={class:"navbar-market"},lB={key:0,class:"modal-overlay"},uB={class:"modal"},hB=Fd(()=>u("br",null,null,-1)),dB=Fd(()=>u("br",null,null,-1)),fB={class:"container"},pB={class:"list"},mB={class:"list-header"},gB=Fd(()=>u("h1",null,"My Listings",-1)),_B={class:"create-btn-container"},yB={data(){return{isOpen:!1}}},vB=Object.assign(yB,{__name:"MarketMyList",setup(t){return(e,n)=>(_(),y("div",null,[u("div",aB,[D(st)]),u("div",cB,[D(lr)]),e.isOpen?(_(),y("div",lB,[u("div",uB,[u("button",{class:"close-btn",onClick:n[0]||(n[0]=s=>e.isOpen=!1)},"Close"),hB,dB,D(g4)])])):ne("",!0),u("body",null,[u("div",fB,[u("div",pB,[u("div",mB,[gB,u("div",_B,[u("button",{class:"create-group-btn",onClick:n[1]||(n[1]=s=>e.isOpen=!0)},"Create Listing")])]),D(oB)])])])]))}}),IB=H(vB,[["__scopeId","data-v-7ca2863f"]]),wB={props:{item:{type:Object,required:!0},showPopup:{type:Boolean,default:!1}},data(){return{user:ve().currentUser.uid,fileURL:null,fileID:this.item.id,isSoldtoYou:!1,isSold:!1,sellerName:""}},methods:{async getSellerName(){const t=x(F),e=C(t,"users",this.item.sellerID),s=(await K(e)).data();this.sellerName=s.username},async emitMsg(){const t=x(F),e=C(t,"Items",this.fileID),r=(await K(e)).data().soldTo;this.$emit("openPopup",r)},async getImage(t){try{let e=$t(),n=`gs://connecthub-88e58.appspot.com/${t}`,s=St(e,n),r=await Xt(s);this.fileURL=r}catch{console.log("No Image Found")}},async deleteFromItem(t){const e=x(F),n=C(e,"Items",t);await ye(n,{hasBuyRequest:!1,buyerID:""});const i=(await K(n)).data().sellerID,o=C(e,"users",i),l=(await K(o)).data().receivedRequestforItem.filter(h=>h!==t);await ye(o,{receivedRequestforItem:l})},async deletefromUser(t,e){const n=x(F),s=C(n,"users",e);await ye(s,{sentRequestforItem:Cu(t)})},async deleteDealRequest(){await this.deleteFromItem(this.fileID),await this.deletefromUser(this.fileID,this.user),this.$router.push({name:"MarketplaceViewItems"})},async checkSold(){const t=x(F),e=C(t,"Items",this.fileID),s=(await K(e)).data();this.isSold=s.sold,s.soldTo===this.user&&(this.isSoldtoYou=!0)}},mounted(){this.getImage(this.fileID),this.checkSold(),this.getSellerName()}},EB={class:"group-list-item"},TB={class:"group-image"},bB=["src"],AB={class:"group-details"},RB={class:"price"},SB={class:"button-container"};function PB(t,e,n,s,r,i){return _(),y("div",EB,[u("div",TB,[u("img",{src:r.fileURL,alt:"No Group Logo"},null,8,bB)]),u("div",AB,[u("h3",null,j(n.item.Name),1),u("p",null,j(this.sellerName),1),u("p",null,"Location: "+j(n.item.Location),1),u("p",RB,"Price: "+j(n.item.Price),1),u("div",SB,[r.isSoldtoYou?(_(),y("button",{key:0,class:"contact-button",onClick:e[0]||(e[0]=(...o)=>i.emitMsg&&i.emitMsg(...o))},"View Contact Details")):r.isSold?(_(),y("button",{key:1,class:"delete-button",onClick:e[1]||(e[1]=(...o)=>i.deleteDealRequest&&i.deleteDealRequest(...o))},"Delete Request")):(_(),y("button",{key:2,class:"delete-button",onClick:e[2]||(e[2]=(...o)=>i.deleteDealRequest&&i.deleteDealRequest(...o))},"Delete Request"))])])])}const VI=H(wB,[["render",PB],["__scopeId","data-v-bd0481f1"]]),UI=t=>(ue("data-v-01e6b3f0"),t=t(),he(),t),DB=UI(()=>u("br",null,null,-1)),CB={class:"groupFlexbox"},kB={key:0,class:"no-item-msg"},NB=UI(()=>u("h1",null," No Sent Req ",-1)),MB=[NB],OB={components:{SentListingComponent:VI,ContactPopup:sl},data(){return{items:[],user:ve().currentUser.uid,isOpen:!1,item_list:[],showPopup:!1,current_item:null}},methods:{runClose(){this.showPopup=!1},runOpen(t){this.current_user=t,this.showPopup=!0},async fetchItems(){const t=x(F),e=C(t,"users",this.user);let s=(await K(e)).data().sentRequestforItem;this.fetchItemObject(s)},async fetchItemObject(t){for(const e of t){const n=x(F),s=C(n,"Items",e),r=await K(s);r.exists()&&this.item_list.push(r.data())}}},mounted(){this.fetchItems()}},xB=Object.assign(OB,{__name:"SentListings",setup(t){return(e,n)=>(_(),y("div",null,[DB,e.showPopup?(_(),je(sl,{key:0,userId:e.current_user,onClosePopup:e.runClose},null,8,["userId","onClosePopup"])):ne("",!0),u("div",CB,[e.item_list.length===0?(_(),y("div",kB,MB)):ne("",!0),(_(!0),y(fe,null,Dt(e.item_list,s=>(_(),y("div",{key:s.id,class:"group"},[D(VI,{item:s,onOpenPopup:e.runOpen,showPopup:e.showPopup},null,8,["item","onOpenPopup","showPopup"])]))),128))])]))}}),LB=H(xB,[["__scopeId","data-v-01e6b3f0"]]),VB=t=>(ue("data-v-4250f7ec"),t=t(),he(),t),UB={class:"global-nav"},FB={class:"nav"},$B={class:"container"},BB={class:"list"},GB=VB(()=>u("div",{class:"list-header"},[u("h1",null,"Sent Requests")],-1)),qB={data(){return{isOpen:!1}}},jB=Object.assign(qB,{__name:"MarketSentReq",setup(t){return(e,n)=>(_(),y("body",null,[u("div",UB,[D(st)]),u("div",FB,[D(lr)]),u("div",$B,[u("div",BB,[GB,D(LB)])])]))}}),HB=H(jB,[["__scopeId","data-v-4250f7ec"]]),WB={props:{item:{type:Object,required:!0}},data(){return{user:ve().currentUser.uid,fileURL:null,fileID:this.item.id,isMember:!1,userSentRequest:!0,isUserItem:!1,sellerName:""}},methods:{async getSellerName(){const t=x(F),e=C(t,"Items",this.fileID),r=(await K(e)).data().sellerID,i=C(t,"users",r),a=(await K(i)).data();this.sellerName=a.username},async getImage(t){try{let e=$t(),n=`gs://connecthub-88e58.appspot.com/${t}`,s=St(e,n),r=await Xt(s);this.fileURL=r}catch{console.log("No Image Found")}},async getItemStatus(t,e){const n=x(F),s=C(n,"users",e),i=(await K(s)).data();this.userSentRequest=!i.sentRequestforItem.includes(t)},async isMyItem(t,e){const n=x(F),s=C(n,"Items",t),i=(await K(s)).data();this.isUserItem=i.sellerID==e},async sendDealRequest(){const t=this.fileID,e=this.user;this.updateItemDB(t,e),this.updateUserDB(t,e),this.$router.push({name:"MarketplaceSentReq"})},async updateItemDB(t,e){const n=x(F),s=C(n,"Items",t);await ye(s,{hasBuyRequest:!0,buyerID:Ot(e)});const r=(await K(s)).data().sellerID;await ye(C(n,"users",r),{receivedRequestforItem:Ot(t)})},async updateUserDB(t,e){const n=x(F);await ye(C(n,"users",e),{sentRequestforItem:Ot(t)})}},mounted(){try{this.getImage(this.fileID),this.getItemStatus(this.fileID,this.user),this.isMyItem(this.fileID,this.user),this.getSellerName()}catch(t){this.fileURL=null,console.log(t)}}},FI=t=>(ue("data-v-51922643"),t=t(),he(),t),zB={class:"group-list-item"},KB={class:"group-image"},YB=["src"],QB={class:"group-details"},XB={class:"price"},JB={class:"button-container"},ZB={key:0,class:"deal-request-btn"},e9=FI(()=>u("p",null,"My Item",-1)),t9=[e9],n9={key:1,class:"my-item-btn"},s9={key:2,class:"sent-request-btn"},r9=FI(()=>u("p",null," Deal Request Sent! ",-1)),i9=[r9];function o9(t,e,n,s,r,i){return _(),y("div",zB,[u("div",KB,[u("img",{src:r.fileURL,alt:"No Group Logo"},null,8,YB)]),u("div",QB,[u("h3",null,j(n.item.Name),1),u("p",null,j(r.sellerName),1),u("p",null,"Location: "+j(n.item.Location),1),u("p",XB,"Price: "+j(n.item.Price),1),u("div",JB,[r.isUserItem?(_(),y("div",ZB,t9)):r.userSentRequest?(_(),y("div",n9,[u("button",{onClick:e[0]||(e[0]=(...o)=>i.sendDealRequest&&i.sendDealRequest(...o))},"Send Deal Request")])):(_(),y("div",s9,i9))])])])}const $I=H(WB,[["render",o9],["__scopeId","data-v-51922643"]]),BI=t=>(ue("data-v-4c312043"),t=t(),he(),t),a9=BI(()=>u("h1",null," All Items List ",-1)),c9=BI(()=>u("br",null,null,-1)),l9={class:"grid-container"},Rm=x(F),u9={components:{ItemListComponent:$I},data(){return{Items:[],filteredItems:[],user:ve().currentUser.uid,isOpen:!1,filteredGroups:[],groupDistances:[],postalCode:"",isDropdownOpen:!1}},created(){this.fetchItems()},methods:{async fetchItems(){const t=x(),e=Qc($e(t,"Items"),Jc("sold","==",!1));(await ct(e)).forEach(s=>{this.Items.push({id:s.id,...s.data()})})},async getGroup(){const t=C(Rm,"users",this.user),e=await K(t);this.group=e},async getUserPostalCode(){const t=C(Rm,"users",this.user),e=await K(t);e.exists()?this.postalCode=e.data().postalCode:console.error("User document does not exist.")},toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen},closeDropdown(){this.isDropdownOpen=!1},async filterDistance(t){this.filteredGroups=[],this.groupDistances=[];var e=0;console.log(this.postalCode);const n=await this.convertPostalcode(this.postalCode),s=n.latitude,r=n.longitude;for(const i of this.groups){const o=await this.convertPostalcode(i.GroupLocation),a=o.latitude,c=o.longitude;a==0&&c==0?e=99999999:e=this.calculateDistance(s,r,a,c),console.log(e),e<=t&&(this.filteredGroups.push(i),this.groupDistances.push(e))}console.log(this.filteredGroups)},async convertPostalcode(t){const e=`https://www.onemap.gov.sg/api/common/elastic/search?searchVal=${t}&returnGeom=Y&getAddrDetails=Y&pageNum=1`;try{const s=await(await fetch(e)).json();if(s.found>0&&s.results.length>0){const r=s.results[0],i=r.LATITUDE,o=r.LONGITUDE;return{latitude:i,longitude:o}}else return{latitude:0,longitude:0}}catch(n){throw new Error("Error fetching data: "+n.message)}},calculateDistance(t,e,n,s){const i=this.degreesToRadians(n-t),o=this.degreesToRadians(s-e),a=Math.sin(i/2)*Math.sin(i/2)+Math.cos(this.degreesToRadians(t))*Math.cos(this.degreesToRadians(n))*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))},degreesToRadians(t){return t*(Math.PI/180)}}},h9=Object.assign(u9,{__name:"ItemList",setup(t){return(e,n)=>(_(),y("div",null,[a9,c9,u("div",l9,[(_(!0),y(fe,null,Dt(e.Items,s=>(_(),y("div",{key:s.id,class:"group"},[D($I,{item:s},null,8,["item"])]))),128))])]))}}),GI=H(h9,[["__scopeId","data-v-4c312043"]]),d9={class:"nav-global"},f9={class:"nav"},p9={class:"container"},m9={class:"list"};x(F);const g9={components:{Navbar_global:st,NavBar_market:lr,ItemList:GI}},_9=Object.assign(g9,{__name:"MarketViewItems",setup(t){return(e,n)=>(_(),y("body",null,[u("div",d9,[D(st)]),u("div",f9,[D(lr)]),u("div",p9,[u("div",m9,[D(GI)])])]))}}),y9=H(_9,[["__scopeId","data-v-b28fbbd6"]]),v9={props:{user:{type:Object,required:!0},itemID:{type:String,required:!0}},data(){return{showPopup:!1,currentUser:ve().currentUser.uid,showSuccess:!1,fileURL:null,fileID:this.user.uid,isPending:!0}},methods:{async updateBuyer(){const t=x(F);console.log(this.itemID);const e=C(t,"users",this.user.uid);(await K(e)).data(),ye(e,{dealFinishItem:Ot(this.itemID)})},async updateSeller(){const t=x(F),e=C(t,"users",this.currentUser),s=(await K(e)).data(),r=s.listedItem.filter(i=>i!==this.itemID);s.receivedRequestforItem.filter(i=>i!==this.itemID),ye(e,{dealFinishItem:Ot(this.itemID),listedItem:r})},async updateItem(){const t=x(F),e=C(t,"Items",this.itemID);(await K(e)).data(),ye(e,{soldTo:this.user.uid,sold:!0})},approveReq(){this.updateBuyer(),this.updateItem(),this.updateSeller(),alert("approved"),this.$router.push({name:"MarketplaceDealReq"})},async rejectReq(){const t=x(F),e=C(t,"users",this.currentUser),i=(await K(e)).data().receivedRequestforItem.filter(I=>I!==this.itemID);await ye(e,{receivedRequestforItem:i});const o=C(t,"Items",this.itemID),l=(await K(o)).data().buyerID.filter(I=>I!==this.fileID),h=C(t,"users",this.fileID),m=(await K(h)).data().sentRequestforItem.filter(I=>I!==this.itemID);await ye(h,{sentRequestforItem:m}),l.length===0?await ye(o,{buyerID:[],hasBuyReq:!1}):await ye(o,{buyerID:l}),console.log("rejected"),this.$router.push({name:"MarketplaceViewItems"})},async getImage(t){try{let e=$t(),n="gs://connecthub-88e58.appspot.com/"+t,s=St(e,n),r=await Xt(s);this.fileURL=r}catch{console.log("No Image Found")}}},created(){}},I9={class:"group-list-item"},w9={class:"group-details"};function E9(t,e,n,s,r,i){return _(),y("div",I9,[u("div",w9,[u("h3",null,j(n.user.username),1),u("button",{onClick:e[0]||(e[0]=o=>i.approveReq())}," Approve "),u("button",{onClick:e[1]||(e[1]=o=>i.rejectReq())}," Reject ")])])}const T9=H(v9,[["render",E9],["__scopeId","data-v-9ac41cbe"]]),b9={components:{Navbar_global:st,NavBar_market:lr,Approval:T9},data(){return{isOpen:!1,itemID:null,itemName:"",user:ve().currentUser.uid,fileURL:null,buyerList:[]}},methods:{async getImage(t){try{let e=$t(),n="gs://connecthub-88e58.appspot.com/"+t,s=St(e,n),r=await Xt(s);this.fileURL=r}catch{console.log("No Image Found")}},async getItemDetails(t){const e=x(F),n=C(e,"Items",t),r=(await K(n)).data();this.itemName=r.Name;const i=r.buyerID;for(const o of i){const a=C(e,"users",o),l=(await K(a)).data();this.buyerList.push(l)}}},mounted(){this.itemID=this.$route.params.itemID,this.getImage(this.itemID),this.getItemDetails(this.itemID)}},A9=t=>(ue("data-v-b04a9a0d"),t=t(),he(),t),R9={class:"global-nav"},S9={class:"nav"},P9={class:"container"},D9={class:"list"},C9={class:"list-header"},k9=A9(()=>u("h1",null," Deal Requests ",-1)),N9={class:"group-image"},M9=["src"],O9={class:"approval-items"};function x9(t,e,n,s,r,i){const o=ee("Navbar_global"),a=ee("NavBar_market"),c=ee("Approval");return _(),y("body",null,[u("div",R9,[D(o)]),u("div",S9,[D(a)]),u("div",P9,[u("div",D9,[u("div",C9,[k9,u("div",N9,[u("img",{src:r.fileURL,alt:"No Image Logo"},null,8,M9)]),u("h1",null,"Item Name: "+j(r.itemName),1)]),u("div",O9,[(_(!0),y(fe,null,Dt(r.buyerList,l=>(_(),y("div",{key:l.id,class:"user-item"},[D(c,{user:l,itemID:r.itemID},null,8,["user","itemID"])]))),128))])])])])}const L9=H(b9,[["render",x9],["__scopeId","data-v-b04a9a0d"]]),V9=[{path:"/",name:"Landing",component:hk},{path:"/login",name:"Login",component:nk},{path:"/register",name:"Register",component:vM},{path:"/user_dashboard/:user_id",name:"UserDashboard",component:lO,meta:{requiresAuth:!0}},{path:"/all_groups/",name:"All Groups",component:mL,meta:{requiresAuth:!0}},{path:"/marketplace/",name:"Marketplace",component:nV,meta:{requiresAuth:!0}},{path:"/my_groups/",name:"MyGroups",component:SV,meta:{requiresAuth:!0}},{path:"/update_profile/",name:"UpdateProfile",component:JL,meta:{requiresAuth:!0}},{path:"/specific_group_home/:group/:user",name:"SpecificGroupHome",component:UU,meta:{requiresAuth:!0}},{path:"/marketplaceLanding",name:"MarketplaceLanding",component:A$,meta:{requiresAuth:!0}},{path:"/marketdealreq",name:"MarketplaceDealReq",component:s4,meta:{requiresAuth:!0}},{path:"/marketmylist",name:"MarketplaceMyList",component:IB,meta:{requiresAuth:!0}},{path:"/marketsentreq",name:"MarketplaceSentReq",component:HB,meta:{requiresAuth:!0}},{path:"/marketviewitems",name:"MarketplaceViewItems",component:y9,meta:{requiresAuth:!0}},{path:"/group_setting/:group/:user",name:"GroupSetting",component:pF,meta:{requiresAuth:!0}},{path:"/all_discussion/:group/:user",name:"AllDiscussion",component:y2,meta:{requiresAuth:!0}},{path:"/marketapprove/:itemID",name:"MarketApprove",component:L9,meta:{requiresAuth:!0}},{path:"/view_discussion/:group/:user/:discussionID",name:"ViewDiscussion",component:B2,meta:{requiresAuth:!0}},{path:"/Test",name:"Test",component:IF},{path:"/events/:group/:user",name:"Events",component:h$,meta:{requiresAuth:!0}}],qI=gb({history:HT(),routes:V9});qI.beforeEach((t,e,n)=>{const r=ve().currentUser;t.matched.some(i=>i.meta.requiresAuth)?r?n():n({name:"Login"}):n()});lT(pT).use(qI).mount("#app");
